{"version":3,"file":"static/js/254.bfe82990.chunk.js","mappings":"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","sources":["../node_modules/@blueprintjs/core/src/common/configureDom4.ts","../node_modules/@blueprintjs/core/src/components/icon/icon.tsx","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkeyParser.ts","../node_modules/@blueprintjs/core/src/components/hotkeys/keyCombo.tsx","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkey.tsx","../node_modules/@blueprintjs/core/src/common/refs.ts","../node_modules/@blueprintjs/core/src/components/spinner/spinner.tsx","../node_modules/@blueprintjs/core/src/components/button/abstractButton.tsx","../node_modules/@blueprintjs/core/src/components/button/buttons.tsx","../node_modules/@blueprintjs/core/src/components/html/html.tsx","../node_modules/@blueprintjs/core/src/components/dialog/dialog.tsx","../node_modules/@blueprintjs/core/src/components/index.ts","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkeys.tsx","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkeysDialog.tsx","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkeysEvents.ts","../node_modules/@blueprintjs/core/src/components/hotkeys/hotkeysTarget.tsx","../node_modules/algoliasearch-helper/index.js","../node_modules/algoliasearch-helper/node_modules/events/events.js","../node_modules/algoliasearch-helper/src/DerivedHelper/index.js","../node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","../node_modules/algoliasearch-helper/src/SearchParameters/index.js","../node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js","../node_modules/algoliasearch-helper/src/SearchResults/index.js","../node_modules/algoliasearch-helper/src/algoliasearch.helper.js","../node_modules/algoliasearch-helper/src/functions/compact.js","../node_modules/algoliasearch-helper/src/functions/defaultsPure.js","../node_modules/algoliasearch-helper/src/functions/find.js","../node_modules/algoliasearch-helper/src/functions/findIndex.js","../node_modules/algoliasearch-helper/src/functions/formatSort.js","../node_modules/algoliasearch-helper/src/functions/inherits.js","../node_modules/algoliasearch-helper/src/functions/intersection.js","../node_modules/algoliasearch-helper/src/functions/merge.js","../node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","../node_modules/algoliasearch-helper/src/functions/omit.js","../node_modules/algoliasearch-helper/src/functions/orderBy.js","../node_modules/algoliasearch-helper/src/functions/valToNumber.js","../node_modules/algoliasearch-helper/src/requestBuilder.js","../node_modules/algoliasearch-helper/src/utils/isValidUserToken.js","../node_modules/algoliasearch-helper/src/version.js","../node_modules/algoliasearch/dist/algoliasearch-lite.umd.js","../node_modules/react-instantsearch-core/dist/es/connectors/connectHits.js","../node_modules/react-instantsearch-core/dist/es/connectors/connectSearchBox.js","../node_modules/react-instantsearch-core/dist/es/core/context.js","../node_modules/react-instantsearch-core/dist/es/core/createConnector.js","../node_modules/react-instantsearch-core/dist/es/core/highlight.js","../node_modules/react-instantsearch-core/dist/es/core/indexUtils.js","../node_modules/react-instantsearch-core/dist/es/core/translatable.js","../node_modules/react-instantsearch-core/dist/es/core/utils.js","../node_modules/react-instantsearch-core/dist/es/connectors/connectConfigure.js","../node_modules/react-instantsearch-core/dist/es/widgets/Configure.js","../node_modules/react-instantsearch-core/dist/es/core/createInstantSearchManager.js","../node_modules/react-instantsearch-core/dist/es/core/version.js","../node_modules/react-instantsearch-core/dist/es/core/createWidgetsManager.js","../node_modules/react-instantsearch-core/dist/es/core/createStore.js","../node_modules/react-instantsearch-core/dist/es/widgets/InstantSearch.js","../node_modules/react-instantsearch-dom/dist/es/components/SearchBox.js","../node_modules/react-instantsearch-dom/dist/es/core/utils.js","../node_modules/react-instantsearch-core/dist/es/connectors/connectHighlight.js","../node_modules/react-instantsearch-dom/dist/es/components/Highlighter.js","../node_modules/react-instantsearch-dom/dist/es/components/Highlight.js","../node_modules/react-instantsearch-dom/dist/es/widgets/Highlight.js","../node_modules/remixicon-react/CloudLineIcon.js","../node_modules/remixicon-react/Edit2LineIcon.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js"],"sourcesContent":["/*\n * Copyright 2019 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nif (typeof require !== \"undefined\" && typeof window !== \"undefined\" && typeof document !== \"undefined\") {\n    // we're in browser\n    require(\"dom4\"); // only import actual dom4 if we're in the browser (not server-compatible)\n    // we'll still need dom4 types for the TypeScript to compile, these are included in package.json\n}\n","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\n\nimport { IconName, IconSvgPaths16, IconSvgPaths20 } from \"@blueprintjs/icons\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX, IIntentProps, IProps, MaybeElement } from \"../../common\";\n\nexport { IconName };\n\nexport interface IIconProps extends IIntentProps, IProps {\n    /** This component does not support custom children. Use the `icon` prop. */\n    children?: never;\n\n    /**\n     * Color of icon. This is used as the `fill` attribute on the `<svg>` image\n     * so it will override any CSS `color` property, including that set by\n     * `intent`. If this prop is omitted, icon color is inherited from\n     * surrounding text.\n     */\n    color?: string;\n\n    /**\n     * String for the `title` attribute on the rendered element, which will appear\n     * on hover as a native browser tooltip.\n     */\n    htmlTitle?: string;\n\n    /**\n     * Name of a Blueprint UI icon, or an icon element, to render. This prop is\n     * required because it determines the content of the component, but it can\n     * be explicitly set to falsy values to render nothing.\n     *\n     * - If `null` or `undefined` or `false`, this component will render nothing.\n     * - If given an `IconName` (a string literal union of all icon names), that\n     *   icon will be rendered as an `<svg>` with `<path>` tags. Unknown strings\n     *   will render a blank icon to occupy space.\n     * - If given a `JSX.Element`, that element will be rendered and _all other\n     *   props on this component are ignored._ This type is supported to\n     *   simplify icon support in other Blueprint components. As a consumer, you\n     *   should avoid using `<Icon icon={<Element />}` directly; simply render\n     *   `<Element />` instead.\n     */\n    icon: IconName | MaybeElement;\n\n    /**\n     * Size of the icon, in pixels. Blueprint contains 16px and 20px SVG icon\n     * images, and chooses the appropriate resolution based on this prop.\n     * @default Icon.SIZE_STANDARD = 16\n     */\n    iconSize?: number;\n\n    /** CSS style properties. */\n    style?: React.CSSProperties;\n\n    /**\n     * HTML tag to use for the rendered element.\n     * @default \"span\"\n     */\n    tagName?: keyof JSX.IntrinsicElements;\n\n    /**\n     * Description string. This string does not appear in normal browsers, but\n     * it increases accessibility. For instance, screen readers will use it for\n     * aural feedback. By default, this is set to the icon's name. Pass an\n     * explicit falsy value to disable.\n     */\n    title?: string | false | null;\n}\n\n@polyfill\nexport class Icon extends AbstractPureComponent2<IIconProps & React.DOMAttributes<HTMLElement>> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.Icon`;\n\n    public static readonly SIZE_STANDARD = 16;\n    public static readonly SIZE_LARGE = 20;\n\n    public render(): JSX.Element | null {\n        const { icon } = this.props;\n        if (icon == null || typeof icon === \"boolean\") {\n            return null;\n        } else if (typeof icon !== \"string\") {\n            return icon;\n        }\n\n        const {\n            className,\n            color,\n            htmlTitle,\n            iconSize = Icon.SIZE_STANDARD,\n            intent,\n            title = icon,\n            tagName = \"span\",\n            ...htmlprops\n        } = this.props;\n\n        // choose which pixel grid is most appropriate for given icon size\n        const pixelGridSize = iconSize >= Icon.SIZE_LARGE ? Icon.SIZE_LARGE : Icon.SIZE_STANDARD;\n        // render path elements, or nothing if icon name is unknown.\n        const paths = this.renderSvgPaths(pixelGridSize, icon);\n\n        // eslint-disable-next-line deprecation/deprecation\n        const classes = classNames(Classes.ICON, Classes.iconClass(icon), Classes.intentClass(intent), className);\n        const viewBox = `0 0 ${pixelGridSize} ${pixelGridSize}`;\n\n        return React.createElement(\n            tagName,\n            {\n                ...htmlprops,\n                className: classes,\n                title: htmlTitle,\n            },\n            <svg fill={color} data-icon={icon} width={iconSize} height={iconSize} viewBox={viewBox}>\n                {title && <desc>{title}</desc>}\n                {paths}\n            </svg>,\n        );\n    }\n\n    /** Render `<path>` elements for the given icon name. Returns `null` if name is unknown. */\n    private renderSvgPaths(pathsSize: number, iconName: IconName): JSX.Element[] | null {\n        const svgPathsRecord = pathsSize === Icon.SIZE_STANDARD ? IconSvgPaths16 : IconSvgPaths20;\n        const pathStrings = svgPathsRecord[iconName];\n        if (pathStrings == null) {\n            return null;\n        }\n        return pathStrings.map((d, i) => <path key={i} d={d} fillRule=\"evenodd\" />);\n    }\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface IKeyCodeTable {\n    [code: number]: string;\n}\n\nexport interface IKeyCodeReverseTable {\n    [key: string]: number;\n}\n\nexport interface IKeyMap {\n    [key: string]: string;\n}\n\nexport const KeyCodes: IKeyCodeTable = {\n    8: \"backspace\",\n    9: \"tab\",\n    13: \"enter\",\n    20: \"capslock\",\n    27: \"esc\",\n    32: \"space\",\n    33: \"pageup\",\n    34: \"pagedown\",\n    35: \"end\",\n    36: \"home\",\n    37: \"left\",\n    38: \"up\",\n    39: \"right\",\n    40: \"down\",\n    45: \"ins\",\n    46: \"del\",\n    // number keys\n    48: \"0\",\n    49: \"1\",\n    50: \"2\",\n    51: \"3\",\n    52: \"4\",\n    53: \"5\",\n    54: \"6\",\n    55: \"7\",\n    56: \"8\",\n    57: \"9\",\n    // alphabet\n    65: \"a\",\n    66: \"b\",\n    67: \"c\",\n    68: \"d\",\n    69: \"e\",\n    70: \"f\",\n    71: \"g\",\n    72: \"h\",\n    73: \"i\",\n    74: \"j\",\n    75: \"k\",\n    76: \"l\",\n    77: \"m\",\n    78: \"n\",\n    79: \"o\",\n    80: \"p\",\n    81: \"q\",\n    82: \"r\",\n    83: \"s\",\n    84: \"t\",\n    85: \"u\",\n    86: \"v\",\n    87: \"w\",\n    88: \"x\",\n    89: \"y\",\n    90: \"z\",\n    // punctuation\n    106: \"*\",\n    107: \"+\",\n    109: \"-\",\n    110: \".\",\n    111: \"/\",\n    186: \";\",\n    187: \"=\",\n    188: \",\",\n    189: \"-\",\n    190: \".\",\n    191: \"/\",\n    192: \"`\",\n    219: \"[\",\n    220: \"\\\\\",\n    221: \"]\",\n    222: \"'\",\n};\n\nexport const Modifiers: IKeyCodeTable = {\n    16: \"shift\",\n    17: \"ctrl\",\n    18: \"alt\",\n    91: \"meta\",\n    93: \"meta\",\n    224: \"meta\",\n};\n\nexport const ModifierBitMasks: IKeyCodeReverseTable = {\n    alt: 1,\n    ctrl: 2,\n    meta: 4,\n    shift: 8,\n};\n\nexport const Aliases: IKeyMap = {\n    cmd: \"meta\",\n    command: \"meta\",\n    escape: \"esc\",\n    minus: \"-\",\n    mod: isMac() ? \"meta\" : \"ctrl\",\n    option: \"alt\",\n    plus: \"+\",\n    return: \"enter\",\n    win: \"meta\",\n};\n\n// alph sorting is unintuitive here\n// tslint:disable object-literal-sort-keys\nexport const ShiftKeys: IKeyMap = {\n    \"~\": \"`\",\n    \"!\": \"1\",\n    \"@\": \"2\",\n    \"#\": \"3\",\n    $: \"4\",\n    \"%\": \"5\",\n    \"^\": \"6\",\n    \"&\": \"7\",\n    \"*\": \"8\",\n    \"(\": \"9\",\n    \")\": \"0\",\n    _: \"-\",\n    \"+\": \"=\",\n    \"{\": \"[\",\n    \"}\": \"]\",\n    \"|\": \"\\\\\",\n    \":\": \";\",\n    '\"': \"'\",\n    \"<\": \",\",\n    \">\": \".\",\n    \"?\": \"/\",\n};\n// tslint:enable object-literal-sort-keys\n\n// Function keys\nfor (let i = 1; i <= 12; ++i) {\n    KeyCodes[111 + i] = \"f\" + i;\n}\n\n// Numpad\nfor (let i = 0; i <= 9; ++i) {\n    KeyCodes[96 + i] = \"num\" + i.toString();\n}\n\nexport interface IKeyCombo {\n    key?: string;\n    modifiers: number;\n}\n\nexport function comboMatches(a: IKeyCombo, b: IKeyCombo) {\n    return a.modifiers === b.modifiers && a.key === b.key;\n}\n\n/**\n * Converts a key combo string into a key combo object. Key combos include\n * zero or more modifier keys, such as `shift` or `alt`, and exactly one\n * action key, such as `A`, `enter`, or `left`.\n *\n * For action keys that require a shift, e.g. `@` or `|`, we inlude the\n * necessary `shift` modifier and automatically convert the action key to the\n * unshifted version. For example, `@` is equivalent to `shift+2`.\n */\nexport const parseKeyCombo = (combo: string): IKeyCombo => {\n    const pieces = combo.replace(/\\s/g, \"\").toLowerCase().split(\"+\");\n    let modifiers = 0;\n    let key: string | undefined;\n    for (let piece of pieces) {\n        if (piece === \"\") {\n            throw new Error(`Failed to parse key combo \"${combo}\".\n                Valid key combos look like \"cmd + plus\", \"shift+p\", or \"!\"`);\n        }\n\n        if (Aliases[piece] != null) {\n            piece = Aliases[piece];\n        }\n\n        if (ModifierBitMasks[piece] != null) {\n            modifiers += ModifierBitMasks[piece];\n        } else if (ShiftKeys[piece] != null) {\n            modifiers += ModifierBitMasks.shift;\n            key = ShiftKeys[piece];\n        } else {\n            key = piece.toLowerCase();\n        }\n    }\n    return { modifiers, key };\n};\n\n/**\n * Converts a keyboard event into a valid combo prop string\n */\nexport const getKeyComboString = (e: KeyboardEvent): string => {\n    const keys = [] as string[];\n\n    // modifiers first\n    if (e.ctrlKey) {\n        keys.push(\"ctrl\");\n    }\n    if (e.altKey) {\n        keys.push(\"alt\");\n    }\n    if (e.shiftKey) {\n        keys.push(\"shift\");\n    }\n    if (e.metaKey) {\n        keys.push(\"meta\");\n    }\n\n    // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n    // eslint-disable-next-line deprecation/deprecation\n    const { which } = e;\n    if (Modifiers[which] != null) {\n        // no action key\n    } else if (KeyCodes[which] != null) {\n        keys.push(KeyCodes[which]);\n    } else {\n        // eslint-disable-next-line id-blacklist\n        keys.push(String.fromCharCode(which).toLowerCase());\n    }\n\n    // join keys with plusses\n    return keys.join(\" + \");\n};\n\n/**\n * Determines the key combo object from the given keyboard event. Again, a key\n * combo includes zero or more modifiers (represented by a bitmask) and one\n * action key, which we determine from the `e.which` property of the keyboard\n * event.\n */\nexport const getKeyCombo = (e: KeyboardEvent): IKeyCombo => {\n    let key: string | undefined;\n    // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n    // eslint-disable-next-line deprecation/deprecation\n    const { which } = e;\n    if (Modifiers[which] != null) {\n        // keep key null\n    } else if (KeyCodes[which] != null) {\n        key = KeyCodes[which];\n    } else {\n        // eslint-disable-next-line id-blacklist\n        key = String.fromCharCode(which).toLowerCase();\n    }\n\n    let modifiers = 0;\n    if (e.altKey) {\n        modifiers += ModifierBitMasks.alt;\n    }\n    if (e.ctrlKey) {\n        modifiers += ModifierBitMasks.ctrl;\n    }\n    if (e.metaKey) {\n        modifiers += ModifierBitMasks.meta;\n    }\n    if (e.shiftKey) {\n        modifiers += ModifierBitMasks.shift;\n    }\n\n    return { modifiers, key };\n};\n\n/**\n * Splits a key combo string into its constituent key values and looks up\n * aliases, such as `return` -> `enter`.\n *\n * Unlike the parseKeyCombo method, this method does NOT convert shifted\n * action keys. So `\"@\"` will NOT be converted to `[\"shift\", \"2\"]`).\n */\nexport const normalizeKeyCombo = (combo: string, platformOverride?: string): string[] => {\n    const keys = combo.replace(/\\s/g, \"\").split(\"+\");\n    return keys.map(key => {\n        const keyName = Aliases[key] != null ? Aliases[key] : key;\n        return keyName === \"meta\" ? (isMac(platformOverride) ? \"cmd\" : \"ctrl\") : keyName;\n    });\n};\n\nfunction isMac(platformOverride?: string) {\n    const platform =\n        platformOverride != null ? platformOverride : typeof navigator !== \"undefined\" ? navigator.platform : undefined;\n    return platform == null ? false : /Mac|iPod|iPhone|iPad/.test(platform);\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX, IProps } from \"../../common\";\nimport { Icon, IconName } from \"../icon/icon\";\nimport { normalizeKeyCombo } from \"./hotkeyParser\";\n\nconst KeyIcons: { [key: string]: IconName } = {\n    alt: \"key-option\",\n    cmd: \"key-command\",\n    ctrl: \"key-control\",\n    delete: \"key-delete\",\n    down: \"arrow-down\",\n    enter: \"key-enter\",\n    left: \"arrow-left\",\n    meta: \"key-command\",\n    right: \"arrow-right\",\n    shift: \"key-shift\",\n    up: \"arrow-up\",\n};\n\nexport interface IKeyComboProps extends IProps {\n    /** The key combo to display, such as `\"cmd + s\"`. */\n    combo: string;\n\n    /**\n     * Whether to render in a minimal style.\n     * If `false`, each key in the combo will be rendered inside a `<kbd>` tag.\n     * If `true`, only the icon or short name of a key will be rendered with no wrapper styles.\n     * @default false\n     */\n    minimal?: boolean;\n}\n\n@polyfill\nexport class KeyCombo extends AbstractPureComponent2<IKeyComboProps> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.KeyCombo`;\n\n    public render() {\n        const { className, combo, minimal } = this.props;\n        const keys = normalizeKeyCombo(combo)\n            .map(key => (key.length === 1 ? key.toUpperCase() : key))\n            .map(minimal ? this.renderMinimalKey : this.renderKey);\n        return <span className={classNames(Classes.KEY_COMBO, className)}>{keys}</span>;\n    }\n\n    private renderKey = (key: string, index: number) => {\n        const icon = KeyIcons[key];\n        const reactKey = `key-${index}`;\n        return icon == null ? (\n            <kbd className={Classes.KEY} key={reactKey}>\n                {key}\n            </kbd>\n        ) : (\n            <kbd className={classNames(Classes.KEY, Classes.MODIFIER_KEY)} key={reactKey}>\n                <Icon icon={icon} /> {key}\n            </kbd>\n        );\n    };\n\n    private renderMinimalKey = (key: string, index: number) => {\n        const icon = KeyIcons[key];\n        return icon == null ? key : <Icon icon={icon} key={`key-${index}`} />;\n    };\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX, IProps } from \"../../common\";\nimport { KeyCombo } from \"./keyCombo\";\n\nexport interface IHotkeyProps extends IProps {\n    /**\n     * Whether the hotkey should be triggerable when focused in a text input.\n     * @default false\n     */\n    allowInInput?: boolean;\n\n    /**\n     * Hotkey combination string, such as \"space\" or \"cmd+n\".\n     */\n    combo: string;\n\n    /**\n     * Whether the hotkey cannot be triggered.\n     * @default false\n     */\n    disabled?: boolean;\n\n    /**\n     * Human-friendly label for the hotkey.\n     */\n    label: React.ReactNode;\n\n    /**\n     * If `false`, the hotkey is active only when the target is focused. If\n     * `true`, the hotkey can be triggered regardless of what component is\n     * focused.\n     * @default false\n     */\n    global?: boolean;\n\n    /**\n     * Unless the hotkey is global, you must specify a group where the hotkey\n     * will be displayed in the hotkeys dialog. This string will be displayed\n     * in a header at the start of the group of hotkeys.\n     */\n    group?: string;\n\n    /**\n     * When `true`, invokes `event.preventDefault()` before the respective `onKeyDown` and\n     * `onKeyUp` callbacks are invoked. Enabling this can simplify handler implementations.\n     * @default false\n     */\n    preventDefault?: boolean;\n\n    /**\n     * When `true`, invokes `event.stopPropagation()` before the respective `onKeyDown` and\n     * `onKeyUp` callbacks are invoked. Enabling this can simplify handler implementations.\n     * @default false\n     */\n    stopPropagation?: boolean;\n\n    /**\n     * `keydown` event handler.\n     */\n    onKeyDown?(e: KeyboardEvent): any;\n\n    /**\n     * `keyup` event handler.\n     */\n    onKeyUp?(e: KeyboardEvent): any;\n}\n\n@polyfill\nexport class Hotkey extends AbstractPureComponent2<IHotkeyProps> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.Hotkey`;\n\n    public static defaultProps = {\n        allowInInput: false,\n        disabled: false,\n        global: false,\n        preventDefault: false,\n        stopPropagation: false,\n    };\n\n    public render() {\n        const { label, className, ...spreadableProps } = this.props;\n\n        const rootClasses = classNames(Classes.HOTKEY, className);\n        return (\n            <div className={rootClasses}>\n                <div className={Classes.HOTKEY_LABEL}>{label}</div>\n                <KeyCombo {...spreadableProps} />\n            </div>\n        );\n    }\n\n    protected validateProps(props: IHotkeyProps) {\n        if (props.global !== true && props.group == null) {\n            throw new Error(\"non-global <Hotkey>s must define a group\");\n        }\n    }\n}\n","/*\n * Copyright 2020 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport type IRef<T = HTMLElement> = IRefObject<T> | IRefCallback<T>;\n\n// compatible with React.Ref type in @types/react@^16\nexport interface IRefObject<T = HTMLElement> {\n    current: T | null;\n}\n\nexport function isRefObject<T extends HTMLElement>(value: IRef<T> | undefined | null): value is IRefObject<T> {\n    return value != null && typeof (value as IRefObject<T>).current !== \"undefined\";\n}\n\nexport type IRefCallback<T = HTMLElement> = (ref: T | null) => any;\n\nexport function isRefCallback<T extends HTMLElement>(value: IRef<T> | undefined): value is IRefCallback<T> {\n    return typeof value === \"function\";\n}\n\nexport function getRef<T = HTMLElement>(ref: T | IRefObject<T> | null) {\n    if (ref === null) {\n        return null;\n    }\n\n    return (ref as IRefObject<T>).current ?? (ref as T);\n}\n","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport { SPINNER_WARN_CLASSES_SIZE } from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX, IIntentProps, IProps } from \"../../common/props\";\nimport { clamp } from \"../../common/utils\";\n\n// see http://stackoverflow.com/a/18473154/3124288 for calculating arc path\nconst R = 45;\nconst SPINNER_TRACK = `M 50,50 m 0,-${R} a ${R},${R} 0 1 1 0,${R * 2} a ${R},${R} 0 1 1 0,-${R * 2}`;\n\n// unitless total length of SVG path, to which stroke-dash* properties are relative.\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/pathLength\n// this value is the result of `<path d={SPINNER_TRACK} />.getTotalLength()` and works in all browsers:\nconst PATH_LENGTH = 280;\n\nconst MIN_SIZE = 10;\nconst STROKE_WIDTH = 4;\nconst MIN_STROKE_WIDTH = 16;\n\nexport interface ISpinnerProps extends IProps, IIntentProps {\n    /**\n     * Width and height of the spinner in pixels. The size cannot be less than\n     * 10px.\n     *\n     * Constants are available for common sizes:\n     * - `Spinner.SIZE_SMALL = 20px`\n     * - `Spinner.SIZE_STANDARD = 50px`\n     * - `Spinner.SIZE_LARGE = 100px`\n     *\n     * @default Spinner.SIZE_STANDARD = 50\n     */\n    size?: number;\n\n    /**\n     * HTML tag for the two wrapper elements. If rendering a `<Spinner>` inside\n     * an `<svg>`, change this to an SVG element like `\"g\"`.\n     * @default \"div\"\n     */\n    tagName?: keyof JSX.IntrinsicElements;\n\n    /**\n     * A value between 0 and 1 (inclusive) representing how far along the operation is.\n     * Values below 0 or above 1 will be interpreted as 0 or 1 respectively.\n     * Omitting this prop will result in an \"indeterminate\" spinner where the head spins indefinitely.\n     */\n    value?: number;\n}\n\n@polyfill\nexport class Spinner extends AbstractPureComponent2<ISpinnerProps> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.Spinner`;\n\n    public static readonly SIZE_SMALL = 20;\n    public static readonly SIZE_STANDARD = 50;\n    public static readonly SIZE_LARGE = 100;\n\n    public componentDidUpdate(prevProps: ISpinnerProps) {\n        if (prevProps.value !== this.props.value) {\n            // IE/Edge: re-render after changing value to force SVG update\n            this.forceUpdate();\n        }\n    }\n\n    public render() {\n        const { className, intent, value, tagName = \"div\" } = this.props;\n        const size = this.getSize();\n\n        const classes = classNames(\n            Classes.SPINNER,\n            Classes.intentClass(intent),\n            { [Classes.SPINNER_NO_SPIN]: value != null },\n            className,\n        );\n\n        // keep spinner track width consistent at all sizes (down to about 10px).\n        const strokeWidth = Math.min(MIN_STROKE_WIDTH, (STROKE_WIDTH * Spinner.SIZE_LARGE) / size);\n        const strokeOffset = PATH_LENGTH - PATH_LENGTH * (value == null ? 0.25 : clamp(value, 0, 1));\n\n        // multiple DOM elements around SVG are necessary to properly isolate animation:\n        // - SVG elements in IE do not support anim/trans so they must be set on a parent HTML element.\n        // - SPINNER_ANIMATION isolates svg from parent display and is always centered inside root element.\n        return React.createElement(\n            tagName,\n            { className: classes },\n            React.createElement(\n                tagName,\n                { className: Classes.SPINNER_ANIMATION },\n                <svg\n                    width={size}\n                    height={size}\n                    strokeWidth={strokeWidth.toFixed(2)}\n                    viewBox={this.getViewBox(strokeWidth)}\n                >\n                    <path className={Classes.SPINNER_TRACK} d={SPINNER_TRACK} />\n                    <path\n                        className={Classes.SPINNER_HEAD}\n                        d={SPINNER_TRACK}\n                        pathLength={PATH_LENGTH}\n                        strokeDasharray={`${PATH_LENGTH} ${PATH_LENGTH}`}\n                        strokeDashoffset={strokeOffset}\n                    />\n                </svg>,\n            ),\n        );\n    }\n\n    protected validateProps({ className = \"\", size }: ISpinnerProps) {\n        if (size != null && (className.indexOf(Classes.SMALL) >= 0 || className.indexOf(Classes.LARGE) >= 0)) {\n            console.warn(SPINNER_WARN_CLASSES_SIZE);\n        }\n    }\n\n    /**\n     * Resolve size to a pixel value.\n     * Size can be set by className, props, default, or minimum constant.\n     */\n    private getSize() {\n        const { className = \"\", size } = this.props;\n        if (size == null) {\n            // allow Classes constants to determine default size.\n            if (className.indexOf(Classes.SMALL) >= 0) {\n                return Spinner.SIZE_SMALL;\n            } else if (className.indexOf(Classes.LARGE) >= 0) {\n                return Spinner.SIZE_LARGE;\n            }\n            return Spinner.SIZE_STANDARD;\n        }\n        return Math.max(MIN_SIZE, size);\n    }\n\n    /** Compute viewbox such that stroked track sits exactly at edge of image frame. */\n    private getViewBox(strokeWidth: number) {\n        const radius = R + strokeWidth / 2;\n        const viewBoxX = (50 - radius).toFixed(2);\n        const viewBoxWidth = (radius * 2).toFixed(2);\n        return `${viewBoxX} ${viewBoxX} ${viewBoxWidth} ${viewBoxWidth}`;\n    }\n}\n","/*\n * Copyright 2017 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\n\nimport {\n    AbstractPureComponent2,\n    Alignment,\n    Classes,\n    getRef,\n    IActionProps,\n    IElementRefProps,\n    IRefObject,\n    Keys,\n    MaybeElement,\n    Utils,\n} from \"../../common\";\nimport { Icon, IconName } from \"../icon/icon\";\nimport { Spinner } from \"../spinner/spinner\";\n\nexport interface IButtonProps extends IActionProps, IElementRefProps<any> {\n    /**\n     * If set to `true`, the button will display in an active state.\n     * This is equivalent to setting `className={Classes.ACTIVE}`.\n     * @default false\n     */\n    active?: boolean;\n\n    /**\n     * Text alignment within button. By default, icons and text will be centered\n     * within the button. Passing `\"left\"` or `\"right\"` will align the button\n     * text to that side and push `icon` and `rightIcon` to either edge. Passing\n     * `\"center\"` will center the text and icons together.\n     * @default Alignment.CENTER\n     */\n    alignText?: Alignment;\n\n    /** Whether this button should expand to fill its container. */\n    fill?: boolean;\n\n    /** Whether this button should use large styles. */\n    large?: boolean;\n\n    /**\n     * If set to `true`, the button will display a centered loading spinner instead of its contents.\n     * The width of the button is not affected by the value of this prop.\n     * @default false\n     */\n    loading?: boolean;\n\n    /** Whether this button should use minimal styles. */\n    minimal?: boolean;\n\n    /** Whether this button should use outlined styles. */\n    outlined?: boolean;\n\n    /** Name of a Blueprint UI icon (or an icon element) to render after the text. */\n    rightIcon?: IconName | MaybeElement;\n\n    /** Whether this button should use small styles. */\n    small?: boolean;\n\n    /**\n     * HTML `type` attribute of button. Accepted values are `\"button\"`, `\"submit\"`, and `\"reset\"`.\n     * Note that this prop has no effect on `AnchorButton`; it only affects `Button`.\n     * @default \"button\"\n     */\n    type?: \"submit\" | \"reset\" | \"button\";\n}\n\nexport interface IButtonState {\n    isActive: boolean;\n}\n\nexport abstract class AbstractButton<H extends React.HTMLAttributes<HTMLElement>> extends AbstractPureComponent2<\n    IButtonProps & H,\n    IButtonState\n> {\n    public state = {\n        isActive: false,\n    };\n\n    protected abstract buttonRef: HTMLElement | IRefObject<HTMLElement> | null;\n\n    private currentKeyDown?: number;\n\n    public abstract render(): JSX.Element;\n\n    protected getCommonButtonProps() {\n        const { active, alignText, fill, large, loading, outlined, minimal, small, tabIndex } = this.props;\n        const disabled = this.props.disabled || loading;\n\n        const className = classNames(\n            Classes.BUTTON,\n            {\n                [Classes.ACTIVE]: !disabled && (active || this.state.isActive),\n                [Classes.DISABLED]: disabled,\n                [Classes.FILL]: fill,\n                [Classes.LARGE]: large,\n                [Classes.LOADING]: loading,\n                [Classes.MINIMAL]: minimal,\n                [Classes.OUTLINED]: outlined,\n                [Classes.SMALL]: small,\n            },\n            Classes.alignmentClass(alignText),\n            Classes.intentClass(this.props.intent),\n            this.props.className,\n        );\n\n        return {\n            className,\n            disabled,\n            onBlur: this.handleBlur,\n            onClick: disabled ? undefined : this.props.onClick,\n            onKeyDown: this.handleKeyDown,\n            onKeyUp: this.handleKeyUp,\n            tabIndex: disabled ? -1 : tabIndex,\n        };\n    }\n\n    // we're casting as `any` to get around a somewhat opaque safeInvoke error\n    // that \"Type argument candidate 'KeyboardEvent<T>' is not a valid type\n    // argument because it is not a supertype of candidate\n    // 'KeyboardEvent<HTMLElement>'.\"\n    protected handleKeyDown = (e: React.KeyboardEvent<any>) => {\n        // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n        /* eslint-disable deprecation/deprecation */\n        if (Keys.isKeyboardClick(e.which)) {\n            e.preventDefault();\n            if (e.which !== this.currentKeyDown) {\n                this.setState({ isActive: true });\n            }\n        }\n        this.currentKeyDown = e.which;\n        this.props.onKeyDown?.(e);\n    };\n\n    protected handleKeyUp = (e: React.KeyboardEvent<any>) => {\n        // HACKHACK: https://github.com/palantir/blueprint/issues/4165\n        /* eslint-disable deprecation/deprecation */\n        if (Keys.isKeyboardClick(e.which)) {\n            this.setState({ isActive: false });\n            getRef(this.buttonRef)?.click();\n        }\n        this.currentKeyDown = undefined;\n        this.props.onKeyUp?.(e);\n    };\n\n    protected handleBlur = (e: React.FocusEvent<any>) => {\n        if (this.state.isActive) {\n            this.setState({ isActive: false });\n        }\n        this.props.onBlur?.(e);\n    };\n\n    protected renderChildren(): React.ReactNode {\n        const { children, icon, loading, rightIcon, text } = this.props;\n        return [\n            loading && <Spinner key=\"loading\" className={Classes.BUTTON_SPINNER} size={Icon.SIZE_LARGE} />,\n            <Icon key=\"leftIcon\" icon={icon} />,\n            (!Utils.isReactNodeEmpty(text) || !Utils.isReactNodeEmpty(children)) && (\n                <span key=\"text\" className={Classes.BUTTON_TEXT}>\n                    {text}\n                    {children}\n                </span>\n            ),\n            <Icon key=\"rightIcon\" icon={rightIcon} />,\n        ];\n    }\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// HACKHACK: these components should go in separate files\n/* eslint-disable max-classes-per-file */\n\nimport * as React from \"react\";\n\nimport { DISPLAYNAME_PREFIX, removeNonHTMLProps } from \"../../common/props\";\nimport { IRefCallback, IRefObject, isRefObject } from \"../../common/refs\";\nimport { AbstractButton, IButtonProps } from \"./abstractButton\";\n\nexport { IButtonProps };\n\nexport class Button extends AbstractButton<React.ButtonHTMLAttributes<HTMLButtonElement>> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.Button`;\n\n    // need to keep this ref so that we can access it in AbstractButton#handleKeyUp\n    protected buttonRef: HTMLButtonElement | IRefObject<HTMLButtonElement> | null = null;\n    protected handleRef = isRefObject<HTMLButtonElement>(this.props.elementRef)\n        ? (this.buttonRef = this.props.elementRef)\n        : (ref: HTMLButtonElement | null) => {\n              this.buttonRef = ref;\n              (this.props.elementRef as IRefCallback)?.(ref);\n          };\n\n    public render() {\n        return (\n            <button\n                type=\"button\"\n                ref={this.handleRef}\n                {...removeNonHTMLProps(this.props)}\n                {...this.getCommonButtonProps()}\n            >\n                {this.renderChildren()}\n            </button>\n        );\n    }\n}\n\nexport class AnchorButton extends AbstractButton<React.AnchorHTMLAttributes<HTMLAnchorElement>> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.AnchorButton`;\n\n    // need to keep this ref so that we can access it in AbstractButton#handleKeyUp\n    protected buttonRef: HTMLAnchorElement | IRefObject<HTMLAnchorElement> | null = null;\n    protected handleRef = isRefObject<HTMLAnchorElement>(this.props.elementRef)\n        ? (this.buttonRef = this.props.elementRef)\n        : (ref: HTMLAnchorElement | null) => {\n              this.buttonRef = ref;\n              (this.props.elementRef as IRefCallback)?.(ref);\n          };\n\n    public render() {\n        const { href, tabIndex = 0 } = this.props;\n        const commonProps = this.getCommonButtonProps();\n\n        return (\n            <a\n                role=\"button\"\n                ref={this.handleRef}\n                {...removeNonHTMLProps(this.props)}\n                {...commonProps}\n                href={commonProps.disabled ? undefined : href}\n                tabIndex={commonProps.disabled ? -1 : tabIndex}\n            >\n                {this.renderChildren()}\n            </a>\n        );\n    }\n}\n","/*\n * Copyright 2018 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { IElementRefProps } from \"../../common\";\nimport { BLOCKQUOTE, CODE, CODE_BLOCK, HEADING, LABEL, LIST } from \"../../common/classes\";\n\nfunction htmlElement<E extends HTMLElement>(\n    tagName: keyof JSX.IntrinsicElements,\n    tagClassName: string,\n): React.FunctionComponent<React.HTMLProps<E> & IElementRefProps<E>> {\n    return props => {\n        const { className, elementRef, ...htmlProps } = props;\n        return React.createElement(tagName, {\n            ...htmlProps,\n            className: classNames(tagClassName, className),\n            ref: elementRef,\n        });\n    };\n}\n\n// the following components are linted by blueprint-html-components because\n// they should rarely be used without the Blueprint classes/styles:\n\nexport const H1 = htmlElement<HTMLHeadingElement>(\"h1\", HEADING);\nexport const H2 = htmlElement<HTMLHeadingElement>(\"h2\", HEADING);\nexport const H3 = htmlElement<HTMLHeadingElement>(\"h3\", HEADING);\nexport const H4 = htmlElement<HTMLHeadingElement>(\"h4\", HEADING);\nexport const H5 = htmlElement<HTMLHeadingElement>(\"h5\", HEADING);\nexport const H6 = htmlElement<HTMLHeadingElement>(\"h6\", HEADING);\n\nexport const Blockquote = htmlElement<HTMLElement>(\"blockquote\", BLOCKQUOTE);\nexport const Code = htmlElement<HTMLElement>(\"code\", CODE);\nexport const Pre = htmlElement<HTMLElement>(\"pre\", CODE_BLOCK);\nexport const Label = htmlElement<HTMLLabelElement>(\"label\", LABEL);\n\n// these two are not linted by blueprint-html-components because there are valid\n// uses of these elements without Blueprint styles:\nexport const OL = htmlElement<HTMLOListElement>(\"ol\", LIST);\nexport const UL = htmlElement<HTMLUListElement>(\"ul\", LIST);\n","/*\n * Copyright 2015 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes } from \"../../common\";\nimport * as Errors from \"../../common/errors\";\nimport { DISPLAYNAME_PREFIX, IProps, MaybeElement } from \"../../common/props\";\nimport { Button } from \"../button/buttons\";\nimport { H4 } from \"../html/html\";\nimport { Icon, IconName } from \"../icon/icon\";\nimport { IBackdropProps, IOverlayableProps, Overlay } from \"../overlay/overlay\";\n\nexport interface IDialogProps extends IOverlayableProps, IBackdropProps, IProps {\n    /**\n     * Toggles the visibility of the overlay and its children.\n     * This prop is required because the component is controlled.\n     */\n    isOpen: boolean;\n\n    /**\n     * Dialog always has a backdrop so this prop is excluded from the public API.\n     * @internal\n     */\n    hasBackdrop?: boolean;\n\n    /**\n     * Name of a Blueprint UI icon (or an icon element) to render in the\n     * dialog's header. Note that the header will only be rendered if `title` is\n     * provided.\n     */\n    icon?: IconName | MaybeElement;\n\n    /**\n     * Whether to show the close button in the dialog's header.\n     * Note that the header will only be rendered if `title` is provided.\n     * @default true\n     */\n    isCloseButtonShown?: boolean;\n\n    /**\n     * CSS styles to apply to the dialog.\n     * @default {}\n     */\n    style?: React.CSSProperties;\n\n    /**\n     * Title of the dialog. If provided, an element with `Classes.DIALOG_HEADER`\n     * will be rendered inside the dialog before any children elements.\n     */\n    title?: React.ReactNode;\n\n    /**\n     * Name of the transition for internal `CSSTransition`. Providing your own\n     * name here will require defining new CSS transition properties.\n     */\n    transitionName?: string;\n}\n\n@polyfill\nexport class Dialog extends AbstractPureComponent2<IDialogProps> {\n    public static defaultProps: IDialogProps = {\n        canOutsideClickClose: true,\n        isOpen: false,\n    };\n\n    public static displayName = `${DISPLAYNAME_PREFIX}.Dialog`;\n\n    public render() {\n        return (\n            <Overlay {...this.props} className={Classes.OVERLAY_SCROLL_CONTAINER} hasBackdrop={true}>\n                <div className={Classes.DIALOG_CONTAINER}>\n                    <div className={classNames(Classes.DIALOG, this.props.className)} style={this.props.style}>\n                        {this.maybeRenderHeader()}\n                        {this.props.children}\n                    </div>\n                </div>\n            </Overlay>\n        );\n    }\n\n    protected validateProps(props: IDialogProps) {\n        if (props.title == null) {\n            if (props.icon != null) {\n                console.warn(Errors.DIALOG_WARN_NO_HEADER_ICON);\n            }\n            if (props.isCloseButtonShown != null) {\n                console.warn(Errors.DIALOG_WARN_NO_HEADER_CLOSE_BUTTON);\n            }\n        }\n    }\n\n    private maybeRenderCloseButton() {\n        // show close button if prop is undefined or null\n        // this gives us a behavior as if the default value were `true`\n        if (this.props.isCloseButtonShown !== false) {\n            return (\n                <Button\n                    aria-label=\"Close\"\n                    className={Classes.DIALOG_CLOSE_BUTTON}\n                    icon={<Icon icon=\"small-cross\" iconSize={Icon.SIZE_LARGE} />}\n                    minimal={true}\n                    onClick={this.props.onClose}\n                />\n            );\n        } else {\n            return undefined;\n        }\n    }\n\n    private maybeRenderHeader() {\n        const { icon, title } = this.props;\n        if (title == null) {\n            return undefined;\n        }\n        return (\n            <div className={Classes.DIALOG_HEADER}>\n                <Icon icon={icon} iconSize={Icon.SIZE_LARGE} />\n                <H4>{title}</H4>\n                {this.maybeRenderCloseButton()}\n            </div>\n        );\n    }\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport \"../common/configureDom4\";\n\nimport * as contextMenu from \"./context-menu/contextMenu\";\nexport const ContextMenu = contextMenu;\n\nexport * from \"./alert/alert\";\nexport * from \"./breadcrumbs/breadcrumb\";\nexport * from \"./breadcrumbs/breadcrumbs\";\nexport * from \"./button/buttons\";\nexport * from \"./button/buttonGroup\";\nexport * from \"./callout/callout\";\nexport * from \"./card/card\";\nexport * from \"./collapse/collapse\";\nexport * from \"./collapsible-list/collapsibleList\";\nexport * from \"./context-menu/contextMenuTarget\";\nexport * from \"./dialog/dialog\";\nexport * from \"./divider/divider\";\nexport * from \"./drawer/drawer\";\nexport * from \"./editable-text/editableText\";\nexport * from \"./forms/controlGroup\";\nexport * from \"./forms/controls\";\nexport * from \"./forms/fileInput\";\nexport * from \"./forms/formGroup\";\nexport * from \"./forms/inputGroup\";\nexport * from \"./forms/numericInput\";\nexport * from \"./forms/radioGroup\";\nexport * from \"./forms/textArea\";\nexport * from \"./html/html\";\nexport * from \"./html-select/htmlSelect\";\nexport * from \"./html-table/htmlTable\";\nexport * from \"./hotkeys/index\";\nexport * from \"./icon/icon\";\nexport * from \"./menu/menu\";\nexport * from \"./menu/menuDivider\";\nexport * from \"./menu/menuItem\";\nexport * from \"./navbar/navbar\";\nexport * from \"./navbar/navbarDivider\";\nexport * from \"./navbar/navbarGroup\";\nexport * from \"./navbar/navbarHeading\";\nexport * from \"./non-ideal-state/nonIdealState\";\nexport * from \"./overflow-list/overflowList\";\nexport * from \"./overlay/overlay\";\nexport * from \"./text/text\";\nexport * from \"./panel-stack/panelProps\";\nexport * from \"./panel-stack/panelStack\";\nexport * from \"./popover/popover\";\nexport * from \"./popover/popoverSharedProps\";\nexport * from \"./portal/portal\";\nexport * from \"./progress-bar/progressBar\";\nexport * from \"./resize-sensor/resizeSensor\";\nexport * from \"./resize-sensor/resizeObserverTypes\";\nexport * from \"./slider/handleProps\";\nexport * from \"./slider/multiSlider\";\nexport * from \"./slider/rangeSlider\";\nexport * from \"./slider/slider\";\nexport * from \"./spinner/spinner\";\nexport * from \"./tabs/tab\";\nexport * from \"./tabs/tabs\";\nexport * from \"./tag/tag\";\nexport * from \"./tag-input/tagInput\";\nexport * from \"./toast/toast\";\nexport * from \"./toast/toaster\";\nexport * from \"./tooltip/tooltip\";\nexport * from \"./tree/tree\";\nexport * from \"./tree/treeNode\";\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { polyfill } from \"react-lifecycles-compat\";\nimport { AbstractPureComponent2, Classes, DISPLAYNAME_PREFIX } from \"../../common\";\nimport { HOTKEYS_HOTKEY_CHILDREN } from \"../../common/errors\";\nimport { isElementOfType, isReactChildrenElementOrElements } from \"../../common/utils\";\nimport { H4 } from \"../html/html\";\nimport { Hotkey, IHotkeyProps } from \"./hotkey\";\nimport { IHotkeysProps } from \"./hotkeysTypes\";\n\n@polyfill\nexport class Hotkeys extends AbstractPureComponent2<IHotkeysProps> {\n    public static displayName = `${DISPLAYNAME_PREFIX}.Hotkeys`;\n\n    public static defaultProps = {\n        tabIndex: 0,\n    };\n\n    public render() {\n        if (!isReactChildrenElementOrElements(this.props.children)) {\n            return null;\n        }\n\n        const hotkeys = React.Children.map(\n            this.props.children,\n            (child: React.ReactElement<IHotkeyProps>) => child.props,\n        );\n\n        // sort by group label alphabetically, prioritize globals\n        hotkeys.sort((a, b) => {\n            if (a.global === b.global && a.group && b.group) {\n                return a.group.localeCompare(b.group);\n            }\n            return a.global ? -1 : 1;\n        });\n\n        let lastGroup: string | undefined;\n        const elems = [] as JSX.Element[];\n        for (const hotkey of hotkeys) {\n            const groupLabel = hotkey.group;\n            if (groupLabel !== lastGroup) {\n                elems.push(<H4 key={`group-${elems.length}`}>{groupLabel}</H4>);\n                lastGroup = groupLabel;\n            }\n            elems.push(<Hotkey key={elems.length} {...hotkey} />);\n        }\n        const rootClasses = classNames(Classes.HOTKEY_COLUMN, this.props.className);\n        return <div className={rootClasses}>{elems}</div>;\n    }\n\n    protected validateProps(props: IHotkeysProps & { children: React.ReactNode }) {\n        if (!isReactChildrenElementOrElements(props.children)) {\n            return;\n        }\n\n        React.Children.forEach(props.children, (child: JSX.Element) => {\n            if (!isElementOfType(child, Hotkey)) {\n                throw new Error(HOTKEYS_HOTKEY_CHILDREN);\n            }\n        });\n    }\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport { Classes } from \"../../common\";\nimport { Dialog, IDialogProps } from \"../../components\";\nimport { Hotkey, IHotkeyProps } from \"./hotkey\";\nimport { Hotkeys } from \"./hotkeys\";\n\nexport interface IHotkeysDialogProps extends IDialogProps {\n    /**\n     * This string displayed as the group name in the hotkeys dialog for all\n     * global hotkeys.\n     */\n    globalHotkeysGroup?: string;\n}\n\n/**\n * The delay before showing or hiding the dialog. Should be long enough to\n * allow all registered hotkey listeners to execute first.\n */\nconst DELAY_IN_MS = 10;\n\nclass HotkeysDialog {\n    public componentProps = ({\n        globalHotkeysGroup: \"Global hotkeys\",\n    } as any) as IHotkeysDialogProps;\n\n    private container: HTMLElement | null = null;\n    private hotkeysQueue = [] as IHotkeyProps[][];\n    private isDialogShowing = false;\n    private showTimeoutToken?: number;\n    private hideTimeoutToken?: number;\n\n    public render() {\n        if (this.container == null) {\n            this.container = this.getContainer();\n        }\n        ReactDOM.render(this.renderComponent(), this.container);\n    }\n\n    public unmount() {\n        if (this.container != null) {\n            ReactDOM.unmountComponentAtNode(this.container);\n            this.container.remove();\n            this.container = null;\n        }\n    }\n\n    /**\n     * Because hotkeys can be registered globally and locally and because\n     * event ordering cannot be guaranteed, we use this debouncing method to\n     * allow all hotkey listeners to fire and add their hotkeys to the dialog.\n     *\n     * 10msec after the last listener adds their hotkeys, we render the dialog\n     * and clear the queue.\n     */\n    public enqueueHotkeysForDisplay(hotkeys: IHotkeyProps[]) {\n        this.hotkeysQueue.push(hotkeys);\n\n        // reset timeout for debounce\n        window.clearTimeout(this.showTimeoutToken);\n        this.showTimeoutToken = window.setTimeout(this.show, DELAY_IN_MS);\n    }\n\n    public hideAfterDelay() {\n        window.clearTimeout(this.hideTimeoutToken);\n        this.hideTimeoutToken = window.setTimeout(this.hide, DELAY_IN_MS);\n    }\n\n    public show = () => {\n        this.isDialogShowing = true;\n        this.render();\n    };\n\n    public hide = () => {\n        this.isDialogShowing = false;\n        this.render();\n    };\n\n    public isShowing() {\n        return this.isDialogShowing;\n    }\n\n    private getContainer() {\n        if (this.container == null) {\n            this.container = document.createElement(\"div\");\n            this.container.classList.add(Classes.PORTAL);\n            document.body.appendChild(this.container);\n        }\n        return this.container;\n    }\n\n    private renderComponent() {\n        return (\n            <Dialog\n                {...this.componentProps}\n                className={classNames(Classes.HOTKEY_DIALOG, this.componentProps.className)}\n                isOpen={this.isDialogShowing}\n                onClose={this.hide}\n            >\n                <div className={Classes.DIALOG_BODY}>{this.renderHotkeys()}</div>\n            </Dialog>\n        );\n    }\n\n    private renderHotkeys() {\n        const hotkeys = this.emptyHotkeyQueue();\n        const elements = hotkeys.map((hotkey, index) => {\n            const group =\n                hotkey.global === true && hotkey.group == null ? this.componentProps.globalHotkeysGroup : hotkey.group;\n\n            return <Hotkey key={index} {...hotkey} group={group} />;\n        });\n\n        return <Hotkeys>{elements}</Hotkeys>;\n    }\n\n    private emptyHotkeyQueue() {\n        // flatten then empty the hotkeys queue\n        const hotkeys = this.hotkeysQueue.reduce((arr, queued) => arr.concat(queued), []);\n        this.hotkeysQueue.length = 0;\n        return hotkeys;\n    }\n}\n\n// singleton instance\nconst HOTKEYS_DIALOG = new HotkeysDialog();\n\nexport function isHotkeysDialogShowing() {\n    return HOTKEYS_DIALOG.isShowing();\n}\n\nexport function setHotkeysDialogProps(props: Partial<IHotkeysDialogProps>) {\n    for (const key in props) {\n        if (props.hasOwnProperty(key)) {\n            (HOTKEYS_DIALOG.componentProps as any)[key] = (props as any)[key];\n        }\n    }\n}\n\nexport function showHotkeysDialog(hotkeys: IHotkeyProps[]) {\n    HOTKEYS_DIALOG.enqueueHotkeysForDisplay(hotkeys);\n}\n\nexport function hideHotkeysDialog() {\n    HOTKEYS_DIALOG.hide();\n}\n\n/**\n * Use this function instead of `hideHotkeysDialog` if you need to ensure that all hotkey listeners\n * have time to execute with the dialog in a consistent open state. This can avoid flickering the\n * dialog between open and closedstates as successive listeners fire.\n */\nexport function hideHotkeysDialogAfterDelay() {\n    HOTKEYS_DIALOG.hideAfterDelay();\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Children, ReactNode } from \"react\";\nimport { isElementOfType } from \"../../common/utils\";\n\nimport { Hotkey, IHotkeyProps } from \"./hotkey\";\nimport { comboMatches, getKeyCombo, IKeyCombo, parseKeyCombo } from \"./hotkeyParser\";\nimport { hideHotkeysDialogAfterDelay, isHotkeysDialogShowing, showHotkeysDialog } from \"./hotkeysDialog\";\nimport { IHotkeysProps } from \"./hotkeysTypes\";\n\nconst SHOW_DIALOG_KEY = \"?\";\n\nexport enum HotkeyScope {\n    LOCAL = \"local\",\n    GLOBAL = \"global\",\n}\n\nexport interface IHotkeyAction {\n    combo: IKeyCombo;\n    props: IHotkeyProps;\n}\n\nexport class HotkeysEvents {\n    private actions = [] as IHotkeyAction[];\n\n    public constructor(private scope: HotkeyScope) {}\n\n    public count() {\n        return this.actions.length;\n    }\n\n    public clear() {\n        this.actions = [];\n    }\n\n    public setHotkeys(props: IHotkeysProps & { children?: ReactNode }) {\n        const actions = [] as IHotkeyAction[];\n        Children.forEach(props.children, (child: ReactNode) => {\n            if (isElementOfType(child, Hotkey) && this.isScope(child.props)) {\n                actions.push({\n                    combo: parseKeyCombo(child.props.combo),\n                    props: child.props,\n                });\n            }\n        });\n        this.actions = actions;\n    }\n\n    public handleKeyDown = (e: KeyboardEvent) => {\n        const combo = getKeyCombo(e);\n        const isTextInput = this.isTextInput(e);\n\n        if (!isTextInput && comboMatches(parseKeyCombo(SHOW_DIALOG_KEY), combo)) {\n            if (isHotkeysDialogShowing()) {\n                hideHotkeysDialogAfterDelay();\n            } else {\n                showHotkeysDialog(this.actions.map(action => action.props));\n            }\n            return;\n        } else if (isHotkeysDialogShowing()) {\n            return;\n        }\n\n        this.invokeNamedCallbackIfComboRecognized(combo, \"onKeyDown\", e);\n    };\n\n    public handleKeyUp = (e: KeyboardEvent) => {\n        if (isHotkeysDialogShowing()) {\n            return;\n        }\n        this.invokeNamedCallbackIfComboRecognized(getKeyCombo(e), \"onKeyUp\", e);\n    };\n\n    private invokeNamedCallbackIfComboRecognized(\n        combo: IKeyCombo,\n        callbackName: \"onKeyDown\" | \"onKeyUp\",\n        e: KeyboardEvent,\n    ) {\n        const isTextInput = this.isTextInput(e);\n        for (const action of this.actions) {\n            const shouldIgnore = (isTextInput && !action.props.allowInInput) || action.props.disabled;\n            if (!shouldIgnore && comboMatches(action.combo, combo)) {\n                if (action.props.preventDefault) {\n                    e.preventDefault();\n                }\n                if (action.props.stopPropagation) {\n                    // set a flag just for unit testing. not meant to be referenced in feature work.\n                    (e as any).isPropagationStopped = true;\n                    e.stopPropagation();\n                }\n                action.props[callbackName]?.(e);\n            }\n        }\n    }\n\n    private isScope(props: IHotkeyProps) {\n        return (props.global ? HotkeyScope.GLOBAL : HotkeyScope.LOCAL) === this.scope;\n    }\n\n    private isTextInput(e: KeyboardEvent) {\n        const elem = e.target as HTMLElement;\n        // we check these cases for unit testing, but this should not happen\n        // during normal operation\n        if (elem == null || elem.closest == null) {\n            return false;\n        }\n\n        const editable = elem.closest(\"input, textarea, [contenteditable=true]\");\n\n        if (editable == null) {\n            return false;\n        }\n\n        // don't let checkboxes, switches, and radio buttons prevent hotkey behavior\n        if (editable.tagName.toLowerCase() === \"input\") {\n            const inputType = (editable as HTMLInputElement).type;\n            if (inputType === \"checkbox\" || inputType === \"radio\") {\n                return false;\n            }\n        }\n\n        // don't let read-only fields prevent hotkey behavior\n        if ((editable as HTMLInputElement).readOnly) {\n            return false;\n        }\n\n        return true;\n    }\n}\n","/*\n * Copyright 2016 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as React from \"react\";\n\nimport { IConstructor } from \"../../common/constructor\";\nimport { HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT, HOTKEYS_WARN_DECORATOR_NO_METHOD } from \"../../common/errors\";\nimport { getDisplayName, isFunction } from \"../../common/utils\";\nimport { HotkeyScope, HotkeysEvents } from \"./hotkeysEvents\";\nimport { IHotkeysProps } from \"./hotkeysTypes\";\n\nexport interface IHotkeysTargetComponent extends React.Component {\n    /** Components decorated with the `@HotkeysTarget` decorator must implement React's component `render` function. */\n    render(): React.ReactElement<any> | null | undefined;\n\n    /**\n     * Components decorated with the `@HotkeysTarget` decorator must implement\n     * this method, and it must return a `Hotkeys` React element.\n     */\n    renderHotkeys(): React.ReactElement<IHotkeysProps>;\n}\n\nexport function HotkeysTarget<T extends IConstructor<IHotkeysTargetComponent>>(WrappedComponent: T) {\n    if (!isFunction(WrappedComponent.prototype.renderHotkeys)) {\n        console.warn(HOTKEYS_WARN_DECORATOR_NO_METHOD);\n    }\n\n    return class HotkeysTargetClass extends WrappedComponent {\n        public static displayName = `HotkeysTarget(${getDisplayName(WrappedComponent)})`;\n\n        /** @internal */\n        public globalHotkeysEvents: HotkeysEvents = new HotkeysEvents(HotkeyScope.GLOBAL);\n\n        /** @internal */\n        public localHotkeysEvents: HotkeysEvents = new HotkeysEvents(HotkeyScope.LOCAL);\n\n        public componentDidMount() {\n            if (super.componentDidMount != null) {\n                super.componentDidMount();\n            }\n\n            // attach global key event listeners\n            document.addEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n            document.addEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n        }\n\n        public componentWillUnmount() {\n            super.componentWillUnmount?.();\n            document.removeEventListener(\"keydown\", this.globalHotkeysEvents.handleKeyDown);\n            document.removeEventListener(\"keyup\", this.globalHotkeysEvents.handleKeyUp);\n\n            this.globalHotkeysEvents.clear();\n            this.localHotkeysEvents.clear();\n        }\n\n        public render() {\n            const element = super.render() as JSX.Element;\n\n            if (element == null) {\n                // always return `element` in case caller is distinguishing between `null` and `undefined`\n                return element;\n            }\n\n            if (!React.isValidElement<any>(element)) {\n                console.warn(HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT);\n                return element;\n            }\n\n            if (isFunction(this.renderHotkeys)) {\n                const hotkeys = this.renderHotkeys();\n                if (this.localHotkeysEvents) {\n                    this.localHotkeysEvents.setHotkeys(hotkeys.props);\n                }\n                if (this.globalHotkeysEvents) {\n                    this.globalHotkeysEvents.setHotkeys(hotkeys.props);\n                }\n\n                if (this.localHotkeysEvents.count() > 0) {\n                    const tabIndex = hotkeys.props.tabIndex === undefined ? 0 : hotkeys.props.tabIndex;\n\n                    const { onKeyDown: existingKeyDown, onKeyUp: existingKeyUp } = element.props;\n\n                    const handleKeyDownWrapper = (e: React.KeyboardEvent<HTMLElement>) => {\n                        this.localHotkeysEvents.handleKeyDown(e.nativeEvent as KeyboardEvent);\n                        existingKeyDown?.(e);\n                    };\n\n                    const handleKeyUpWrapper = (e: React.KeyboardEvent<HTMLElement>) => {\n                        this.localHotkeysEvents.handleKeyUp(e.nativeEvent as KeyboardEvent);\n                        existingKeyUp?.(e);\n                    };\n                    return React.cloneElement(element, {\n                        onKeyDown: handleKeyDownWrapper,\n                        onKeyUp: handleKeyUpWrapper,\n                        tabIndex,\n                    });\n                }\n            }\n            return element;\n        }\n    };\n}\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\n\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper}\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version.js');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","'use strict';\n\nvar events = require('events');\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, events.EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function() {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function(parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute] ?\n      [valueAsString] :\n      refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(refinementList, attribute, value) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function(v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function(v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(refinementList, attribute, value) {\n    if (value === undefined) throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(refinementList, attribute, refinementType) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function(memo, key) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function(value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n        memo[key] = facetList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean}\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements = !!refinementList[attribute] &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  }\n};\n\nmodule.exports = lib;\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar intersection = require('../functions/intersection');\nvar find = require('../functions/find');\nvar valToNumber = require('../functions/valToNumber');\nvar omit = require('../functions/omit');\nvar objectHasKeys = require('../functions/objectHasKeys');\nvar isValidUserToken = require('../utils/isValidUserToken');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function(el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function(currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters ? SearchParameters._parseNumbers(newParameters) : {};\n\n  if (params.userToken !== undefined && !isValidUserToken(params.userToken)) {\n    console.warn('[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\\n  - Format: [a-zA-Z0-9_-]{1,64}');\n  }\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements = params.hierarchicalFacetsRefinements || {};\n\n  var self = this;\n  Object.keys(params).forEach(function(paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function(partialState) {\n  // Do not reparse numbers in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity'\n  ];\n\n  numberKeys.forEach(function(k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function(geoRect) {\n      if (Array.isArray(geoRect)) {\n        return geoRect.map(function(value) {\n          return parseFloat(value);\n        });\n      }\n      return geoRect;\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function(attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function(v) {\n          if (Array.isArray(v)) {\n            return v.map(function(vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function(facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (currentRefinement.length > 0 && currentRefinement[0].indexOf(facet.rootPath) !== 0) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(facet.name, facet.rootPath);\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function(currentState, parameters) {\n  var params = parameters || {};\n\n  if (currentState.tagFilters && params.tagRefinements && params.tagRefinements.length > 0) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n      'an error, if it is really what you want, you should first clear the tags with clearTags method.');\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n      'an error, if it is not, you should first clear the tags with clearTags method.');\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n      ' is probably an error, if this is really what you want, you have to first' +\n      ' clear the numeric filters.');\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters}\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      )\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements === this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters}\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0) return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: []\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters}\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters}\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters}\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters}\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters}\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters}\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters}\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters}\n   * @example\n   * // for price = 50 or 40\n   * searchparameter.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * searchparameter.addNumericRefinement('size', '=', 38);\n   * searchparameter.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function(attribute, operator, v) {\n    var value = valToNumber(v);\n\n    if (this.isNumericRefined(attribute, operator, value)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(value);\n    } else {\n      mod[attribute][operator] = [value];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function(facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function(facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function(facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters}\n   */\n  removeNumericRefinement: function(attribute, operator, paramValue) {\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        })\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function(value, key) {\n          return key === attribute && value.op === operator;\n        })\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function(value, key) {\n        return key === attribute;\n      })\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList} list of refinements\n   */\n  getNumericRefinements: function(facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function(attribute, operator) {\n    return this.numericRefinements[attribute] && this.numericRefinements[attribute][operator];\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>}\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(function(memo, key) {\n        var operators = numericRefinements[key];\n        var operatorList = {};\n\n        operators = operators || {};\n        Object.keys(operators).forEach(function(operator) {\n          var values = operators[operator] || [];\n          var outValues = [];\n          values.forEach(function(value) {\n            var predicateResult = attribute({val: value, op: operator}, key, 'numeric');\n            if (!predicateResult) outValues.push(value);\n          });\n          if (outValues.length !== values.length) {\n            hasChanged = true;\n          }\n          operatorList[operator] = outValues;\n        });\n\n        memo[key] = operatorList;\n\n        return memo;\n      }, {});\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters}\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet])\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet])\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters}\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' + hierarchicalFacet.name + '`');\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet])\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters}\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    if (RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters}\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag)\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters}\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function(f) {\n        return f !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters}\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function(f) {\n        return f.name !== facet;\n      })\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters}\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value)) return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters}\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n    if (!RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)) return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters}\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function(t) {\n        return t !== tag;\n      })\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters}\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error('Cannot refine the undeclared facet ' + facet +\n      '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets');\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(this.facetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(facet + ' is not defined in the facets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(this.facetsExcludes, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the disjunctiveFacets attribute of the helper configuration');\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements, facet, value)\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters}\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration');\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(facet));\n\n    var mod = {};\n\n    var upOneOrMultipleLevel = this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 && (\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0] === value ||\n      // remove a parent refinement of the current refinement:\n      //  - refinement was 'beer > IPA > Flying dog'\n      //  - call is toggleRefine('beer > IPA')\n      //  - refinement should be `beer`\n      this.hierarchicalFacetsRefinements[facet][0].indexOf(value + separator) === 0\n    );\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function(facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(facet + ' is not defined in the hierarchicalFacets attribute of the helper configuration.');\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function(facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure({}, mod, this.hierarchicalFacetsRefinements)\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters}\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isDisjunctiveFacet: function(facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean}\n   */\n  isHierarchicalFacet: function(facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean}\n   */\n  isConjunctiveFacet: function(facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean}\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(facet, value) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return !!this.numericRefinements[attribute];\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean}\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function(facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements).filter(function(facet) {\n      return self.disjunctiveFacetsRefinements[facet].length > 0;\n    })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets());\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]}\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function(facet) { return facet.name; }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function(facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    );\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]}\n   */\n  getUnrefinedDisjunctiveFacets: function() {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function(f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n\n    'facets',\n    'disjunctiveFacets',\n    'facetsRefinements',\n    'hierarchicalFacets',\n    'facetsExcludes',\n\n    'disjunctiveFacetsRefinements',\n    'numericRefinements',\n    'tagRefinements',\n    'hierarchicalFacetsRefinements'\n  ],\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    var self = this;\n    Object.keys(this).forEach(function(paramName) {\n      var paramValue = self[paramName];\n      if (managedParameters.indexOf(paramName) === -1 && paramValue !== undefined) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function(acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(\n      function(previous, key) {\n        var isPreviousValueDefined = previous[key] !== undefined;\n        var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n        if (isPreviousValueDefined && !isNextValueDefined) {\n          return omit(previous, [key]);\n        }\n\n        if (isNextValueDefined) {\n          previous[key] = nextWithNumbers[key];\n        }\n\n        return previous;\n      },\n      previousPlainObject\n    );\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function() {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function(hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function(hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function(hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function(hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function(hierarchicalFacetName) {\n    return find(\n      this.hierarchicalFacets,\n      function(f) {\n        return f.name === hierarchicalFacetName;\n      }\n    );\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function(facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function(part) {\n      return part.trim();\n    });\n  },\n\n  toString: function() {\n    return JSON.stringify(this, null, 2);\n  }\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar orderBy = require('../functions/orderBy');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator = state._getHierarchicalFacetSeparator(\n      hierarchicalFacet\n    );\n    var hierarchicalRootPath = state._getHierarchicalRootPath(\n      hierarchicalFacet\n    );\n    var hierarchicalShowParentLevel = state._getHierarchicalShowParentLevel(\n      hierarchicalFacet\n    );\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function(facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      exhaustive: rootExhaustive,\n      data: null\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function(subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bires'],\n      //       level1: ['beers > IPA', 'bires > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bires > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function(facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function(tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function(tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            currentRefinement,\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null\n  };\n}\n","'use strict';\n\nvar merge = require('../functions/merge');\nvar defaultsPure = require('../functions/defaultsPure');\nvar orderBy = require('../functions/orderBy');\nvar compact = require('../functions/compact');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * @param {string[]} attributes\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function(val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets\n * @param {string} hierarchicalAttributeName\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(hierarchicalFacets, function facetKeyMatchesAttribute(\n    hierarchicalFacet\n  ) {\n    var facetNames = hierarchicalFacet.attributes || [];\n    return facetNames.indexOf(hierarchicalAttributeName) > -1;\n  });\n}\n\n/*eslint-disable */\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devid=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex\": 202,\n            \"Insignia\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\n/*eslint-enable */\nfunction SearchResults(state, results) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  var self = this;\n\n  // https://www.algolia.com/doc/api-reference/api-methods/search/#response\n  Object.keys(mainSubResponse).forEach(function(key) {\n    self[key] = mainSubResponse[key];\n  });\n\n  /**\n   * query used to generate the results\n   * @name query\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @name parsedQuery\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   *  - `value` : the value of the facet highlighted (html)\n   *  - `matchLevel`: full, partial or none depending on how the query terms match\n   * @name hits\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * index where the results come from\n   * @name index\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * number of hits per page requested\n   * @name hitsPerPage\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of hits of this query on the index\n   * @name nbHits\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @name nbPages\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * current page\n   * @name page\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The position if the position was guessed by IP.\n   * @name aroundLatLng\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"48.8637,2.3615\",\n   */\n  /**\n   * The radius computed by Algolia.\n   * @name automaticRadius\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"126792922\",\n   */\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @name serverUsed\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"c7-use-2.algolia.net\",\n   */\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @name timeoutCounts\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @name timeoutHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the counts of the facets is exhaustive\n   * @name exhaustiveFacetsCount\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the number of hits is exhaustive\n   * @name exhaustiveNbHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @name userData\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @name queryID\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n\n  /**\n   * sum of the processing time of all the queries\n   * @member {number}\n   */\n  this.processingTimeMS = results.reduce(function(sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(function initFutureTree() {\n    return [];\n  });\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function(facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], mainSubResponse.facets_stats, facetKey);\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.facets[position], mainSubResponse.facets_stats, facetKey);\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function(disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function(f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n          return f.attribute === dfacet;\n        });\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest = mainSubResponse.facets && mainSubResponse.facets[dfacet] || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount\n        };\n        assignFacetStats(self.disjunctiveFacets[position], result.facets_stats, dfacet);\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function(refinementValue) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (!self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(refinementValue) > -1) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some root level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (currentRefinement.length === 0 || currentRefinement[0].split(separator).length < 2) {\n      return;\n    }\n\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets\n      ? result.facets\n      : {};\n    Object.keys(facets).forEach(function(dfacet) {\n      var facetResults = facets[dfacet];\n      var position = findIndex(state.hierarchicalFacets, function(f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      var attributeIndex = findIndex(self.hierarchicalFacets[position], function(f) {\n        return f.attribute === dfacet;\n      });\n\n      // previous refinements and no results so not able to find it\n      if (attributeIndex === -1) {\n        return;\n      }\n\n      // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n      // then the disjunctive values will be `beers` (count: 100),\n      // but we do not want to display\n      //   | beers (100)\n      //     > IPA (5)\n      // We want\n      //   | beers (5)\n      //     > IPA (5)\n      var defaultData = {};\n\n      if (currentRefinement.length > 0) {\n        var root = currentRefinement[0].split(separator)[0];\n        defaultData[root] = self.hierarchicalFacets[position][attributeIndex].data[root];\n      }\n\n      self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n        defaultData,\n        facetResults,\n        self.hierarchicalFacets[position][attributeIndex].data\n      );\n    });\n\n    nextDisjunctiveResult++;\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function(facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainSubResponse.facets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount\n    };\n    excludes.forEach(function(facetValue) {\n      self.facets[position] = self.facets[position] || {name: facetName};\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(generateHierarchicalTree(state));\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function(name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate);\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function(name) {\n      return {\n        name: name,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, name),\n        isExcluded: results._state.isExcludeRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function(name) {\n      return {\n        name: name,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, name)\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    return find(results.hierarchicalFacets, predicate);\n  }\n}\n\n/**\n * Sort nodes of a hierarchical or disjunctive facet results\n * @private\n * @param {function} sortFn\n * @param {HierarchicalFacet|Array} node node upon which we want to apply the sort\n * @param {string[]} names attribute names\n * @param {number} [level=0] current index in the names array\n */\nfunction recSort(sortFn, node, names, level) {\n  level = level || 0;\n\n  if (Array.isArray(node)) {\n    return sortFn(node, names[level]);\n  }\n\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function(childNode) {\n    return recSort(sortFn, childNode, names, level + 1);\n  });\n  var sortedChildren = sortFn(children, names[level]);\n  var newNode = defaultsPure({data: sortedChildren}, node);\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * @typedef FacetOrdering\n * @type {Object}\n * @property {string[]} [order]\n * @property {'count' | 'alpha' | 'hidden'} [sortRemainingBy]\n */\n\n/**\n * Sorts facet arrays via their facet ordering\n * @param {Array} facetValues the values\n * @param {FacetOrdering} facetOrdering the ordering\n * @returns {Array}\n */\nfunction sortViaFacetOrdering(facetValues, facetOrdering) {\n  var orderedFacets = [];\n  var remainingFacets = [];\n\n  var order = facetOrdering.order || [];\n  /**\n   * an object with the keys being the values in order, the values their index:\n   * ['one', 'two'] -> { one: 0, two: 1 }\n   */\n  var reverseOrder = order.reduce(function(acc, name, i) {\n    acc[name] = i;\n    return acc;\n  }, {});\n\n  facetValues.forEach(function(item) {\n    // hierarchical facets get sorted using their raw name\n    var name = item.path || item.name;\n    if (reverseOrder[name] !== undefined) {\n      orderedFacets[reverseOrder[name]] = item;\n    } else {\n      remainingFacets.push(item);\n    }\n  });\n\n  orderedFacets = orderedFacets.filter(function(facet) {\n    return facet;\n  });\n\n  var sortRemainingBy = facetOrdering.sortRemainingBy;\n  var ordering;\n  if (sortRemainingBy === 'hidden') {\n    return orderedFacets;\n  } else if (sortRemainingBy === 'alpha') {\n    ordering = [['path', 'name'], ['asc', 'asc']];\n  } else {\n    ordering = [['count'], ['desc']];\n  }\n\n  return orderedFacets.concat(\n    orderBy(remainingFacets, ordering[0], ordering[1])\n  );\n}\n\n/**\n * @param {SearchResults} results the search results class\n * @param {string} attribute the attribute to retrieve ordering of\n * @returns {FacetOrdering=}\n */\nfunction getFacetOrdering(results, attribute) {\n  return (\n    results.renderingContent &&\n    results.renderingContent.facetOrdering &&\n    results.renderingContent.facetOrdering.values &&\n    results.renderingContent.facetOrdering.values[attribute]\n  );\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {boolean} [opts.facetOrdering]\n * Force the use of facetOrdering from the result if a sortBy is present. If\n * sortBy isn't present, facetOrdering will be used automatically.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function(attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {\n    sortBy: SearchResults.DEFAULT_SORT,\n    // if no sortBy is given, attempt to sort based on facetOrdering\n    // if it is given, we still allow to sort via facet ordering first\n    facetOrdering: !(opts && opts.sortBy)\n  });\n\n  var results = this;\n  var attributes;\n  if (Array.isArray(facetValues)) {\n    attributes = [attribute];\n  } else {\n    var config = results._state.getHierarchicalFacetByName(facetValues.name);\n    attributes = config.attributes;\n  }\n\n  return recSort(function(data, facetName) {\n    if (options.facetOrdering) {\n      var facetOrdering = getFacetOrdering(results, facetName);\n      if (Boolean(facetOrdering)) {\n        return sortViaFacetOrdering(data, facetOrdering);\n      }\n    }\n\n    if (Array.isArray(options.sortBy)) {\n      var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n      return orderBy(data, order[0], order[1]);\n    } else if (typeof options.sortBy === 'function') {\n      return vanillaSortFn(options.sortBy, data);\n    }\n    throw new Error(\n      'options.sortBy is optional but if defined it must be ' +\n        'either an array of string (predicates) or a sorting function'\n    );\n  }, facetValues, attributes);\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function(attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function(facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function() {\n  var state = this._state;\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function(attributeName) {\n    state.facetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'facet', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function(attributeName) {\n    state.facetsExcludes[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'exclude', attributeName, name, results.facets));\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function(attributeName) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getRefinement(state, 'disjunctive', attributeName, name, results.disjunctiveFacets));\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function(attributeName) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function(name) {\n      res.push(getHierarchicalRefinement(state, attributeName, name, results.hierarchicalFacets));\n    });\n  });\n\n\n  Object.keys(state.numericRefinements).forEach(function(attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function(operator) {\n      operators[operator].forEach(function(value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function(name) {\n    res.push({type: 'tag', attributeName: '_tags', name: name});\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {*} state\n * @param {*} type\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function(f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\n/**\n * @param {*} state\n * @param {string} attributeName\n * @param {*} name\n * @param {Facet[]} resultsFacets\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function(facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function(intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet && find(intermediateFacet.data, function(f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar DerivedHelper = require('./DerivedHelper');\nvar requestBuilder = require('./requestBuilder');\n\nvar events = require('events');\nvar inherits = require('./functions/inherits');\nvar objectHasKeys = require('./functions/objectHasKeys');\nvar omit = require('./functions/omit');\nvar merge = require('./functions/merge');\n\nvar version = require('./version');\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, events.EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper}\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function() {\n  this._search({onlyWithDerivedHelpers: false});\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function() {\n  this._search({onlyWithDerivedHelpers: true});\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function() {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [callback] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function(options, cb) {\n  var tempState = !options ? this.state : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function(content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function(err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(function(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    return {\n      content: new SearchResults(tempState, content.results),\n      state: tempState,\n      _originalResponse: content\n    };\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n /**\n * Start the search for answers with the parameters set in the state.\n * This method returns a promise.\n * @param {Object} options - the options for answers API call\n * @param {string[]} options.attributesForPrediction - Attributes to use for predictions. If empty, `searchableAttributes` is used instead.\n * @param {string[]} options.queryLanguages - The languages in the query. Currently only supports ['en'].\n * @param {number} options.nbHits - Maximum number of answers to retrieve from the Answers Engine. Cannot be greater than 1000.\n *\n * @return {promise} the answer results\n */\nAlgoliaSearchHelper.prototype.findAnswers = function(options) {\n  var state = this.state;\n  var derivedHelper = this.derivedHelpers[0];\n  if (!derivedHelper) {\n    return Promise.resolve([]);\n  }\n  var derivedState = derivedHelper.getModifiedState(state);\n  var data = merge(\n    {\n      attributesForPrediction: options.attributesForPrediction,\n      nbHits: options.nbHits\n    },\n    {\n      params: omit(requestBuilder._getHitsSearchParams(derivedState), [\n        'attributesToSnippet',\n        'hitsPerPage',\n        'restrictSearchableAttributes',\n        'snippetEllipsisText' // FIXME remove this line once the engine is fixed.\n      ])\n    }\n  );\n\n  var errorMessage = 'search for answers was called, but this client does not have a function client.initIndex(index).findAnswers';\n  if (typeof this.client.initIndex !== 'function') {\n    throw new Error(errorMessage);\n  }\n  var index = this.client.initIndex(derivedState.index);\n  if (typeof index.findAnswers !== 'function') {\n    throw new Error(errorMessage);\n  }\n  return index.findAnswers(derivedState.query, options.queryLanguages, data);\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function(facet, query, maxFacetHits, userState) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  if (\n    !clientHasSFFV &&\n    typeof this.client.initIndex !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(facet, query, maxFacetHits, state);\n\n  this._currentNbQueries++;\n  var self = this;\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query\n  });\n\n  var searchForFacetValuesPromise = clientHasSFFV\n    ? this.client.searchForFacetValues([{indexName: state.index, params: algoliaQuery}])\n    : this.client.initIndex(state.index).searchForFacetValues(algoliaQuery);\n\n  return searchForFacetValuesPromise.then(function addIsRefined(content) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n    content = Array.isArray(content) ? content[0] : content;\n\n    content.facetHits.forEach(function(f) {\n      f.isRefined = isDisjunctive\n        ? state.isDisjunctiveFacetRefined(facet, f.value)\n        : state.isFacetRefined(facet, f.value);\n    });\n\n    return content;\n  }, function(e) {\n    self._currentNbQueries--;\n    if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n    throw e;\n  });\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function(q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function(name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function() {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function() {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().addNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function() {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function() {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function(attribute, operator, value) {\n  this._change({\n    state: this.state.resetPage().removeNumericRefinement(attribute, operator, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function() {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper}\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function(facet) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function() {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function() {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function() {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function(facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper}\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function(facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function() {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function(tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper}\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function() {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function(name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function(parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function(newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper}\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent = function(newState) {\n  this.state = new SearchParameters(newState);\n  return this;\n};\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function(attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function(facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function(facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype.hasTag = function(tag) {\n  return this.state.isTagRefined(tag);\n};\n\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function() {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n\n/**\n * Get the name of the currently used index.\n * @return {string}\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function() {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function() {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function(facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive'\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'exclude'\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjRefinements = this.state.getDisjunctiveRefinements(facetName);\n\n    disjRefinements.forEach(function(r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive'\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function(operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric'\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function(attribute, operator) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function(facetName) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @return {undefined}\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function(options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function(derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = requestBuilder._getQueries(derivedState.index, derivedState);\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n  var queryId = this._queryId++;\n\n  this._currentNbQueries++;\n\n  try {\n    this.client.search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error\n    });\n  }\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>}\n *  state state used for to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function(states, queryId, content) {\n  // FIXME remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= (queryId - this._lastQueryIdReceived);\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function(s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    var formattedResponse = helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: formattedResponse,\n      state: state\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function(queryId, error) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function(query, facetFilters, numericFilters, tagFilters) {\n  return query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0;\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean}\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function(facet) {\n  return this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0;\n};\n\nAlgoliaSearchHelper.prototype._change = function(event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.clearCache = function() {\n  this.client.clearCache && this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper}\n */\nAlgoliaSearchHelper.prototype.setClient = function(newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch}\n */\nAlgoliaSearchHelper.prototype.getClient = function() {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper}\n */\nAlgoliaSearchHelper.prototype.derive = function(fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @return {undefined}\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function(derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function() {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\n// it also preserve keys order\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n\n  return sources.reduceRight(function(acc, source) {\n    Object.keys(Object(source)).forEach(function(key) {\n      if (source[key] === undefined) {\n        return;\n      }\n      if (acc[key] !== undefined) {\n        // remove if already added, so that we can add it in correct order\n        delete acc[key];\n      }\n      acc[key] = source[key];\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n};\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function(sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(defaultInstructions, function(\n        defaultInstruction\n      ) {\n        return defaultInstruction[0] === sortInstruction[0];\n      });\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function(value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  for (var key in source) {\n    if (\n      !Object.prototype.hasOwnProperty.call(source, key) ||\n      key === '__proto__'\n    ) {\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      continue;\n    }\n\n    if (\n      isObjectOrArrayOrFunction(targetVal) &&\n      isObjectOrArrayOrFunction(sourceVal)\n    ) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\n\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function(value, index) {\n    return {\n      criteria: iteratees.map(function(iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function(res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error('The value should be a number, a parsable string or an array of those.');\n}\n\nmodule.exports = valToNumber;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state)\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function(refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet)\n      });\n    });\n\n    // maybe more to get the root level of hierarchical facets when activated\n    state.getRefinedHierarchicalFacets().forEach(function(refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      // if we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get the root values\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      if (currentRefinement.length > 0 && currentRefinement[0].split(separator).length > 1) {\n        queries.push({\n          indexName: index,\n          params: requestBuilder._getDisjunctiveFacetSearchParams(state, refinedFacet, true)\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @return {object.<string, any>}\n   */\n  _getHitsSearchParams: function(state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state));\n\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets.indexOf('*') > -1 ? ['*'] : facets,\n      tagFilters: tagFilters\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object}\n   */\n  _getDisjunctiveFacetSearchParams: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = requestBuilder._getFacetFilters(state, facet, hierarchicalRootLevel);\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 1,\n      page: 0,\n      attributesToRetrieve: [],\n      attributesToHighlight: [],\n      attributesToSnippet: [],\n      tagFilters: tagFilters,\n      analytics: false,\n      clickAnalytics: false\n    };\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets = requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n        state,\n        hierarchicalFacet,\n        hierarchicalRootLevel\n      );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return merge({}, state.getQueryParams(), additionalParams);\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function(state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function(attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function(operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function(value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function(v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending\n   * @private\n   * @return {string}\n   */\n  _getTagFilters: function(state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @return {array.<string>}\n   */\n  _getFacetFilters: function(state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements).forEach(function(facetName) {\n      var facetValues = facetsRefinements[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':' + facetValue);\n      });\n    });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes).forEach(function(facetName) {\n      var facetValues = facetsExcludes[facetName] || [];\n      facetValues.forEach(function(facetValue) {\n        facetFilters.push(facetName + ':-' + facetValue);\n      });\n    });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements).forEach(function(facetName) {\n      var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n      if (facetName === facet || !facetValues || facetValues.length === 0) {\n        return;\n      }\n      var orFilters = [];\n\n      facetValues.forEach(function(facetValue) {\n        orFilters.push(facetName + ':' + facetValue);\n      });\n\n      facetFilters.push(orFilters);\n    });\n\n    var hierarchicalFacetsRefinements = state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements).forEach(function(facetName) {\n      var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n      var facetValue = facetValues[0];\n\n      if (facetValue === undefined) {\n        return;\n      }\n\n      var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeToRefine;\n      var attributesIndex;\n\n      // we ask for parent facet values only when the `facet` is the current hierarchical facet\n      if (facet === facetName) {\n        // if we are at the root level already, no need to ask for facet values, we get them from\n        // the hits query\n        if (facetValue.indexOf(separator) === -1 || (!rootPath && hierarchicalRootLevel === true) ||\n          (rootPath && rootPath.split(separator).length === facetValue.split(separator).length)) {\n          return;\n        }\n\n        if (!rootPath) {\n          attributesIndex = facetValue.split(separator).length - 2;\n          facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n        } else {\n          attributesIndex = rootPath.split(separator).length - 1;\n          facetValue = rootPath;\n        }\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      } else {\n        attributesIndex = facetValue.split(separator).length - 1;\n\n        attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n      }\n\n      if (attributeToRefine) {\n        facetFilters.push([attributeToRefine + ':' + facetValue]);\n      }\n    });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function(state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(allAttributes, hierarchicalFacet) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      }, out);\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function(state, hierarchicalFacet, rootLevel) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement = state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function(facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName) ?\n      state.clearRefinements(facetName) :\n      state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return merge(\n      {},\n      requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n      searchForFacetSearchParameters\n    );\n  }\n};\n\nmodule.exports = requestBuilder;\n","'use strict';\n\nmodule.exports = function isValidUserToken(userToken) {\n  if (userToken === null) {\n    return false;\n  }\n  return /^[a-zA-Z0-9_-]{1,64}$/.test(userToken);\n};\n","'use strict';\n\nmodule.exports = '3.6.2';\n","/*! algoliasearch-lite.umd.js | 4.5.1 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||\"{}\")};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){var r=JSON.stringify(e),n=a()[r];return Promise.all([n||t(),void 0!==n])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]=t,n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return Object.keys(void 0!==t?t:{}).forEach((function(r){e[r]=t[r](e)})),e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function d(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var m={Read:1,Write:2,Any:3},p=1,v=2,y=3;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:m.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||m.Any}}var O=\"GET\",P=\"POST\";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(g(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===y&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function j(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,d=function t(r,a){var l=r.pop();if(void 0===l)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.\",transporterStackTrace:A(u)};var d={data:i,headers:s,method:c,url:w(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},m=function(e){var t={request:d,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSucess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=m(n);return n.isTimedOut&&h++,Promise.all([e.logger.info(\"Retryable failure\",x(o)),e.hostsCache.set(l,g(l,n.isTimedOut?y:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw m(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(d).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return d(a(e.statelessHosts).reverse(),e.getTimeout)}))}function S(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function w(e,t,r){var n=T(r),o=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(o+=\"?\".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var C=function(e){var t=e.appId,n=function(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=d(t,f.timeouts.read),n=function(){return j(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return j(f,f.hosts.filter((function(e){return 0!=(e.accept&m.Write)})),e,d(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:m.Read},{url:\"\".concat(t,\".algolia.net\"),accept:m.Write}].concat(c([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},N=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},k=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:\"1/indexes/*/queries\",data:{requests:o},cacheable:!0},n)}},J=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,[\"facetName\",\"facetQuery\"]);return N(e)(t.indexName,{methods:{searchForFacetValues:I}}).searchForFacetValues(u,i,r(r({},o),s))})))}},E=function(e){return function(t,r){return e.transporter.read({method:P,path:f(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},F=1,R=2,D=3;function W(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=D,{debug:function(e,t){return F>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return R>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.5.1\",\"-\").concat(e)}),s()]}),userAgent:S(\"4.5.1\").add({segment:\"Browser\",version:\"lite\"}),authMode:h.WithinQueryParameters};return C(r(r(r({},a),n),{},{methods:{search:k,searchForFacetValues:J,multipleQueries:k,multipleSearchForFacetValues:J,initIndex:function(e){return function(t){return N(e)(t,{methods:{search:E,searchForFacetValues:I}})}}}}))}return W.version=\"4.5.1\",W}));\n","import createConnector from '../core/createConnector';\nimport { getResults } from '../core/indexUtils';\nimport { addAbsolutePositions, addQueryID } from '../core/utils';\n/**\n * connectHits connector provides the logic to create connected\n * components that will render the results retrieved from\n * Algolia.\n *\n * To configure the number of hits retrieved, use [HitsPerPage widget](widgets/HitsPerPage.html),\n * [connectHitsPerPage connector](connectors/connectHitsPerPage.html) or pass the hitsPerPage\n * prop to a [Configure](guide/Search_parameters.html) widget.\n *\n * **Warning:** you will need to use the **objectID** property available on every hit as a key\n * when iterating over them. This will ensure you have the best possible UI experience\n * especially on slow networks.\n * @name connectHits\n * @kind connector\n * @providedPropType {array.<object>} hits - the records that matched the search state\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, Highlight, connectHits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n * const CustomHits = connectHits(({ hits }) => (\n *   <div>\n *     {hits.map(hit =>\n *       <p key={hit.objectID}>\n *         <Highlight attribute=\"name\" hit={hit} />\n *       </p>\n *     )}\n *   </div>\n * ));\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <CustomHits />\n *   </InstantSearch>\n * );\n */\n\nexport default createConnector({\n  displayName: 'AlgoliaHits',\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n\n    if (!results) {\n      return {\n        hits: []\n      };\n    }\n\n    var hitsWithPositions = addAbsolutePositions(results.hits, results.hitsPerPage, results.page);\n    var hitsWithPositionsAndQueryID = addQueryID(hitsWithPositions, results.queryID);\n    return {\n      hits: hitsWithPositionsAndQueryID\n    };\n  },\n\n  /**\n   * Hits needs to be considered as a widget to trigger a search,\n   * even if no other widgets are used.\n   *\n   * To be considered as a widget you need either:\n   * - getSearchParameters\n   * - getMetadata\n   * - transitionState\n   *\n   * See: createConnector.tsx\n   */\n  getSearchParameters: function getSearchParameters(searchParameters) {\n    return searchParameters;\n  }\n});","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport PropTypes from 'prop-types';\nimport createConnector from '../core/createConnector';\nimport { cleanUpValue, refineValue, getCurrentRefinementValue, getIndexId } from '../core/indexUtils';\n\nfunction getId() {\n  return 'query';\n}\n\nfunction getCurrentRefinement(props, searchState, context) {\n  var id = getId(props);\n  var currentRefinement = getCurrentRefinementValue(props, searchState, context, id, '');\n\n  if (currentRefinement) {\n    return currentRefinement;\n  }\n\n  return '';\n}\n\nfunction _refine(props, searchState, nextRefinement, context) {\n  var id = getId();\n\n  var nextValue = _defineProperty({}, id, nextRefinement);\n\n  var resetPage = true;\n  return refineValue(searchState, nextValue, context, resetPage);\n}\n\nfunction _cleanUp(props, searchState, context) {\n  return cleanUpValue(searchState, context, getId());\n}\n/**\n * connectSearchBox connector provides the logic to build a widget that will\n * let the user search for a query\n * @name connectSearchBox\n * @kind connector\n * @propType {string} [defaultRefinement] - Provide a default value for the query\n * @providedPropType {function} refine - a function to change the current query\n * @providedPropType {string} currentRefinement - the current query used\n * @providedPropType {boolean} isSearchStalled - a flag that indicates if InstantSearch has detected that searches are stalled\n */\n\n\nexport default createConnector({\n  displayName: 'AlgoliaSearchBox',\n  propTypes: {\n    defaultRefinement: PropTypes.string\n  },\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    return {\n      currentRefinement: getCurrentRefinement(props, searchState, {\n        ais: props.contextValue,\n        multiIndexContext: props.indexContextValue\n      }),\n      isSearchStalled: searchResults.isSearchStalled\n    };\n  },\n  refine: function refine(props, searchState, nextRefinement) {\n    return _refine(props, searchState, nextRefinement, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    return _cleanUp(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props, searchState) {\n    return searchParameters.setQuery(getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }));\n  },\n  getMetadata: function getMetadata(props, searchState) {\n    var id = getId(props);\n    var currentRefinement = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    return {\n      id: id,\n      index: getIndexId({\n        ais: props.contextValue,\n        multiIndexContext: props.indexContextValue\n      }),\n      items: currentRefinement === null ? [] : [{\n        label: \"\".concat(id, \": \").concat(currentRefinement),\n        value: function value(nextState) {\n          return _refine(props, nextState, '', {\n            ais: props.contextValue,\n            multiIndexContext: props.indexContextValue\n          });\n        },\n        currentRefinement: currentRefinement\n      }]\n    };\n  }\n});","import { createContext } from 'react';\n\nvar _createContext = createContext({\n  onInternalStateUpdate: function onInternalStateUpdate() {\n    return undefined;\n  },\n  createHrefForState: function createHrefForState() {\n    return '#';\n  },\n  onSearchForFacetValues: function onSearchForFacetValues() {\n    return undefined;\n  },\n  onSearchStateChange: function onSearchStateChange() {\n    return undefined;\n  },\n  onSearchParameters: function onSearchParameters() {\n    return undefined;\n  },\n  store: {},\n  widgetsManager: {},\n  mainTargetedIndex: ''\n}),\n    InstantSearchConsumer = _createContext.Consumer,\n    InstantSearchProvider = _createContext.Provider;\n\nexport { InstantSearchConsumer, InstantSearchProvider };\n\nvar _createContext2 = createContext(undefined),\n    IndexConsumer = _createContext2.Consumer,\n    IndexProvider = _createContext2.Provider;\n\nexport { IndexConsumer, IndexProvider };","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { shallowEqual, getDisplayName, removeEmptyKey } from './utils';\nimport { InstantSearchConsumer, IndexConsumer } from './context';\n\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var Connector =\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(Connector, _Component);\n\n      function Connector(props) {\n        var _this;\n\n        _classCallCheck(this, Connector);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this, props));\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          _this.props.contextValue.onInternalStateUpdate( // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          return _this.props.contextValue.createHrefForState( // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this.props.contextValue.onSearchForFacetValues( // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props);\n        }\n\n        return _this;\n      }\n\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n\n          var propsEqual = shallowEqual(this.props, nextProps);\n\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n\n            return true;\n          }\n\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isUnmounting = true;\n\n          if (this.unsubscribe) {\n            this.unsubscribe();\n          }\n\n          if (this.unregisterWidget) {\n            this.unregisterWidget();\n\n            if (typeof connectorDesc.cleanUp === 'function') {\n              var nextState = connectorDesc.cleanUp.call(this, this.props, this.props.contextValue.store.getState().widgets);\n              this.props.contextValue.store.setState(_objectSpread({}, this.props.contextValue.store.getState(), {\n                widgets: nextState\n              }));\n              this.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n            }\n          }\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n              widgets = _this$props$contextVa.widgets,\n              results = _this$props$contextVa.results,\n              resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n              searching = _this$props$contextVa.searching,\n              searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n              isSearchStalled = _this$props$contextVa.isSearchStalled,\n              metadata = _this$props$contextVa.metadata,\n              error = _this$props$contextVa.error;\n\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata, // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n              contextValue = _this$props.contextValue,\n              props = _objectWithoutProperties(_this$props, [\"contextValue\"]);\n\n          var providedProps = this.state.providedProps;\n\n          if (providedProps === null) {\n            return null;\n          }\n\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n\n      return Connector;\n    }(Component);\n\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n\n    return Connector;\n  };\n}\n\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed);\n\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n\n    return ConnectorWrapper;\n  };\n};\n\nexport default createConnectorWithContext;","import { getPropertyByPath } from './utils';\nexport var HIGHLIGHT_TAGS = {\n  highlightPreTag: \"<ais-highlight-0000000000>\",\n  highlightPostTag: \"</ais-highlight-0000000000>\"\n};\n/**\n * Parses an highlighted attribute into an array of objects with the string value, and\n * a boolean that indicated if this part is highlighted.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightedValue - highlighted attribute as returned by Algolia highlight feature\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\n\nfunction parseHighlightedAttribute(_ref) {\n  var preTag = _ref.preTag,\n      postTag = _ref.postTag,\n      _ref$highlightedValue = _ref.highlightedValue,\n      highlightedValue = _ref$highlightedValue === void 0 ? '' : _ref$highlightedValue;\n  var splitByPreTag = highlightedValue.split(preTag);\n  var firstValue = splitByPreTag.shift();\n  var elements = firstValue === '' ? [] : [{\n    value: firstValue,\n    isHighlighted: false\n  }];\n\n  if (postTag === preTag) {\n    var isHighlighted = true;\n    splitByPreTag.forEach(function (split) {\n      elements.push({\n        value: split,\n        isHighlighted: isHighlighted\n      });\n      isHighlighted = !isHighlighted;\n    });\n  } else {\n    splitByPreTag.forEach(function (split) {\n      var splitByPostTag = split.split(postTag);\n      elements.push({\n        value: splitByPostTag[0],\n        isHighlighted: true\n      });\n\n      if (splitByPostTag[1] !== '') {\n        elements.push({\n          value: splitByPostTag[1],\n          isHighlighted: false\n        });\n      }\n    });\n  }\n\n  return elements;\n}\n/**\n * Find an highlighted attribute given an `attribute` and an `highlightProperty`, parses it,\n * and provided an array of objects with the string value and a boolean if this\n * value is highlighted.\n *\n * In order to use this feature, highlight must be activated in the configuration of\n * the index. The `preTag` and `postTag` attributes are respectively highlightPreTag and\n * highlightPostTag in Algolia configuration.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightProperty - the property that contains the highlight structure in the results\n * @param {string} attribute - the highlighted attribute to look for\n * @param {object} hit - the actual hit returned by Algolia.\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\n\n\nexport function parseAlgoliaHit(_ref2) {\n  var _ref2$preTag = _ref2.preTag,\n      preTag = _ref2$preTag === void 0 ? '<em>' : _ref2$preTag,\n      _ref2$postTag = _ref2.postTag,\n      postTag = _ref2$postTag === void 0 ? '</em>' : _ref2$postTag,\n      highlightProperty = _ref2.highlightProperty,\n      attribute = _ref2.attribute,\n      hit = _ref2.hit;\n  if (!hit) throw new Error('`hit`, the matching record, must be provided');\n  var highlightObject = getPropertyByPath(hit[highlightProperty], attribute) || {};\n\n  if (Array.isArray(highlightObject)) {\n    return highlightObject.map(function (item) {\n      return parseHighlightedAttribute({\n        preTag: preTag,\n        postTag: postTag,\n        highlightedValue: item.value\n      });\n    });\n  }\n\n  return parseHighlightedAttribute({\n    preTag: preTag,\n    postTag: postTag,\n    highlightedValue: highlightObject.value\n  });\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport { omit } from './utils';\nexport function getIndexId(context) {\n  return hasMultipleIndices(context) ? context.multiIndexContext.targetedIndex : context.ais.mainTargetedIndex;\n}\nexport function getResults(searchResults, context) {\n  if (searchResults.results) {\n    if (searchResults.results.hits) {\n      return searchResults.results;\n    }\n\n    var indexId = getIndexId(context);\n\n    if (searchResults.results[indexId]) {\n      return searchResults.results[indexId];\n    }\n  }\n\n  return null;\n}\nexport function hasMultipleIndices(context) {\n  return context && context.multiIndexContext;\n} // eslint-disable-next-line max-params\n\nexport function refineValue(searchState, nextRefinement, context, resetPage, namespace) {\n  if (hasMultipleIndices(context)) {\n    var indexId = getIndexId(context);\n    return namespace ? refineMultiIndexWithNamespace(searchState, nextRefinement, indexId, resetPage, namespace) : refineMultiIndex(searchState, nextRefinement, indexId, resetPage);\n  } else {\n    // When we have a multi index page with shared widgets we should also\n    // reset their page to 1 if the resetPage is provided. Otherwise the\n    // indices will always be reset\n    // see: https://github.com/algolia/react-instantsearch/issues/310\n    // see: https://github.com/algolia/react-instantsearch/issues/637\n    if (searchState.indices && resetPage) {\n      Object.keys(searchState.indices).forEach(function (targetedIndex) {\n        searchState = refineValue(searchState, {\n          page: 1\n        }, {\n          multiIndexContext: {\n            targetedIndex: targetedIndex\n          }\n        }, true, namespace);\n      });\n    }\n\n    return namespace ? refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) : refineSingleIndex(searchState, nextRefinement, resetPage);\n  }\n}\n\nfunction refineMultiIndex(searchState, nextRefinement, indexId, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var state = searchState.indices && searchState.indices[indexId] ? _objectSpread({}, searchState.indices, _defineProperty({}, indexId, _objectSpread({}, searchState.indices[indexId], nextRefinement, page))) : _objectSpread({}, searchState.indices, _defineProperty({}, indexId, _objectSpread({}, nextRefinement, page)));\n  return _objectSpread({}, searchState, {\n    indices: state\n  });\n}\n\nfunction refineSingleIndex(searchState, nextRefinement, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _objectSpread({}, searchState, nextRefinement, page);\n} // eslint-disable-next-line max-params\n\n\nfunction refineMultiIndexWithNamespace(searchState, nextRefinement, indexId, resetPage, namespace) {\n  var _objectSpread4;\n\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var state = searchState.indices && searchState.indices[indexId] ? _objectSpread({}, searchState.indices, _defineProperty({}, indexId, _objectSpread({}, searchState.indices[indexId], (_objectSpread4 = {}, _defineProperty(_objectSpread4, namespace, _objectSpread({}, searchState.indices[indexId][namespace], nextRefinement)), _defineProperty(_objectSpread4, \"page\", 1), _objectSpread4)))) : _objectSpread({}, searchState.indices, _defineProperty({}, indexId, _objectSpread(_defineProperty({}, namespace, nextRefinement), page)));\n  return _objectSpread({}, searchState, {\n    indices: state\n  });\n}\n\nfunction refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _objectSpread({}, searchState, _defineProperty({}, namespace, _objectSpread({}, searchState[namespace], nextRefinement)), page);\n}\n\nfunction getNamespaceAndAttributeName(id) {\n  var parts = id.match(/^([^.]*)\\.(.*)/);\n  var namespace = parts && parts[1];\n  var attributeName = parts && parts[2];\n  return {\n    namespace: namespace,\n    attributeName: attributeName\n  };\n}\n\nfunction hasRefinements(_ref) {\n  var multiIndex = _ref.multiIndex,\n      indexId = _ref.indexId,\n      namespace = _ref.namespace,\n      attributeName = _ref.attributeName,\n      id = _ref.id,\n      searchState = _ref.searchState;\n\n  if (multiIndex && namespace) {\n    return searchState.indices && searchState.indices[indexId] && searchState.indices[indexId][namespace] && Object.hasOwnProperty.call(searchState.indices[indexId][namespace], attributeName);\n  }\n\n  if (multiIndex) {\n    return searchState.indices && searchState.indices[indexId] && Object.hasOwnProperty.call(searchState.indices[indexId], id);\n  }\n\n  if (namespace) {\n    return searchState[namespace] && Object.hasOwnProperty.call(searchState[namespace], attributeName);\n  }\n\n  return Object.hasOwnProperty.call(searchState, id);\n}\n\nfunction getRefinements(_ref2) {\n  var multiIndex = _ref2.multiIndex,\n      indexId = _ref2.indexId,\n      namespace = _ref2.namespace,\n      attributeName = _ref2.attributeName,\n      id = _ref2.id,\n      searchState = _ref2.searchState;\n\n  if (multiIndex && namespace) {\n    return searchState.indices[indexId][namespace][attributeName];\n  }\n\n  if (multiIndex) {\n    return searchState.indices[indexId][id];\n  }\n\n  if (namespace) {\n    return searchState[namespace][attributeName];\n  }\n\n  return searchState[id];\n}\n\nexport function getCurrentRefinementValue(props, searchState, context, id, defaultValue) {\n  var indexId = getIndexId(context);\n\n  var _getNamespaceAndAttri = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri.namespace,\n      attributeName = _getNamespaceAndAttri.attributeName;\n\n  var multiIndex = hasMultipleIndices(context);\n  var args = {\n    multiIndex: multiIndex,\n    indexId: indexId,\n    namespace: namespace,\n    attributeName: attributeName,\n    id: id,\n    searchState: searchState\n  };\n  var hasRefinementsValue = hasRefinements(args);\n\n  if (hasRefinementsValue) {\n    return getRefinements(args);\n  }\n\n  if (props.defaultRefinement) {\n    return props.defaultRefinement;\n  }\n\n  return defaultValue;\n}\nexport function cleanUpValue(searchState, context, id) {\n  var indexId = getIndexId(context);\n\n  var _getNamespaceAndAttri2 = getNamespaceAndAttributeName(id),\n      namespace = _getNamespaceAndAttri2.namespace,\n      attributeName = _getNamespaceAndAttri2.attributeName;\n\n  if (hasMultipleIndices(context) && Boolean(searchState.indices)) {\n    return cleanUpValueWithMultiIndex({\n      attribute: attributeName,\n      searchState: searchState,\n      indexId: indexId,\n      id: id,\n      namespace: namespace\n    });\n  }\n\n  return cleanUpValueWithSingleIndex({\n    attribute: attributeName,\n    searchState: searchState,\n    id: id,\n    namespace: namespace\n  });\n}\n\nfunction cleanUpValueWithSingleIndex(_ref3) {\n  var searchState = _ref3.searchState,\n      id = _ref3.id,\n      namespace = _ref3.namespace,\n      attribute = _ref3.attribute;\n\n  if (namespace) {\n    return _objectSpread({}, searchState, _defineProperty({}, namespace, omit(searchState[namespace], [attribute])));\n  }\n\n  return omit(searchState, [id]);\n}\n\nfunction cleanUpValueWithMultiIndex(_ref4) {\n  var searchState = _ref4.searchState,\n      indexId = _ref4.indexId,\n      id = _ref4.id,\n      namespace = _ref4.namespace,\n      attribute = _ref4.attribute;\n  var indexSearchState = searchState.indices[indexId];\n\n  if (namespace && indexSearchState) {\n    return _objectSpread({}, searchState, {\n      indices: _objectSpread({}, searchState.indices, _defineProperty({}, indexId, _objectSpread({}, indexSearchState, _defineProperty({}, namespace, omit(indexSearchState[namespace], [attribute])))))\n    });\n  }\n\n  if (indexSearchState) {\n    return _objectSpread({}, searchState, {\n      indices: _objectSpread({}, searchState.indices, _defineProperty({}, indexId, omit(indexSearchState, [id])))\n    });\n  }\n\n  return searchState;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\n\nvar withKeysPropType = function withKeysPropType(keys) {\n  return function (props, propName, componentName) {\n    var prop = props[propName];\n\n    if (prop) {\n      for (var _i = 0, _Object$keys = Object.keys(prop); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n\n        if (keys.indexOf(key) === -1) {\n          return new Error(\"Unknown `\".concat(propName, \"` key `\").concat(key, \"`. Check the render method \") + \"of `\".concat(componentName, \"`.\"));\n        }\n      }\n    }\n\n    return undefined;\n  };\n};\n\nexport default function translatable(defaultTranslations) {\n  return function (Composed) {\n    var Translatable =\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(Translatable, _Component);\n\n      function Translatable() {\n        var _getPrototypeOf2;\n\n        var _this;\n\n        _classCallCheck(this, Translatable);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Translatable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n        _defineProperty(_assertThisInitialized(_this), \"translate\", function (key) {\n          var translations = _this.props.translations;\n          var translation = translations && translations.hasOwnProperty(key) ? translations[key] : defaultTranslations[key];\n\n          if (typeof translation === 'function') {\n            for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              params[_key2 - 1] = arguments[_key2];\n            }\n\n            return translation.apply(void 0, params);\n          }\n\n          return translation;\n        });\n\n        return _this;\n      }\n\n      _createClass(Translatable, [{\n        key: \"render\",\n        value: function render() {\n          return React.createElement(Composed, _extends({\n            translate: this.translate\n          }, this.props));\n        }\n      }]);\n\n      return Translatable;\n    }(Component);\n\n    var name = Composed.displayName || Composed.name || 'UnknownComponent';\n    Translatable.displayName = \"Translatable(\".concat(name, \")\");\n    Translatable.propTypes = {\n      translations: withKeysPropType(Object.keys(defaultTranslations))\n    };\n    return Translatable;\n  };\n}","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\n// From https://github.com/reactjs/react-redux/blob/master/src/utils/shallowEqual.js\nexport var shallowEqual = function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  } // Test for A's keys different from B.\n\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n\n  return true;\n};\nexport var getDisplayName = function getDisplayName(Component) {\n  return Component.displayName || Component.name || 'UnknownComponent';\n};\nvar resolved = Promise.resolve();\nexport var defer = function defer(f) {\n  resolved.then(f);\n};\n\nvar isPlainObject = function isPlainObject(value) {\n  return _typeof(value) === 'object' && value !== null && !Array.isArray(value);\n};\n\nexport var removeEmptyKey = function removeEmptyKey(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n\n    if (!isPlainObject(value)) {\n      return;\n    }\n\n    if (!objectHasKeys(value)) {\n      delete obj[key];\n    } else {\n      removeEmptyKey(value);\n    }\n  });\n  return obj;\n};\nexport var removeEmptyArraysFromObject = function removeEmptyArraysFromObject(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n\n    if (Array.isArray(value) && value.length === 0) {\n      delete obj[key];\n    }\n  });\n  return obj;\n};\nexport function addAbsolutePositions(hits, hitsPerPage, page) {\n  return hits.map(function (hit, index) {\n    return _objectSpread({}, hit, {\n      __position: hitsPerPage * page + index + 1\n    });\n  });\n}\nexport function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n\n  return hits.map(function (hit) {\n    return _objectSpread({}, hit, {\n      __queryID: queryID\n    });\n  });\n}\nexport function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n\n  return undefined;\n}\nexport function objectHasKeys(object) {\n  return object && Object.keys(object).length > 0;\n} // https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\n\nexport function omit(source, excluded) {\n  if (source === null || source === undefined) {\n    return {};\n  }\n\n  var target = {};\n  var sourceKeys = Object.keys(source);\n\n  for (var i = 0; i < sourceKeys.length; i++) {\n    var _key = sourceKeys[i];\n\n    if (excluded.indexOf(_key) >= 0) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    target[_key] = source[_key];\n  }\n\n  return target;\n}\n/**\n * Retrieve the value at a path of the object:\n *\n * @example\n * getPropertyByPath(\n *   { test: { this: { function: [{ now: { everyone: true } }] } } },\n *   'test.this.function[0].now.everyone'\n * ); // true\n *\n * getPropertyByPath(\n *   { test: { this: { function: [{ now: { everyone: true } }] } } },\n *   ['test', 'this', 'function', 0, 'now', 'everyone']\n * ); // true\n *\n * @param object Source object to query\n * @param path either an array of properties, or a string form of the properties, separated by .\n */\n\nexport var getPropertyByPath = function getPropertyByPath(object, path) {\n  return (Array.isArray(path) ? path : path.replace(/\\[(\\d+)]/g, '.$1').split('.')).reduce(function (current, key) {\n    return current ? current[key] : undefined;\n  }, object);\n};\nexport function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { omit } from '../core/utils';\nimport createConnector from '../core/createConnector';\nimport { refineValue, getIndexId, hasMultipleIndices } from '../core/indexUtils';\n\nfunction getId() {\n  return 'configure';\n}\n\nexport default createConnector({\n  displayName: 'AlgoliaConfigure',\n  getProvidedProps: function getProvidedProps() {\n    return {};\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    var children = props.children,\n        contextValue = props.contextValue,\n        indexContextValue = props.indexContextValue,\n        items = _objectWithoutProperties(props, [\"children\", \"contextValue\", \"indexContextValue\"]);\n\n    return searchParameters.setQueryParameters(items);\n  },\n  transitionState: function transitionState(props, prevSearchState, nextSearchState) {\n    var id = getId();\n\n    var children = props.children,\n        contextValue = props.contextValue,\n        indexContextValue = props.indexContextValue,\n        items = _objectWithoutProperties(props, [\"children\", \"contextValue\", \"indexContextValue\"]);\n\n    var propKeys = Object.keys(props);\n    var nonPresentKeys = this._props ? Object.keys(this._props).filter(function (prop) {\n      return propKeys.indexOf(prop) === -1;\n    }) : [];\n    this._props = props;\n\n    var nextValue = _defineProperty({}, id, _objectSpread({}, omit(nextSearchState[id], nonPresentKeys), items));\n\n    return refineValue(nextSearchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    var id = getId();\n    var indexId = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var subState = hasMultipleIndices({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }) && searchState.indices ? searchState.indices[indexId] : searchState;\n    var configureKeys = subState && subState[id] ? Object.keys(subState[id]) : [];\n    var configureState = configureKeys.reduce(function (acc, item) {\n      if (!props[item]) {\n        acc[item] = subState[id][item];\n      }\n\n      return acc;\n    }, {});\n\n    var nextValue = _defineProperty({}, id, configureState);\n\n    return refineValue(searchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  }\n});","import connectConfigure from '../connectors/connectConfigure';\n/**\n * Configure is a widget that lets you provide raw search parameters\n * to the Algolia API.\n *\n * Any of the props added to this widget will be forwarded to Algolia. For more information\n * on the different parameters that can be set, have a look at the\n * [reference](https://www.algolia.com/doc/api-client/javascript/search#search-parameters).\n *\n * This widget can be used either with react-dom and react-native. It will not render anything\n * on screen, only configure some parameters.\n *\n * Read more in the [Search parameters](guide/Search_parameters.html) guide.\n * @name Configure\n * @kind widget\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, Configure, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <Configure hitsPerPage={5} />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\n\nexport default connectConfigure(function Configure() {\n  return null;\n});","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport createWidgetsManager from './createWidgetsManager';\nimport createStore from './createStore';\nimport { HIGHLIGHT_TAGS } from './highlight';\nimport { hasMultipleIndices } from './indexUtils';\nimport { version as ReactVersion } from 'react';\nimport version from './version';\n\nfunction addAlgoliaAgents(searchClient) {\n  if (typeof searchClient.addAlgoliaAgent === 'function') {\n    searchClient.addAlgoliaAgent(\"react (\".concat(ReactVersion, \")\"));\n    searchClient.addAlgoliaAgent(\"react-instantsearch (\".concat(version, \")\"));\n  }\n}\n\nvar isMultiIndexContext = function isMultiIndexContext(widget) {\n  return hasMultipleIndices({\n    ais: widget.props.contextValue,\n    multiIndexContext: widget.props.indexContextValue\n  });\n};\n\nvar isTargetedIndexEqualIndex = function isTargetedIndexEqualIndex(widget, indexId) {\n  return widget.props.indexContextValue.targetedIndex === indexId;\n}; // Relying on the `indexId` is a bit brittle to detect the `Index` widget.\n// Since it's a class we could rely on `instanceof` or similar. We never\n// had an issue though. Works for now.\n\n\nvar isIndexWidget = function isIndexWidget(widget) {\n  return Boolean(widget.props.indexId);\n};\n\nvar isIndexWidgetEqualIndex = function isIndexWidgetEqualIndex(widget, indexId) {\n  return widget.props.indexId === indexId;\n};\n\nvar sortIndexWidgetsFirst = function sortIndexWidgetsFirst(firstWidget, secondWidget) {\n  var isFirstWidgetIndex = isIndexWidget(firstWidget);\n  var isSecondWidgetIndex = isIndexWidget(secondWidget);\n\n  if (isFirstWidgetIndex && !isSecondWidgetIndex) {\n    return -1;\n  }\n\n  if (!isFirstWidgetIndex && isSecondWidgetIndex) {\n    return 1;\n  }\n\n  return 0;\n}; // This function is copied from the algoliasearch v4 API Client. If modified,\n// consider updating it also in `serializeQueryParameters` from `@algolia/transporter`.\n\n\nfunction serializeQueryParameters(parameters) {\n  var isObjectOrArray = function isObjectOrArray(value) {\n    return Object.prototype.toString.call(value) === '[object Object]' || Object.prototype.toString.call(value) === '[object Array]';\n  };\n\n  var encode = function encode(format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var i = 0;\n    return format.replace(/%s/g, function () {\n      return encodeURIComponent(args[i++]);\n    });\n  };\n\n  return Object.keys(parameters).map(function (key) {\n    return encode('%s=%s', key, isObjectOrArray(parameters[key]) ? JSON.stringify(parameters[key]) : parameters[key]);\n  }).join('&');\n}\n/**\n * Creates a new instance of the InstantSearchManager which controls the widgets and\n * trigger the search when the widgets are updated.\n * @param {string} indexName - the main index name\n * @param {object} initialState - initial widget state\n * @param {object} SearchParameters - optional additional parameters to send to the algolia API\n * @param {number} stalledSearchDelay - time (in ms) after the search is stalled\n * @return {InstantSearchManager} a new instance of InstantSearchManager\n */\n\n\nexport default function createInstantSearchManager(_ref) {\n  var indexName = _ref.indexName,\n      _ref$initialState = _ref.initialState,\n      initialState = _ref$initialState === void 0 ? {} : _ref$initialState,\n      searchClient = _ref.searchClient,\n      resultsState = _ref.resultsState,\n      stalledSearchDelay = _ref.stalledSearchDelay;\n  var helper = algoliasearchHelper(searchClient, indexName, _objectSpread({}, HIGHLIGHT_TAGS));\n  addAlgoliaAgents(searchClient);\n  helper.on('search', handleNewSearch).on('result', handleSearchSuccess({\n    indexId: indexName\n  })).on('error', handleSearchError);\n  var skip = false;\n  var stalledSearchTimer = null;\n  var initialSearchParameters = helper.state;\n  var widgetsManager = createWidgetsManager(onWidgetsUpdate);\n  hydrateSearchClient(searchClient, resultsState);\n  var store = createStore({\n    widgets: initialState,\n    metadata: [],\n    results: hydrateResultsState(resultsState),\n    error: null,\n    searching: false,\n    isSearchStalled: true,\n    searchingForFacetValues: false\n  });\n\n  function skipSearch() {\n    skip = true;\n  }\n\n  function updateClient(client) {\n    addAlgoliaAgents(client);\n    helper.setClient(client);\n    search();\n  }\n\n  function clearCache() {\n    helper.clearCache();\n    search();\n  }\n\n  function getMetadata(state) {\n    return widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getMetadata);\n    }).map(function (widget) {\n      return widget.getMetadata(state);\n    });\n  }\n\n  function getSearchParameters() {\n    var sharedParameters = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      return !isMultiIndexContext(widget) && !isIndexWidget(widget);\n    }).reduce(function (res, widget) {\n      return widget.getSearchParameters(res);\n    }, initialSearchParameters);\n    var mainParameters = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      var targetedIndexEqualMainIndex = isMultiIndexContext(widget) && isTargetedIndexEqualIndex(widget, indexName);\n      var subIndexEqualMainIndex = isIndexWidget(widget) && isIndexWidgetEqualIndex(widget, indexName);\n      return targetedIndexEqualMainIndex || subIndexEqualMainIndex;\n    }) // We have to sort the `Index` widgets first so the `index` parameter\n    // is correctly set in the `reduce` function for the following widgets\n    .sort(sortIndexWidgetsFirst).reduce(function (res, widget) {\n      return widget.getSearchParameters(res);\n    }, sharedParameters);\n    var derivedIndices = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      var targetedIndexNotEqualMainIndex = isMultiIndexContext(widget) && !isTargetedIndexEqualIndex(widget, indexName);\n      var subIndexNotEqualMainIndex = isIndexWidget(widget) && !isIndexWidgetEqualIndex(widget, indexName);\n      return targetedIndexNotEqualMainIndex || subIndexNotEqualMainIndex;\n    }) // We have to sort the `Index` widgets first so the `index` parameter\n    // is correctly set in the `reduce` function for the following widgets\n    .sort(sortIndexWidgetsFirst).reduce(function (indices, widget) {\n      var indexId = isMultiIndexContext(widget) ? widget.props.indexContextValue.targetedIndex : widget.props.indexId;\n      var widgets = indices[indexId] || [];\n      return _objectSpread({}, indices, _defineProperty({}, indexId, widgets.concat(widget)));\n    }, {});\n    var derivedParameters = Object.keys(derivedIndices).map(function (indexId) {\n      return {\n        parameters: derivedIndices[indexId].reduce(function (res, widget) {\n          return widget.getSearchParameters(res);\n        }, sharedParameters),\n        indexId: indexId\n      };\n    });\n    return {\n      mainParameters: mainParameters,\n      derivedParameters: derivedParameters\n    };\n  }\n\n  function search() {\n    if (!skip) {\n      var _getSearchParameters = getSearchParameters(helper.state),\n          mainParameters = _getSearchParameters.mainParameters,\n          derivedParameters = _getSearchParameters.derivedParameters; // We have to call `slice` because the method `detach` on the derived\n      // helpers mutates the value `derivedHelpers`. The `forEach` loop does\n      // not iterate on each value and we're not able to correctly clear the\n      // previous derived helpers (memory leak + useless requests).\n\n\n      helper.derivedHelpers.slice().forEach(function (derivedHelper) {\n        // Since we detach the derived helpers on **every** new search they\n        // won't receive intermediate results in case of a stalled search.\n        // Only the last result is dispatched by the derived helper because\n        // they are not detached yet:\n        //\n        // - a -> main helper receives results\n        // - ap -> main helper receives results\n        // - app -> main helper + derived helpers receive results\n        //\n        // The quick fix is to avoid to detach them on search but only once they\n        // received the results. But it means that in case of a stalled search\n        // all the derived helpers not detached yet register a new search inside\n        // the helper. The number grows fast in case of a bad network and it's\n        // not deterministic.\n        derivedHelper.detach();\n      });\n      derivedParameters.forEach(function (_ref2) {\n        var indexId = _ref2.indexId,\n            parameters = _ref2.parameters;\n        var derivedHelper = helper.derive(function () {\n          return parameters;\n        });\n        derivedHelper.on('result', handleSearchSuccess({\n          indexId: indexId\n        })).on('error', handleSearchError);\n      });\n      helper.setState(mainParameters);\n      helper.search();\n    }\n  }\n\n  function handleSearchSuccess(_ref3) {\n    var indexId = _ref3.indexId;\n    return function (event) {\n      var state = store.getState();\n      var isDerivedHelpersEmpty = !helper.derivedHelpers.length;\n      var results = state.results ? state.results : {}; // Switching from mono index to multi index and vice versa must reset the\n      // results to an empty object, otherwise we keep reference of stalled and\n      // unused results.\n\n      results = !isDerivedHelpersEmpty && results.getFacetByName ? {} : results;\n\n      if (!isDerivedHelpersEmpty) {\n        results = _objectSpread({}, results, _defineProperty({}, indexId, event.results));\n      } else {\n        results = event.results;\n      }\n\n      var currentState = store.getState();\n      var nextIsSearchStalled = currentState.isSearchStalled;\n\n      if (!helper.hasPendingRequests()) {\n        clearTimeout(stalledSearchTimer);\n        stalledSearchTimer = null;\n        nextIsSearchStalled = false;\n      }\n\n      var resultsFacetValues = currentState.resultsFacetValues,\n          partialState = _objectWithoutProperties(currentState, [\"resultsFacetValues\"]);\n\n      store.setState(_objectSpread({}, partialState, {\n        results: results,\n        isSearchStalled: nextIsSearchStalled,\n        searching: false,\n        error: null\n      }));\n    };\n  }\n\n  function handleSearchError(_ref4) {\n    var error = _ref4.error;\n    var currentState = store.getState();\n    var nextIsSearchStalled = currentState.isSearchStalled;\n\n    if (!helper.hasPendingRequests()) {\n      clearTimeout(stalledSearchTimer);\n      nextIsSearchStalled = false;\n    }\n\n    var resultsFacetValues = currentState.resultsFacetValues,\n        partialState = _objectWithoutProperties(currentState, [\"resultsFacetValues\"]);\n\n    store.setState(_objectSpread({}, partialState, {\n      isSearchStalled: nextIsSearchStalled,\n      error: error,\n      searching: false\n    }));\n  }\n\n  function handleNewSearch() {\n    if (!stalledSearchTimer) {\n      stalledSearchTimer = setTimeout(function () {\n        var _store$getState = store.getState(),\n            resultsFacetValues = _store$getState.resultsFacetValues,\n            partialState = _objectWithoutProperties(_store$getState, [\"resultsFacetValues\"]);\n\n        store.setState(_objectSpread({}, partialState, {\n          isSearchStalled: true\n        }));\n      }, stalledSearchDelay);\n    }\n  }\n\n  function hydrateSearchClient(client, results) {\n    if (!results) {\n      return;\n    } // Disable cache hydration on:\n    // - Algoliasearch API Client < v4 with cache disabled\n    // - Third party clients (detected by the `addAlgoliaAgent` function missing)\n\n\n    if ((!client.transporter || client._cacheHydrated) && (!client._useCache || typeof client.addAlgoliaAgent !== 'function')) {\n      return;\n    } // Algoliasearch API Client >= v4\n    // To hydrate the client we need to populate the cache with the data from\n    // the server (done in `hydrateSearchClientWithMultiIndexRequest` or\n    // `hydrateSearchClientWithSingleIndexRequest`). But since there is no way\n    // for us to compute the key the same way as `algoliasearch-client` we need\n    // to populate it on a custom key and override the `search` method to\n    // search on it first.\n\n\n    if (client.transporter && !client._cacheHydrated) {\n      client._cacheHydrated = true;\n      var baseMethod = client.search;\n\n      client.search = function (requests) {\n        for (var _len2 = arguments.length, methodArgs = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          methodArgs[_key2 - 1] = arguments[_key2];\n        }\n\n        var requestsWithSerializedParams = requests.map(function (request) {\n          return _objectSpread({}, request, {\n            params: serializeQueryParameters(request.params)\n          });\n        });\n        return client.transporter.responsesCache.get({\n          method: 'search',\n          args: [requestsWithSerializedParams].concat(methodArgs)\n        }, function () {\n          return baseMethod.apply(void 0, [requests].concat(methodArgs));\n        });\n      };\n    }\n\n    if (Array.isArray(results)) {\n      hydrateSearchClientWithMultiIndexRequest(client, results);\n      return;\n    }\n\n    hydrateSearchClientWithSingleIndexRequest(client, results);\n  }\n\n  function hydrateSearchClientWithMultiIndexRequest(client, results) {\n    // Algoliasearch API Client >= v4\n    // Populate the cache with the data from the server\n    if (client.transporter) {\n      client.transporter.responsesCache.set({\n        method: 'search',\n        args: [results.reduce(function (acc, result) {\n          return acc.concat(result.rawResults.map(function (request) {\n            return {\n              indexName: request.index,\n              params: request.params\n            };\n          }));\n        }, [])]\n      }, {\n        results: results.reduce(function (acc, result) {\n          return acc.concat(result.rawResults);\n        }, [])\n      });\n      return;\n    } // Algoliasearch API Client < v4\n    // Prior to client v4 we didn't have a proper API to hydrate the client\n    // cache from the outside. The following code populates the cache with\n    // a single-index result. You can find more information about the\n    // computation of the key inside the client (see link below).\n    // https://github.com/algolia/algoliasearch-client-javascript/blob/c27e89ff92b2a854ae6f40dc524bffe0f0cbc169/src/AlgoliaSearchCore.js#L232-L240\n\n\n    var key = \"/1/indexes/*/queries_body_\".concat(JSON.stringify({\n      requests: results.reduce(function (acc, result) {\n        return acc.concat(result.rawResults.map(function (request) {\n          return {\n            indexName: request.index,\n            params: request.params\n          };\n        }));\n      }, [])\n    }));\n    client.cache = _objectSpread({}, client.cache, _defineProperty({}, key, JSON.stringify({\n      results: results.reduce(function (acc, result) {\n        return acc.concat(result.rawResults);\n      }, [])\n    })));\n  }\n\n  function hydrateSearchClientWithSingleIndexRequest(client, results) {\n    // Algoliasearch API Client >= v4\n    // Populate the cache with the data from the server\n    if (client.transporter) {\n      client.transporter.responsesCache.set({\n        method: 'search',\n        args: [results.rawResults.map(function (request) {\n          return {\n            indexName: request.index,\n            params: request.params\n          };\n        })]\n      }, {\n        results: results.rawResults\n      });\n      return;\n    } // Algoliasearch API Client < v4\n    // Prior to client v4 we didn't have a proper API to hydrate the client\n    // cache from the outside. The following code populates the cache with\n    // a single-index result. You can find more information about the\n    // computation of the key inside the client (see link below).\n    // https://github.com/algolia/algoliasearch-client-javascript/blob/c27e89ff92b2a854ae6f40dc524bffe0f0cbc169/src/AlgoliaSearchCore.js#L232-L240\n\n\n    var key = \"/1/indexes/*/queries_body_\".concat(JSON.stringify({\n      requests: results.rawResults.map(function (request) {\n        return {\n          indexName: request.index,\n          params: request.params\n        };\n      })\n    }));\n    client.cache = _objectSpread({}, client.cache, _defineProperty({}, key, JSON.stringify({\n      results: results.rawResults\n    })));\n  }\n\n  function hydrateResultsState(results) {\n    if (!results) {\n      return null;\n    }\n\n    if (Array.isArray(results)) {\n      return results.reduce(function (acc, result) {\n        return _objectSpread({}, acc, _defineProperty({}, result._internalIndexId, new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(result.state), result.rawResults)));\n      }, {});\n    }\n\n    return new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(results.state), results.rawResults);\n  } // Called whenever a widget has been rendered with new props.\n\n\n  function onWidgetsUpdate() {\n    var metadata = getMetadata(store.getState().widgets);\n    store.setState(_objectSpread({}, store.getState(), {\n      metadata: metadata,\n      searching: true\n    })); // Since the `getSearchParameters` method of widgets also depends on props,\n    // the result search parameters might have changed.\n\n    search();\n  }\n\n  function transitionState(nextSearchState) {\n    var searchState = store.getState().widgets;\n    return widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.transitionState);\n    }).reduce(function (res, widget) {\n      return widget.transitionState(searchState, res);\n    }, nextSearchState);\n  }\n\n  function onExternalStateUpdate(nextSearchState) {\n    var metadata = getMetadata(nextSearchState);\n    store.setState(_objectSpread({}, store.getState(), {\n      widgets: nextSearchState,\n      metadata: metadata,\n      searching: true\n    }));\n    search();\n  }\n\n  function onSearchForFacetValues(_ref5) {\n    var facetName = _ref5.facetName,\n        query = _ref5.query,\n        _ref5$maxFacetHits = _ref5.maxFacetHits,\n        maxFacetHits = _ref5$maxFacetHits === void 0 ? 10 : _ref5$maxFacetHits;\n    // The values 1, 100 are the min / max values that the engine accepts.\n    // see: https://www.algolia.com/doc/api-reference/api-parameters/maxFacetHits\n    var maxFacetHitsWithinRange = Math.max(1, Math.min(maxFacetHits, 100));\n    store.setState(_objectSpread({}, store.getState(), {\n      searchingForFacetValues: true\n    }));\n    helper.searchForFacetValues(facetName, query, maxFacetHitsWithinRange).then(function (content) {\n      var _objectSpread7;\n\n      store.setState(_objectSpread({}, store.getState(), {\n        error: null,\n        searchingForFacetValues: false,\n        resultsFacetValues: _objectSpread({}, store.getState().resultsFacetValues, (_objectSpread7 = {}, _defineProperty(_objectSpread7, facetName, content.facetHits), _defineProperty(_objectSpread7, \"query\", query), _objectSpread7))\n      }));\n    }, function (error) {\n      store.setState(_objectSpread({}, store.getState(), {\n        searchingForFacetValues: false,\n        error: error\n      }));\n    }).catch(function (error) {\n      // Since setState is synchronous, any error that occurs in the render of a\n      // component will be swallowed by this promise.\n      // This is a trick to make the error show up correctly in the console.\n      // See http://stackoverflow.com/a/30741722/969302\n      setTimeout(function () {\n        throw error;\n      });\n    });\n  }\n\n  function updateIndex(newIndex) {\n    initialSearchParameters = initialSearchParameters.setIndex(newIndex); // No need to trigger a new search here as the widgets will also update and trigger it if needed.\n  }\n\n  function getWidgetsIds() {\n    return store.getState().metadata.reduce(function (res, meta) {\n      return typeof meta.id !== 'undefined' ? res.concat(meta.id) : res;\n    }, []);\n  }\n\n  return {\n    store: store,\n    widgetsManager: widgetsManager,\n    getWidgetsIds: getWidgetsIds,\n    getSearchParameters: getSearchParameters,\n    onSearchForFacetValues: onSearchForFacetValues,\n    onExternalStateUpdate: onExternalStateUpdate,\n    transitionState: transitionState,\n    updateClient: updateClient,\n    updateIndex: updateIndex,\n    clearCache: clearCache,\n    skipSearch: skipSearch\n  };\n}","export default '6.7.0';","import { defer } from './utils';\nexport default function createWidgetsManager(onWidgetsUpdate) {\n  var widgets = []; // Is an update scheduled?\n\n  var scheduled = false; // The state manager's updates need to be batched since more than one\n  // component can register or unregister widgets during the same tick.\n\n  function scheduleUpdate() {\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    defer(function () {\n      scheduled = false;\n      onWidgetsUpdate();\n    });\n  }\n\n  return {\n    registerWidget: function registerWidget(widget) {\n      widgets.push(widget);\n      scheduleUpdate();\n      return function unregisterWidget() {\n        widgets.splice(widgets.indexOf(widget), 1);\n        scheduleUpdate();\n      };\n    },\n    update: scheduleUpdate,\n    getWidgets: function getWidgets() {\n      return widgets;\n    }\n  };\n}","export default function createStore(initialState) {\n  var state = initialState;\n  var listeners = [];\n  return {\n    getState: function getState() {\n      return state;\n    },\n    setState: function setState(nextState) {\n      state = nextState;\n      listeners.forEach(function (listener) {\n        return listener();\n      });\n    },\n    subscribe: function subscribe(listener) {\n      listeners.push(listener);\n      return function unsubscribe() {\n        listeners.splice(listeners.indexOf(listener), 1);\n      };\n    }\n  };\n}","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component, Children } from 'react';\nimport isEqual from 'react-fast-compare';\nimport PropTypes from 'prop-types';\nimport createInstantSearchManager from '../core/createInstantSearchManager';\nimport { InstantSearchProvider } from '../core/context';\n\nfunction isControlled(props) {\n  return Boolean(props.searchState);\n}\n/**\n * @description\n * `<InstantSearch>` is the root component of all React InstantSearch implementations.\n * It provides all the connected components (aka widgets) a means to interact\n * with the searchState.\n * @kind widget\n * @name <InstantSearch>\n * @requirements You will need to have an Algolia account to be able to use this widget.\n * [Create one now](https://www.algolia.com/users/sign_up).\n * @propType {string} indexName - Main index in which to search.\n * @propType {boolean} [refresh=false] - Flag to activate when the cache needs to be cleared so that the front-end is updated when a change occurs in the index.\n * @propType {object} [searchClient] - Provide a custom search client.\n * @propType {func} [onSearchStateChange] - Function to be called everytime a new search is done. Useful for [URL Routing](guide/Routing.html).\n * @propType {object} [searchState] - Object to inject some search state. Switches the InstantSearch component in controlled mode. Useful for [URL Routing](guide/Routing.html).\n * @propType {func} [createURL] - Function to call when creating links, useful for [URL Routing](guide/Routing.html).\n * @propType {SearchResults|SearchResults[]} [resultsState] - Use this to inject the results that will be used at first rendering. Those results are found by using the `findResultsState` function. Useful for [Server Side Rendering](guide/Server-side_rendering.html).\n * @propType {number} [stalledSearchDelay=200] - The amount of time before considering that the search takes too much time. The time is expressed in milliseconds.\n * @propType {{ Root: string|function, props: object }} [root] - Use this to customize the root element. Default value: `{ Root: 'div' }`\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\n\n\nvar InstantSearch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InstantSearch, _Component);\n\n  _createClass(InstantSearch, null, [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextIsControlled = isControlled(nextProps);\n      var previousSearchState = prevState.instantSearchManager.store.getState().widgets;\n      var nextSearchState = nextProps.searchState;\n\n      if (nextIsControlled && !isEqual(previousSearchState, nextSearchState)) {\n        prevState.instantSearchManager.onExternalStateUpdate(nextProps.searchState);\n      }\n\n      return {\n        isControlled: nextIsControlled,\n        contextValue: _objectSpread({}, prevState.contextValue, {\n          mainTargetedIndex: nextProps.indexName\n        })\n      };\n    }\n  }]);\n\n  function InstantSearch(props) {\n    var _this;\n\n    _classCallCheck(this, InstantSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(InstantSearch).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n\n    var instantSearchManager = createInstantSearchManager({\n      indexName: _this.props.indexName,\n      searchClient: _this.props.searchClient,\n      initialState: _this.props.searchState || {},\n      resultsState: _this.props.resultsState,\n      stalledSearchDelay: _this.props.stalledSearchDelay\n    });\n    var contextValue = {\n      store: instantSearchManager.store,\n      widgetsManager: instantSearchManager.widgetsManager,\n      mainTargetedIndex: _this.props.indexName,\n      onInternalStateUpdate: _this.onWidgetsInternalStateUpdate.bind(_assertThisInitialized(_this)),\n      createHrefForState: _this.createHrefForState.bind(_assertThisInitialized(_this)),\n      onSearchForFacetValues: _this.onSearchForFacetValues.bind(_assertThisInitialized(_this)),\n      onSearchStateChange: _this.onSearchStateChange.bind(_assertThisInitialized(_this)),\n      onSearchParameters: _this.onSearchParameters.bind(_assertThisInitialized(_this))\n    };\n    _this.state = {\n      isControlled: isControlled(_this.props),\n      instantSearchManager: instantSearchManager,\n      contextValue: contextValue\n    };\n    return _this;\n  }\n\n  _createClass(InstantSearch, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevIsControlled = isControlled(prevProps);\n\n      if (prevIsControlled && !this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being controlled to uncontrolled\");\n      }\n\n      if (!prevIsControlled && this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being uncontrolled to controlled\");\n      }\n\n      if (this.props.refresh !== prevProps.refresh && this.props.refresh) {\n        this.state.instantSearchManager.clearCache();\n      }\n\n      if (prevProps.indexName !== this.props.indexName) {\n        this.state.instantSearchManager.updateIndex(this.props.indexName);\n      }\n\n      if (prevProps.searchClient !== this.props.searchClient) {\n        this.state.instantSearchManager.updateClient(this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.isUnmounting = true;\n      this.state.instantSearchManager.skipSearch();\n    }\n  }, {\n    key: \"createHrefForState\",\n    value: function createHrefForState(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      return this.state.isControlled && this.props.createURL ? this.props.createURL(searchState, this.getKnownKeys()) : '#';\n    }\n  }, {\n    key: \"onWidgetsInternalStateUpdate\",\n    value: function onWidgetsInternalStateUpdate(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      this.onSearchStateChange(searchState);\n\n      if (!this.state.isControlled) {\n        this.state.instantSearchManager.onExternalStateUpdate(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchStateChange\",\n    value: function onSearchStateChange(searchState) {\n      if (this.props.onSearchStateChange && !this.isUnmounting) {\n        this.props.onSearchStateChange(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchParameters\",\n    value: function onSearchParameters(getSearchParameters, context, props) {\n      if (this.props.onSearchParameters) {\n        var _searchState = this.props.searchState ? this.props.searchState : {};\n\n        this.props.onSearchParameters(getSearchParameters, context, props, _searchState);\n      }\n    }\n  }, {\n    key: \"onSearchForFacetValues\",\n    value: function onSearchForFacetValues(searchState) {\n      this.state.instantSearchManager.onSearchForFacetValues(searchState);\n    }\n  }, {\n    key: \"getKnownKeys\",\n    value: function getKnownKeys() {\n      return this.state.instantSearchManager.getWidgetsIds();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (Children.count(this.props.children) === 0) {\n        return null;\n      }\n\n      return React.createElement(InstantSearchProvider, {\n        value: this.state.contextValue\n      }, this.props.children);\n    }\n  }]);\n\n  return InstantSearch;\n}(Component);\n\n_defineProperty(InstantSearch, \"defaultProps\", {\n  stalledSearchDelay: 200,\n  refresh: false\n});\n\n_defineProperty(InstantSearch, \"propTypes\", {\n  // @TODO: These props are currently constant.\n  indexName: PropTypes.string.isRequired,\n  searchClient: PropTypes.shape({\n    search: PropTypes.func.isRequired,\n    searchForFacetValues: PropTypes.func,\n    addAlgoliaAgent: PropTypes.func,\n    clearCache: PropTypes.func\n  }).isRequired,\n  createURL: PropTypes.func,\n  refresh: PropTypes.bool,\n  searchState: PropTypes.object,\n  onSearchStateChange: PropTypes.func,\n  onSearchParameters: PropTypes.func,\n  resultsState: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  children: PropTypes.node,\n  stalledSearchDelay: PropTypes.number\n});\n\nexport default InstantSearch;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { translatable } from 'react-instantsearch-core';\nimport { createClassNames } from '../core/utils';\nvar cx = createClassNames('SearchBox');\nvar defaultLoadingIndicator = React.createElement(\"svg\", {\n  width: \"18\",\n  height: \"18\",\n  viewBox: \"0 0 38 38\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  stroke: \"#444\",\n  className: cx('loadingIcon')\n}, React.createElement(\"g\", {\n  fill: \"none\",\n  fillRule: \"evenodd\"\n}, React.createElement(\"g\", {\n  transform: \"translate(1 1)\",\n  strokeWidth: \"2\"\n}, React.createElement(\"circle\", {\n  strokeOpacity: \".5\",\n  cx: \"18\",\n  cy: \"18\",\n  r: \"18\"\n}), React.createElement(\"path\", {\n  d: \"M36 18c0-9.94-8.06-18-18-18\"\n}, React.createElement(\"animateTransform\", {\n  attributeName: \"transform\",\n  type: \"rotate\",\n  from: \"0 18 18\",\n  to: \"360 18 18\",\n  dur: \"1s\",\n  repeatCount: \"indefinite\"\n})))));\nvar defaultReset = React.createElement(\"svg\", {\n  className: cx('resetIcon'),\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 20 20\",\n  width: \"10\",\n  height: \"10\"\n}, React.createElement(\"path\", {\n  d: \"M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z\"\n}));\nvar defaultSubmit = React.createElement(\"svg\", {\n  className: cx('submitIcon'),\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"10\",\n  height: \"10\",\n  viewBox: \"0 0 40 40\"\n}, React.createElement(\"path\", {\n  d: \"M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z\"\n}));\n\nvar SearchBox =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBox, _Component);\n\n  function SearchBox(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBox);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBox).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"getQuery\", function () {\n      return _this.props.searchAsYouType ? _this.props.currentRefinement : _this.state.query;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInputMount\", function (input) {\n      _this.input = input;\n      if (!_this.props.inputRef) return;\n\n      if (typeof _this.props.inputRef === 'function') {\n        _this.props.inputRef(input);\n      } else {\n        _this.props.inputRef.current = input;\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      if (!_this.props.focusShortcuts) {\n        return;\n      }\n\n      var shortcuts = _this.props.focusShortcuts.map(function (key) {\n        return typeof key === 'string' ? key.toUpperCase().charCodeAt(0) : key;\n      });\n\n      var elt = e.target || e.srcElement;\n      var tagName = elt.tagName;\n\n      if (elt.isContentEditable || tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA') {\n        // already in an input\n        return;\n      }\n\n      var which = e.which || e.keyCode;\n\n      if (shortcuts.indexOf(which) === -1) {\n        // not the right shortcut\n        return;\n      }\n\n      _this.input.focus();\n\n      e.stopPropagation();\n      e.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      _this.input.blur();\n\n      var _this$props = _this.props,\n          refine = _this$props.refine,\n          searchAsYouType = _this$props.searchAsYouType;\n\n      if (!searchAsYouType) {\n        refine(_this.getQuery());\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (event) {\n      var _this$props2 = _this.props,\n          searchAsYouType = _this$props2.searchAsYouType,\n          refine = _this$props2.refine,\n          onChange = _this$props2.onChange;\n      var value = event.target.value;\n\n      if (searchAsYouType) {\n        refine(value);\n      } else {\n        _this.setState({\n          query: value\n        });\n      }\n\n      if (onChange) {\n        onChange(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props3 = _this.props,\n          searchAsYouType = _this$props3.searchAsYouType,\n          refine = _this$props3.refine,\n          onReset = _this$props3.onReset;\n      refine('');\n\n      _this.input.focus();\n\n      if (!searchAsYouType) {\n        _this.setState({\n          query: ''\n        });\n      }\n\n      if (onReset) {\n        onReset(event);\n      }\n    });\n\n    _this.state = {\n      query: props.searchAsYouType ? null : props.currentRefinement\n    };\n    return _this;\n  }\n\n  _createClass(SearchBox, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('keydown', this.onKeyDown);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('keydown', this.onKeyDown);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (!this.props.searchAsYouType && prevProps.currentRefinement !== this.props.currentRefinement) {\n        this.setState({\n          query: this.props.currentRefinement\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          className = _this$props4.className,\n          translate = _this$props4.translate,\n          autoFocus = _this$props4.autoFocus,\n          loadingIndicator = _this$props4.loadingIndicator,\n          submit = _this$props4.submit,\n          reset = _this$props4.reset;\n      var query = this.getQuery();\n      var searchInputEvents = Object.keys(this.props).reduce(function (props, prop) {\n        if (['onsubmit', 'onreset', 'onchange'].indexOf(prop.toLowerCase()) === -1 && prop.indexOf('on') === 0) {\n          return _objectSpread({}, props, _defineProperty({}, prop, _this2.props[prop]));\n        }\n\n        return props;\n      }, {});\n      var isSearchStalled = this.props.showLoadingIndicator && this.props.isSearchStalled;\n      /* eslint-disable max-len */\n\n      return React.createElement(\"div\", {\n        className: classNames(cx(''), className)\n      }, React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.props.onSubmit ? this.props.onSubmit : this.onSubmit,\n        onReset: this.onReset,\n        className: cx('form', isSearchStalled && 'form--stalledSearch'),\n        action: \"\",\n        role: \"search\"\n      }, React.createElement(\"input\", _extends({\n        ref: this.onInputMount,\n        type: \"search\",\n        placeholder: translate('placeholder'),\n        autoFocus: autoFocus,\n        autoComplete: \"off\",\n        autoCorrect: \"off\",\n        autoCapitalize: \"off\",\n        spellCheck: \"false\",\n        required: true,\n        maxLength: \"512\",\n        value: query,\n        onChange: this.onChange\n      }, searchInputEvents, {\n        className: cx('input')\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        title: translate('submitTitle'),\n        className: cx('submit')\n      }, submit), React.createElement(\"button\", {\n        type: \"reset\",\n        title: translate('resetTitle'),\n        className: cx('reset'),\n        hidden: !query || isSearchStalled\n      }, reset), this.props.showLoadingIndicator && React.createElement(\"span\", {\n        hidden: !isSearchStalled,\n        className: cx('loadingIndicator')\n      }, loadingIndicator)));\n      /* eslint-enable */\n    }\n  }]);\n\n  return SearchBox;\n}(Component);\n\n_defineProperty(SearchBox, \"propTypes\", {\n  currentRefinement: PropTypes.string,\n  className: PropTypes.string,\n  refine: PropTypes.func.isRequired,\n  translate: PropTypes.func.isRequired,\n  loadingIndicator: PropTypes.node,\n  reset: PropTypes.node,\n  submit: PropTypes.node,\n  focusShortcuts: PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.number])),\n  autoFocus: PropTypes.bool,\n  searchAsYouType: PropTypes.bool,\n  onSubmit: PropTypes.func,\n  onReset: PropTypes.func,\n  onChange: PropTypes.func,\n  isSearchStalled: PropTypes.bool,\n  showLoadingIndicator: PropTypes.bool,\n  inputRef: PropTypes.oneOfType([PropTypes.func, PropTypes.exact({\n    current: PropTypes.object\n  })])\n});\n\n_defineProperty(SearchBox, \"defaultProps\", {\n  currentRefinement: '',\n  className: '',\n  focusShortcuts: ['s', '/'],\n  autoFocus: false,\n  searchAsYouType: true,\n  showLoadingIndicator: false,\n  isSearchStalled: false,\n  loadingIndicator: defaultLoadingIndicator,\n  reset: defaultReset,\n  submit: defaultSubmit\n});\n\nexport default translatable({\n  resetTitle: 'Clear the search query.',\n  submitTitle: 'Submit your search query.',\n  placeholder: 'Search here'\n})(SearchBox);","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport cx from 'classnames';\nexport var createClassNames = function createClassNames(block) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'ais';\n  return function () {\n    for (var _len = arguments.length, elements = new Array(_len), _key = 0; _key < _len; _key++) {\n      elements[_key] = arguments[_key];\n    }\n\n    var suitElements = elements.filter(function (element) {\n      return element || element === '';\n    }).map(function (element) {\n      var baseClassName = \"\".concat(prefix, \"-\").concat(block);\n      return element ? \"\".concat(baseClassName, \"-\").concat(element) : baseClassName;\n    });\n    return cx(suitElements);\n  };\n};\nexport var isSpecialClick = function isSpecialClick(event) {\n  var isMiddleClick = event.button === 1;\n  return Boolean(isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey);\n};\nexport var capitalize = function capitalize(key) {\n  return key.length === 0 ? '' : \"\".concat(key[0].toUpperCase()).concat(key.slice(1));\n};\n// taken from InstantSearch.js/utils\nexport function range(_ref) {\n  var _ref$start = _ref.start,\n      start = _ref$start === void 0 ? 0 : _ref$start,\n      end = _ref.end,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step; // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return (start + current) * limitStep;\n  });\n}\nexport function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n\n  return undefined;\n}","import createConnector from '../core/createConnector';\nimport { HIGHLIGHT_TAGS, parseAlgoliaHit } from '../core/highlight';\n\nvar highlight = function highlight(_ref) {\n  var attribute = _ref.attribute,\n      hit = _ref.hit,\n      highlightProperty = _ref.highlightProperty,\n      _ref$preTag = _ref.preTag,\n      preTag = _ref$preTag === void 0 ? HIGHLIGHT_TAGS.highlightPreTag : _ref$preTag,\n      _ref$postTag = _ref.postTag,\n      postTag = _ref$postTag === void 0 ? HIGHLIGHT_TAGS.highlightPostTag : _ref$postTag;\n  return parseAlgoliaHit({\n    attribute: attribute,\n    highlightProperty: highlightProperty,\n    hit: hit,\n    preTag: preTag,\n    postTag: postTag\n  });\n};\n/**\n * connectHighlight connector provides the logic to create an highlighter\n * component that will retrieve, parse and render an highlighted attribute\n * from an Algolia hit.\n * @name connectHighlight\n * @kind connector\n * @category connector\n * @providedPropType {function} highlight - function to retrieve and parse an attribute from a hit. It takes a configuration object with 3 attributes: `highlightProperty` which is the property that contains the highlight structure from the records, `attribute` which is the name of the attribute (it can be either a string or an array of strings) to look for and `hit` which is the hit from Algolia. It returns an array of objects `{value: string, isHighlighted: boolean}`. If the element that corresponds to the attribute is an array of strings, it will return a nested array of objects.\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, connectHighlight } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const CustomHighlight = connectHighlight(\n *   ({ highlight, attribute, hit, highlightProperty }) => {\n *     const highlights = highlight({\n *       highlightProperty: '_highlightResult',\n *       attribute,\n *       hit\n *     });\n *\n *     return highlights.map(part => part.isHighlighted ? (\n *       <mark>{part.value}</mark>\n *     ) : (\n *       <span>{part.value}</span>\n *     ));\n *   }\n * );\n *\n * const Hit = ({ hit }) => (\n *   <p>\n *     <CustomHighlight attribute=\"name\" hit={hit} />\n *   </p>\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox defaultRefinement=\"pho\" />\n *     <Hits hitComponent={Hit} />\n *   </InstantSearch>\n * );\n */\n\n\nexport default createConnector({\n  displayName: 'AlgoliaHighlighter',\n  propTypes: {},\n  getProvidedProps: function getProvidedProps() {\n    return {\n      highlight: highlight\n    };\n  }\n});","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nexport var Highlight = function Highlight(_ref) {\n  var cx = _ref.cx,\n      value = _ref.value,\n      highlightedTagName = _ref.highlightedTagName,\n      isHighlighted = _ref.isHighlighted,\n      nonHighlightedTagName = _ref.nonHighlightedTagName;\n  var TagName = isHighlighted ? highlightedTagName : nonHighlightedTagName;\n  var className = isHighlighted ? 'highlighted' : 'nonHighlighted';\n  return React.createElement(TagName, {\n    className: cx(className)\n  }, value);\n};\nHighlight.propTypes = {\n  cx: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired,\n  isHighlighted: PropTypes.bool.isRequired,\n  highlightedTagName: PropTypes.string.isRequired,\n  nonHighlightedTagName: PropTypes.string.isRequired\n};\n\nvar Highlighter = function Highlighter(_ref2) {\n  var cx = _ref2.cx,\n      hit = _ref2.hit,\n      attribute = _ref2.attribute,\n      highlight = _ref2.highlight,\n      highlightProperty = _ref2.highlightProperty,\n      tagName = _ref2.tagName,\n      nonHighlightedTagName = _ref2.nonHighlightedTagName,\n      separator = _ref2.separator,\n      className = _ref2.className;\n  var parsedHighlightedValue = highlight({\n    hit: hit,\n    attribute: attribute,\n    highlightProperty: highlightProperty\n  });\n  return React.createElement(\"span\", {\n    className: classNames(cx(''), className)\n  }, parsedHighlightedValue.map(function (item, i) {\n    if (Array.isArray(item)) {\n      var isLast = i === parsedHighlightedValue.length - 1;\n      return React.createElement(\"span\", {\n        key: i\n      }, item.map(function (element, index) {\n        return React.createElement(Highlight, {\n          cx: cx,\n          key: index,\n          value: element.value,\n          highlightedTagName: tagName,\n          nonHighlightedTagName: nonHighlightedTagName,\n          isHighlighted: element.isHighlighted\n        });\n      }), !isLast && React.createElement(\"span\", {\n        className: cx('separator')\n      }, separator));\n    }\n\n    return React.createElement(Highlight, {\n      cx: cx,\n      key: i,\n      value: item.value,\n      highlightedTagName: tagName,\n      nonHighlightedTagName: nonHighlightedTagName,\n      isHighlighted: item.isHighlighted\n    });\n  }));\n};\n\nHighlighter.propTypes = {\n  cx: PropTypes.func.isRequired,\n  hit: PropTypes.object.isRequired,\n  attribute: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]).isRequired,\n  highlight: PropTypes.func.isRequired,\n  highlightProperty: PropTypes.string.isRequired,\n  tagName: PropTypes.string,\n  nonHighlightedTagName: PropTypes.string,\n  className: PropTypes.string,\n  separator: PropTypes.node\n};\nHighlighter.defaultProps = {\n  tagName: 'em',\n  nonHighlightedTagName: 'span',\n  className: '',\n  separator: ', '\n};\nexport default Highlighter;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport { createClassNames } from '../core/utils';\nimport Highlighter from './Highlighter';\nvar cx = createClassNames('Highlight');\n\nvar Highlight = function Highlight(props) {\n  return React.createElement(Highlighter, _extends({}, props, {\n    highlightProperty: \"_highlightResult\",\n    cx: cx\n  }));\n};\n\nexport default Highlight;","import { connectHighlight } from 'react-instantsearch-core';\nimport Highlight from '../components/Highlight';\n/**\n * Renders any attribute from a hit into its highlighted form when relevant.\n *\n * Read more about it in the [Highlighting results](guide/Highlighting_results.html) guide.\n * @name Highlight\n * @kind widget\n * @propType {string} attribute - location of the highlighted attribute in the hit (the corresponding element can be either a string or an array of strings)\n * @propType {object} hit - hit object containing the highlighted attribute\n * @propType {string} [tagName='em'] - tag to be used for highlighted parts of the hit\n * @propType {string} [nonHighlightedTagName='span'] - tag to be used for the parts of the hit that are not highlighted\n * @propType {node} [separator=',<space>'] - symbol used to separate the elements of the array in case the attribute points to an array of strings.\n * @themeKey ais-Highlight - root of the component\n * @themeKey ais-Highlight-highlighted - part of the text which is highlighted\n * @themeKey ais-Highlight-nonHighlighted - part of the text that is not highlighted\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, Highlight } from 'react-instantsearch-dom';\n *\n * const Hit = ({ hit }) => (\n *   <div>\n *     <Highlight attribute=\"name\" hit={hit} />\n *   </div>\n * );\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox defaultRefinement=\"Pho\" />\n *     <Hits hitComponent={Hit} />\n *   </InstantSearch>\n * );\n */\n\nexport default connectHighlight(Highlight);","'use strict';\n\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar CloudLineIcon = function CloudLineIcon(_ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === undefined ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === undefined ? 24 : _ref$size,\n      children = _ref.children,\n      props = objectWithoutProperties(_ref, ['color', 'size', 'children']);\n\n  var className = 'remixicon-icon ' + (props.className || '');\n\n  return React__default['default'].createElement(\n    'svg',\n    _extends({}, props, { className: className, width: size, height: size, fill: color, viewBox: '0 0 24 24' }),\n    React__default['default'].createElement('path', { d: 'M17 21H7A6 6 0 0 1 5.008 9.339a7 7 0 1 1 13.984 0A6 6 0 0 1 17 21zm0-12a5 5 0 1 0-9.994.243l.07 1.488-1.404.494A4.002 4.002 0 0 0 7 19h10a4 4 0 1 0-3.796-5.265l-1.898-.633A6.003 6.003 0 0 1 17 9z' })\n  );\n};\n\nvar CloudLineIcon$1 = React__default['default'].memo ? React__default['default'].memo(CloudLineIcon) : CloudLineIcon;\n\nmodule.exports = CloudLineIcon$1;\n","'use strict';\n\nvar React = require('react');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar objectWithoutProperties = function (obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n};\n\nvar Edit2LineIcon = function Edit2LineIcon(_ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === undefined ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === undefined ? 24 : _ref$size,\n      children = _ref.children,\n      props = objectWithoutProperties(_ref, ['color', 'size', 'children']);\n\n  var className = 'remixicon-icon ' + (props.className || '');\n\n  return React__default['default'].createElement(\n    'svg',\n    _extends({}, props, { className: className, width: size, height: size, fill: color, viewBox: '0 0 24 24' }),\n    React__default['default'].createElement('path', { d: 'M5 19h1.414l9.314-9.314-1.414-1.414L5 17.586V19zm16 2H3v-4.243L16.435 3.322a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414L9.243 19H21v2zM15.728 6.858l1.414 1.414 1.414-1.414-1.414-1.414-1.414 1.414z' })\n  );\n};\n\nvar Edit2LineIcon$1 = React__default['default'].memo ? React__default['default'].memo(Edit2LineIcon) : Edit2LineIcon;\n\nmodule.exports = Edit2LineIcon$1;\n","import defineProperty from \"./defineProperty.js\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n  return target;\n}"],"names":["window","document","require","Icon","Icon_1","_AbstractPureComponen","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","value","icon","this","props","_this$props","className","color","htmlTitle","_this$props$iconSize","iconSize","SIZE_STANDARD","intent","_this$props$title","title","_this$props$tagName","tagName","htmlprops","_objectWithoutProperties","_excluded","pixelGridSize","SIZE_LARGE","paths","renderSvgPaths","classes","classNames","Classes","viewBox","concat","React","_objectSpread","fill","width","height","pathsSize","iconName","pathStrings","IconSvgPaths16","IconSvgPaths20","map","d","i","fillRule","AbstractPureComponent2","displayName","DISPLAYNAME_PREFIX","__decorate","polyfill","KeyCodes","Modifiers","ModifierBitMasks","alt","ctrl","meta","shift","Aliases","cmd","command","escape","minus","mod","isMac","option","plus","return","win","ShiftKeys","$","_","toString","comboMatches","a","b","modifiers","parseKeyCombo","combo","_step","pieces","replace","toLowerCase","split","_iterator","_createForOfIteratorHelper","s","n","done","piece","Error","err","e","f","getKeyCombo","which","String","fromCharCode","altKey","ctrlKey","metaKey","shiftKey","platformOverride","platform","navigator","undefined","test","KeyIcons","delete","down","enter","left","right","up","KeyCombo","_this","renderKey","index","reactKey","renderMinimalKey","minimal","keys","keyName","normalizeKeyCombo","length","toUpperCase","Hotkey","label","spreadableProps","rootClasses","Object","assign","global","group","defaultProps","allowInInput","disabled","preventDefault","stopPropagation","isRefObject","current","getRef","ref","_ref$current","R","SPINNER_TRACK","PATH_LENGTH","Spinner","Spinner_1","prevProps","forceUpdate","size","getSize","_defineProperty","strokeWidth","Math","min","strokeOffset","clamp","toFixed","getViewBox","pathLength","strokeDasharray","strokeDashoffset","_ref","_ref$className","indexOf","console","warn","SPINNER_WARN_CLASSES_SIZE","_this$props2","_this$props2$classNam","SIZE_SMALL","max","radius","viewBoxX","viewBoxWidth","AbstractButton","state","isActive","handleKeyDown","_this$props$onKeyDown","Keys","currentKeyDown","setState","onKeyDown","call","handleKeyUp","_this$props$onKeyUp","_getRef","buttonRef","click","onKeyUp","handleBlur","_this$props$onBlur","_this$props3","onBlur","_classNames","_this$props4","active","alignText","large","loading","outlined","small","tabIndex","onClick","_this$props5","children","rightIcon","text","Utils","Button","_AbstractButton","handleRef","elementRef","_this$props$elementRe","type","removeNonHTMLProps","getCommonButtonProps","renderChildren","AnchorButton","_AbstractButton2","_super2","_this2","_this2$props$elementR","_this2$props","href","_this$props2$tabIndex","commonProps","role","htmlElement","tagClassName","htmlProps","HEADING","H4","BLOCKQUOTE","CODE","CODE_BLOCK","LABEL","LIST","Dialog","Overlay","hasBackdrop","style","maybeRenderHeader","Errors","isCloseButtonShown","onClose","maybeRenderCloseButton","canOutsideClickClose","isOpen","Hotkeys","isReactChildrenElementOrElements","lastGroup","hotkeys","child","sort","localeCompare","elems","hotkey","groupLabel","push","forEach","isElementOfType","HOTKEYS_HOTKEY_CHILDREN","HOTKEYS_DIALOG","HotkeysDialog","componentProps","globalHotkeysGroup","container","hotkeysQueue","isDialogShowing","show","render","hide","getContainer","ReactDOM","renderComponent","remove","clearTimeout","showTimeoutToken","setTimeout","hideTimeoutToken","createElement","classList","add","body","appendChild","renderHotkeys","elements","emptyHotkeyQueue","reduce","arr","queued","isHotkeysDialogShowing","isShowing","HotkeyScope","HotkeysEvents","scope","actions","isTextInput","invokeNamedCallbackIfComboRecognized","hideAfterDelay","action","enqueueHotkeysForDisplay","Children","isScope","callbackName","_action$props$callbac","_action$props","isPropagationStopped","GLOBAL","LOCAL","elem","target","closest","editable","inputType","readOnly","HotkeysTarget","WrappedComponent","isFunction","prototype","HOTKEYS_WARN_DECORATOR_NO_METHOD","_a","_WrappedComponent","HotkeysTargetClass","globalHotkeysEvents","localHotkeysEvents","_get","_getPrototypeOf","addEventListener","_get2","removeEventListener","clear","element","HOTKEYS_WARN_DECORATOR_NEEDS_REACT_ELEMENT","setHotkeys","count","_element$props","existingKeyDown","existingKeyUp","nativeEvent","getDisplayName","AlgoliaSearchHelper","SearchParameters","SearchResults","algoliasearchHelper","client","opts","version","module","exports","EventEmitter","_events","_maxListeners","arg","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","er","handler","len","args","listeners","error","context","Array","slice","addListener","listener","m","newListener","warned","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","listenerCount","evlistener","emitter","events","DerivedHelper","mainHelper","fn","main","lastResults","inherits","detach","detachDerivedHelper","getModifiedState","parameters","defaultsPure","omit","objectHasKeys","lib","addRefinement","refinementList","attribute","isRefined","valueAsString","facetRefinement","removeRefinement","clearRefinement","v","toggleRefinement","refinementType","hasChanged","newRefinementList","memo","values","facetList","filter","refinementValue","containsRefinements","refinementValueAsString","merge","intersection","find","valToNumber","isValidUserToken","RefinementList","isEqualNumericRefinement","isArray","every","el","newParameters","params","_parseNumbers","userToken","facets","disjunctiveFacets","hierarchicalFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacetsRefinements","self","paramName","isKeyKnown","PARAMETERS","isValueDefined","partialState","numbers","k","parsedValue","parseFloat","insideBoundingBox","geoRect","operators","operator","parsedValues","vPrime","make","instance","facet","rootPath","currentRefinement","getHierarchicalRefinement","name","clearRefinements","toggleHierarchicalFacetRefinement","validate","currentState","tagFilters","numericFilters","constructor","patch","_clearNumericRefinements","setQueryParameters","clearTags","setIndex","setQuery","newQuery","query","setPage","newPage","page","setFacets","setDisjunctiveFacets","setHitsPerPage","hitsPerPage","setTypoTolerance","typoTolerance","addNumericRefinement","isNumericRefined","getConjunctiveRefinements","facetName","isConjunctiveFacet","getDisjunctiveRefinements","isDisjunctiveFacet","getExcludeRefinements","removeNumericRefinement","paramValue","op","val","getNumericRefinements","getNumericRefinement","newNumericRefinements","operatorList","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","hierarchicalFacet","isHierarchicalFacet","addFacetRefinement","addExcludeRefinement","addDisjunctiveFacetRefinement","addTagRefinement","tag","isTagRefined","modification","removeFacet","removeDisjunctiveFacet","removeHierarchicalFacet","removeFacetRefinement","removeExcludeRefinement","removeDisjunctiveFacetRefinement","removeTagRefinement","t","toggleFacetRefinement","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","toggleExcludeFacetRefinement","separator","_getHierarchicalFacetSeparator","getHierarchicalFacetByName","lastIndexOf","addHierarchicalFacetRefinement","path","isHierarchicalFacetRefined","removeHierarchicalFacetRefinement","toggleTagRefinement","isFacetRefined","isExcludeRefined","isDisjunctiveFacetRefined","refinements","isOperatorDefined","array","searchedValue","isAttributeValueDefined","currentValue","getRefinedDisjunctiveFacets","disjunctiveNumericRefinedFacets","getRefinedHierarchicalFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","getQueryParams","queryParams","setQueryParameter","parameter","nextWithNumbers","previousPlainObject","acc","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","resetPage","_getHierarchicalFacetSortBy","sortBy","_getHierarchicalRootPath","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","getHierarchicalFacetBreadcrumb","refinement","part","trim","JSON","stringify","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","rootExhaustive","facetResult","exhaustive","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","parent","level","data","subtree","picked","facetValue","tuple","parentPath","onlyMatchingTree","orderBy","facetCount","parts","format","generateHierarchicalTree","results","compact","findIndex","formatSort","getIndices","attributes","indices","idx","assignFacetStats","dest","facetStats","stats","mainSubResponse","_rawResults","processingTimeMS","sum","result","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustiveFacetsCount","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","attributeIndex","dataFromMainRequest","refinedFacet","defaultData","root","excludes","_state","recSort","sortFn","node","names","childNode","sortedChildren","getFacetStatsIfAvailable","getRefinement","attributeName","resultsFacets","getFacetByName","predicate","DEFAULT_SORT","getFacetValues","facetValues","isExcluded","extractNormalizedFacetValues","options","facetOrdering","renderingContent","getFacetOrdering","Boolean","orderedFacets","remainingFacets","reverseOrder","order","item","ordering","sortRemainingBy","sortViaFacetOrdering","vanillaSortFn","getFacetStats","getRefinements","res","facetDeclaration","rootFacet","intermediateFacet","newFacet","numericValue","requestBuilder","addAlgoliaAgent","setClient","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","isPageReset","getCurrentPage","search","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","_getHitsSearchParams","searchOnce","cb","tempState","queries","_getQueries","then","content","_originalResponse","catch","findAnswers","derivedHelper","Promise","resolve","derivedState","attributesForPrediction","nbHits","errorMessage","initIndex","queryLanguages","searchForFacetValues","maxFacetHits","userState","clientHasSFFV","isDisjunctive","algoliaQuery","getSearchForFacetQuery","indexName","facetHits","q","addDisjunctiveRefine","addRefine","addFacetExclusion","addExclude","addTag","removeDisjunctiveRefine","removeRefine","removeFacetExclusion","removeExclude","removeTag","toggleFacetExclusion","toggleExclude","toggleRefine","toggleTag","nextPage","previousPage","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","isDisjunctiveRefined","hasTag","hasTagRefinements","getIndex","getPage","getTags","r","states","mainQueries","queriesCount","helper","derivedQueries","derivedStateQueries","queryId","_dispatchAlgoliaResponse","bind","_dispatchAlgoliaError","specificResults","formattedResponse","containsRefinement","facetFilters","_hasDisjunctiveRefinements","disjunctiveRefinements","event","clearCache","newClient","getClient","derive","pos","hasPendingRequests","sources","reduceRight","source","comparator","defaults","defaultInstructions","out","sortInstruction","matchingDefault","defaultInstruction","ctor","superCtor","create","enumerable","writable","configurable","arr1","arr2","isObjectOrArrayOrFunction","_merge","hasOwnProperty","sourceVal","targetVal","l","obj","excluded","sourceKeys","compareAscending","other","valIsDefined","valIsNull","othIsDefined","othIsNull","collection","iteratees","orders","criteria","iteratee","object","_getDisjunctiveFacetSearchParams","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","_getNumericFilters","_getTagFilters","additionalParams","hierarchicalRootLevel","attributesToRetrieve","attributesToHighlight","attributesToSnippet","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","vs","join","orFilters","attributeToRefine","attributesIndex","allAttributes","hierarchicalRefinement","newAttributes","rootLevel","parentLevel","stateForSearchForFacetValues","searchForFacetSearchParameters","facetQuery","defineProperty","getOwnPropertySymbols","getOwnPropertyDescriptor","o","getOwnPropertyDescriptors","defineProperties","propertyIsEnumerable","Symbol","iterator","u","next","from","localStorage","parse","getItem","get","miss","all","set","setItem","removeItem","caches","serializable","c","floor","random","encodeURIComponent","h","WithinQueryParameters","WithinHeaders","entries","timeout","headers","queryParameters","cacheable","Read","Write","Any","p","y","status","lastUpdate","Date","now","protocol","url","accept","O","P","getTimeout","statelessHosts","j","method","userAgent","pop","message","transporterStackTrace","A","w","connectTimeout","timeouts","connect","responseTimeout","request","response","host","triesLeft","onSucess","onRetry","isTimedOut","logger","info","x","hostsCache","onFail","requester","send","reverse","S","segment","T","charAt","substr","C","appId","authMode","apiKey","requestsCache","responsesCache","hosts","read","mappedRequestOptions","transporter","reject","write","methods","N","requests","J","I","E","F","D","W","XMLHttpRequest","open","setRequestHeader","abort","onreadystatechange","readyState","OPENED","onerror","responseText","onload","debug","multipleQueries","multipleSearchForFacetValues","createConnector","getProvidedProps","searchState","searchResults","getResults","ais","contextValue","multiIndexContext","indexContextValue","hits","hitsWithPositions","addAbsolutePositions","addQueryID","queryID","getSearchParameters","searchParameters","getCurrentRefinement","getCurrentRefinementValue","_refine","nextRefinement","nextValue","refineValue","propTypes","defaultRefinement","PropTypes","isSearchStalled","refine","cleanUp","cleanUpValue","_cleanUp","getMetadata","id","getIndexId","items","nextState","_createContext","createContext","onInternalStateUpdate","createHrefForState","onSearchForFacetValues","onSearchStateChange","onSearchParameters","store","widgetsManager","mainTargetedIndex","InstantSearchConsumer","Consumer","InstantSearchProvider","Provider","_createContext2","IndexConsumer","IndexProvider","connectorDesc","Composed","Connector","isWidget","transitionState","_Component","_possibleConstructorReturn","_assertThisInitialized","providedProps","_len","_key","getState","widgets","_ref2","_len2","_key2","_ref3","_len3","_key3","unsubscribe","subscribe","isUnmounting","unregisterWidget","registerWidget","nextProps","shouldComponentUpdate","propsEqual","shallowEqual","isEqual","update","removeEmptyKey","_this$props$contextVa","resultsFacetValues","searching","searchingForFacetValues","metadata","nextWidgetsState","prevWidgetsState","refineProps","createURL","searchForFacetValuesProps","searchForItems","_extends","Component","createConnectorWithoutContext","HIGHLIGHT_TAGS","highlightPreTag","highlightPostTag","parseHighlightedAttribute","preTag","postTag","_ref$highlightedValue","highlightedValue","splitByPreTag","firstValue","isHighlighted","splitByPostTag","parseAlgoliaHit","_ref2$preTag","_ref2$postTag","highlightProperty","hit","highlightObject","getPropertyByPath","hasMultipleIndices","targetedIndex","indexId","namespace","_objectSpread4","refineMultiIndexWithNamespace","refineMultiIndex","refineSingleIndexWithNamespace","refineSingleIndex","getNamespaceAndAttributeName","match","defaultValue","_getNamespaceAndAttri","multiIndex","hasRefinementsValue","_getNamespaceAndAttri2","_ref4","indexSearchState","cleanUpValueWithMultiIndex","cleanUpValueWithSingleIndex","translatable","defaultTranslations","Translatable","_getPrototypeOf2","translations","translation","translate","propName","componentName","prop","_i","_Object$keys","objA","objB","keysA","keysB","hasOwn","resolved","defer","_typeof","isPlainObject","__position","__queryID","prevSearchState","nextSearchState","propKeys","nonPresentKeys","_props","subState","configureState","addAlgoliaAgents","searchClient","ReactVersion","isMultiIndexContext","widget","isTargetedIndexEqualIndex","isIndexWidget","isIndexWidgetEqualIndex","sortIndexWidgetsFirst","firstWidget","secondWidget","isFirstWidgetIndex","isSecondWidgetIndex","serializeQueryParameters","encode","createInstantSearchManager","_ref$initialState","initialState","resultsState","stalledSearchDelay","stalledSearchTimer","_store$getState","handleSearchSuccess","handleSearchError","skip","initialSearchParameters","onWidgetsUpdate","scheduled","scheduleUpdate","getWidgets","createWidgetsManager","_cacheHydrated","_useCache","baseMethod","methodArgs","requestsWithSerializedParams","rawResults","cache","hydrateSearchClientWithMultiIndexRequest","hydrateSearchClientWithSingleIndexRequest","hydrateSearchClient","createStore","_internalIndexId","hydrateResultsState","sharedParameters","mainParameters","targetedIndexEqualMainIndex","subIndexEqualMainIndex","derivedIndices","targetedIndexNotEqualMainIndex","subIndexNotEqualMainIndex","derivedParameters","_getSearchParameters","isDerivedHelpersEmpty","nextIsSearchStalled","getWidgetsIds","_ref5","_ref5$maxFacetHits","maxFacetHitsWithinRange","_objectSpread7","onExternalStateUpdate","updateClient","updateIndex","newIndex","skipSearch","isControlled","InstantSearch","instantSearchManager","onWidgetsInternalStateUpdate","prevState","nextIsControlled","previousSearchState","prevIsControlled","refresh","getKnownKeys","_searchState","isRequired","cx","createClassNames","defaultLoadingIndicator","xmlns","stroke","transform","strokeOpacity","cy","to","dur","repeatCount","defaultReset","defaultSubmit","SearchBox","searchAsYouType","input","inputRef","focusShortcuts","shortcuts","charCodeAt","elt","srcElement","isContentEditable","keyCode","focus","blur","onChange","onReset","autoFocus","loadingIndicator","submit","reset","searchInputEvents","showLoadingIndicator","noValidate","onSubmit","onInputMount","placeholder","autoComplete","autoCorrect","autoCapitalize","spellCheck","required","maxLength","hidden","resetTitle","submitTitle","block","prefix","suitElements","baseClassName","highlight","_ref$preTag","_ref$postTag","Highlight","highlightedTagName","nonHighlightedTagName","TagName","Highlighter","parsedHighlightedValue","isLast","connectHighlight","_interopDefaultLegacy","React__default","CloudLineIcon","_ref$color","_ref$size","objectWithoutProperties","CloudLineIcon$1","Edit2LineIcon","Edit2LineIcon$1","ownKeys","sym"],"sourceRoot":""}