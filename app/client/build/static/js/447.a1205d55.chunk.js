"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[447],{84567:function(e,n,t){t.d(n,{r:function(){return a}});var i=t(68219),a=function(e,n){return{type:i.Ep.SET_HEADER_META,payload:{hideHeaderShadow:e,showHeaderSeparator:n}}}},75640:function(e,n,t){var i,a=t(30168),r=(t(72791),t(79271)),o=t(44787),s=t(18528),d=t(25341),l=t(75076),c=t(9724),u=t(17823),p=t(86957),h=t(7526),g=t(87818),f=t(35581),m=t(40641),v=t(80184),x=o.ZP.div(i||(i=(0,a.Z)(["\n  //width: 100%;\n  height: 30px;\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  cursor: pointer;\n  padding-left: 16px;\n  width: fit-content;\n  /* background-color: ","; */\n"])),(function(e){return e.theme.colors.apiPane.iconHoverBg}));n.Z=function(){var e=(0,r.k6)(),n=location.search,t=new URLSearchParams(n).get("from"),i=(0,g.v9)(f.zj),a=(0,p.c)(),o=c.Rb.ACTIVE;return a&&(o=c.Rb.NEW),(0,v.jsxs)(x,{className:"t--close-editor",onClick:function(n){l.Z.startTracking(l.W.CLOSE_SIDE_PANE,{path:location.pathname}),n.stopPropagation();var r=a?(0,h.Id)({pageId:i}):(0,h.K3)({pageId:i}),s="datasources"===t?(0,h.RQ)({pageId:i,selectedTab:o,params:(0,u.vl)()}):r;m.Z.logEvent("BACK_BUTTON_CLICK",{type:"BACK_BUTTON",fromUrl:location.pathname,toUrl:s}),e.push(s)},children:[(0,v.jsx)(d.JO,{icon:"chevron-left",iconSize:16}),(0,v.jsx)(s.xv,{style:{color:"#0c0000",lineHeight:"14px"},type:s.yG.P1,children:"Back"})]})}},9317:function(e,n,t){t.d(n,{lK:function(){return r}});var i,a,r,o=t(29439),s=t(30168),d=t(72791),l=t(37305),c=t(25341),u=t(44787),p=t(763),h=t.n(p),g=t(40598),f=t(18528),m=t(80184);!function(e){e[e.SINGLE=0]="SINGLE",e[e.DOUBLE=1]="DOUBLE"}(r||(r={}));var v=u.ZP.div(i||(i=(0,s.Z)(["\n  && {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: flex-start;\n    width: 100%;\n    & ."," {\n      background: ",";\n      cursor: pointer;\n      padding: ",";\n      text-transform: none;\n      flex: 1 0 100%;\n      max-width: 100%;\n      overflow: hidden;\n      display: flex;\n      &:before,\n      &:after {\n        display: none;\n      }\n    }\n    & div."," {\n      text-transform: none;\n      width: 100%;\n    }\n  }\n\n  ","\n"])),l.ZA5,(function(e){return e.isEditing&&!e.minimal?e.theme.colors.editableText.bg:"none"}),(function(e){return e.minimal?"0px":"5px 5px"}),l.Wi$,(function(e){return e.useFullWidth&&"\n    > div {\n    width: 100%;\n    }\n  "})),x=u.ZP.div(a||(a=(0,s.Z)(["\n  display: flex;\n  &&&& ."," {\n    & ."," {\n      &:hover {\n        text-decoration: ",";\n      }\n    }\n  }\n  &&& .",":hover {\n    ","\n  }\n  & span.bp3-editable-text-content {\n    height: auto !important;\n  }\n"])),l.ZA5,l.qNT,(function(e){return e.minimal?"underline":"none"}),l.qNT,(function(e){return e.underline?"\n        border-bottom-style: solid;\n        border-bottom-width: 1px;\n        width: fit-content;\n      ":null}));n.ZP=function(e){var n=e.beforeUnmount,t=e.className,i=e.customErrorTooltip,a=void 0===i?"":i,s=e.defaultValue,l=e.disabled,u=e.editInteractionKind,p=e.errorTooltipClass,A=e.forceDefault,y=e.hideEditIcon,T=e.isEditingDefault,C=e.isInvalid,D=e.maxLength,b=e.maxLines,S=e.minimal,I=e.minLines,E=e.multiline,Z=e.onBlur,k=e.onTextChanged,j=e.placeholder,P=e.underline,w=e.updating,F=e.useFullWidth,R=e.valueTransform,N=(0,d.useState)(!!T),O=(0,o.Z)(N,2),U=O[0],V=O[1],z=(0,d.useState)(s),B=(0,o.Z)(z,2),H=B[0],L=B[1],M=(0,d.useRef)(""),_=(0,d.useCallback)((function(e){M.current=e,L(e)}),[]);(0,d.useEffect)((function(){_(s)}),[s]),(0,d.useEffect)((function(){V(!!T)}),[s,T]),(0,d.useEffect)((function(){!0===A&&_(s)}),[A,s]),(0,d.useEffect)((function(){return function(){"function"===typeof n&&n(M.current)}}),[n]);var G=function(e){V(!0),e.preventDefault(),e.stopPropagation()},q=(0,d.useCallback)((function(e){Z&&Z(),!!C&&C(e)?f.x7.show({text:a||"Invalid name",variant:f.$e.danger}):(k(e),V(!1))}),[C,k]),K=(0,d.useCallback)((function(e){var n=e;R&&(n=R(e)),_(n)}),[R]),Y=C&&C(H),W=Y||void 0,X=!(l||S||y||w||U);return(0,m.jsx)(v,{isEditing:U,minimal:!!S,onClick:u===r.SINGLE?G:h().noop,onDoubleClick:u===r.DOUBLE?G:h().noop,useFullWidth:!(!F||!U),children:(0,m.jsx)(g.Z,{customClass:p,isOpen:!!W,message:Y,children:(0,m.jsxs)(x,{isValid:!W,minimal:!!S,underline:P,children:[(0,m.jsx)(c.sL,{className:t,disabled:l||!U,isEditing:U,maxLength:D,maxLines:b,minLines:I,multiline:E,onCancel:Z,onChange:K,onConfirm:q,placeholder:j,selectAllOnFocus:!0,value:H}),X&&(0,m.jsx)(f.JO,{className:"t--action-name-edit-icon",fillColor:"#939090",name:"edit",size:f.Jh.XXL})]})})})}},10648:function(e,n,t){t.d(n,{ZP:function(){return S}});var i,a,r=t(30168),o=(t(72791),t(87818)),s=t(44787),d=t(18528),l=t(46898),c=t(18879),u=t(33590),p=t(73947),h=t(40641),g=t(72014),f=t(77916),m=t(89809),v=t(60309),x=t(51653),A=t(23234),y=t(55750),T=t(94328),C=t(80184),D=s.ZP.div(i||(i=(0,r.Z)(["\n  padding-bottom: ","px;\n  background-color: ",";\n  width: 100%;\n  margin-top: auto;\n\n  & .ads-dialog-trigger {\n    margin-top: ","px;\n  }\n\n  & .ads-dialog-trigger > div {\n    position: initial;\n    width: 92%;\n    padding: ",";\n  }\n"])),(function(e){return e.theme.spaces[3]}),v.w.WHITE,(function(e){return e.theme.spaces[1]}),(function(e){return"".concat(e.theme.spaces[0],"px ").concat(e.theme.spaces[6],"px")})),b=s.ZP.div(a||(a=(0,r.Z)(["\n  display: flex;\n  justify-content: space-between;\n  color: ",";\n  font-size: 8px;\n  width: 92%;\n  margin-top: ","px;\n"])),v.w.MIRAGE_2,(function(e){return e.theme.spaces[3]}));var S=function(){var e=(0,o.I0)(),n=(0,o.v9)(u.$x),t=(0,o.v9)(c.ZO),i=(0,p.x)(),a=i.appVersion,r=i.cloudHosting,s=(0,g.dU)(a.releaseDate),v=(0,o.v9)(A.ts),S=(0,o.v9)(T.LC);return(0,C.jsxs)(D,{children:[(0,y.OY)(v)&&!t&&(0,C.jsx)(d.sN,{className:"admin-settings-menu-option",icon:"setting",onSelect:function(){(0,x.er)(x.DT.REDIRECT,{path:(0,y.RZ)({isSuperUser:null===v||void 0===v?void 0:v.isSuperUser,tenantPermissions:S})})},text:(0,l.tnH)(l.AIM)}),(0,C.jsx)(d.sN,{icon:"discord",onSelect:function(){window.open("https://discord.gg/rBTTVJp","_blank")},text:"Join our Discord"}),(0,C.jsx)(d.sN,{icon:"book",onSelect:function(){window.open("https://docs.appsmith.com/","_blank")},text:(0,l.tnH)(l.tQ)}),(0,C.jsx)(d.sN,{containerClassName:"t--welcome-tour",icon:"guide",onSelect:function(){!t&&n.length&&(h.Z.logEvent("WELCOME_TOUR_CLICK"),e((0,f.fF)()))},text:(0,l.tnH)(l.Fo$)}),(0,C.jsx)(m.Z,{}),(0,C.jsxs)(b,{children:[(0,C.jsx)("span",{children:(0,l.tnH)(l.XL2,a.edition,a.id,r)}),""!==s&&(0,C.jsxs)("span",{children:["Released ",s," ago"]})]})]})}},49764:function(e,n,t){var i,a,r,o;t.d(n,{Gr:function(){return i},b4:function(){return r},qJ:function(){return o},vx:function(){return a}}),function(e){e.NONE="dbAuth",e.OAuth2="oAuth2",e.basic="basic",e.apiKey="apiKey",e.bearerToken="bearerToken"}(i||(i={})),function(e){e.DEFAULT="DEFAULT",e.SELF_SIGNED_CERTIFICATE="SELF_SIGNED_CERTIFICATE"}(a||(a={})),function(e){e.QueryParams="queryParams",e.Header="header"}(r||(r={})),function(e){e.ClientCredentials="client_credentials",e.AuthorizationCode="authorization_code"}(o||(o={}))},91142:function(e,n,t){var i,a,r,o=t(30168),s=t(72791),d=t(25341),l=t(44787),c=t(18528),u=t(60309),p=t(87818),h=t(33620),g=t(40200),f=t(42530),m=t.n(f),v=t(80184),x=l.ZP.div(i||(i=(0,o.Z)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  letter-spacing: -0.17px;\n  color: #4e5d78;\n  display: flex;\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[2]})),A=l.ZP.div(a||(a=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 240px;\n  cursor: pointer;\n  margin-bottom: 5;\n"]))),y=l.ZP.div(r||(r=(0,o.Z)(["\n  height: 1px;\n  background-color: ",";\n  margin-top: 24px;\n  margin-bottom: 24px;\n"])),u.w.ALTO);n.Z=function(e){var n=e.children,t=e.defaultIsOpen,i=e.headerIcon,a=e.showSection,r=void 0===a||a,o=e.showTopBorder,l=void 0===o||o,u=e.title,f=(0,p.I0)(),T=(0,p.v9)((function(e){return(0,h.I9)(e,u)})),C=(0,s.useCallback)((function(e){f((0,g.r_)(u,e))}),[]);return(0,s.useEffect)((function(){t&&m()(T)&&C(t)}),[t,T]),(0,v.jsxs)("section",{"data-cy":"section-".concat(u),"data-replay-id":"section-".concat(u),children:[l&&(0,v.jsx)(y,{className:"t--collapse-top-border"}),r&&(0,v.jsxs)(A,{className:"t--collapse-section-container",onClick:function(){return C(!T)},children:[(0,v.jsxs)(x,{children:[u,i&&(0,v.jsx)(c.JO,{fillColor:i.color,name:i.name,size:c.Jh.MEDIUM})]}),(0,v.jsx)(d.JO,{icon:T?"chevron-up":"chevron-down",iconSize:16,style:{color:"#2E3D49"}})]}),(0,v.jsx)(d.UO,{isOpen:T,keepChildrenMounted:!0,children:n})]})}},27966:function(e,n,t){var i,a,r,o=t(93433),s=t(30168),d=(t(72791),t(87818)),l=t(79271),c=t(763),u=t(23861),p=t(60309),h=t(18202),g=t(44787),f=t(48016),m=t(99983),v=t(34135),x=t(35581),A=t(80184),y=g.ZP.div(i||(i=(0,s.Z)(["\n  color: ",";\n  font-size: 17px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n"])),p.w.OXFORD_BLUE),T=g.ZP.div(a||(a=(0,s.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),C=g.ZP.div(r||(r=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid #d0d7dd;\n  padding-top: 24px;\n  padding-bottom: 24px;\n"])));n.Z=function(e){var n,t=e.errorComponent,i=e.showDatasourceSavedText,a=void 0===i||i,r=(0,l.UO)(),s=(0,d.v9)((function(e){return(0,u.qO)(e,r.datasourceId)})),g=(0,d.v9)((function(e){return e.entities.plugins.formConfigs})),D=(0,d.v9)((function(e){var n;return(0,u.s3)(e,null!==(n=null===s||void 0===s?void 0:s.pluginId)&&void 0!==n?n:"")})),b=(null===s||void 0===s?void 0:s.userPermissions)||[],S=(0,d.v9)(x.SE),I=(0,v.Q0)([].concat((0,o.Z)(b),(0,o.Z)(S))),E=g[null!==(n=null===s||void 0===s?void 0:s.pluginId)&&void 0!==n?n:""];return(0,A.jsxs)(C,{children:[a&&(0,A.jsxs)(T,{children:[(0,A.jsxs)(y,{children:[(0,A.jsx)(h.b.SAVE_SUCCESS,{color:p.w.GREEN,height:30,width:30}),(0,A.jsx)("div",{style:{marginLeft:"12px"},children:"Datasource Saved"})]}),(0,A.jsx)(m.Z,{datasource:s,disabled:!I,eventFrom:"datasource-pane",plugin:D})]}),t,(0,A.jsx)("div",{style:{marginTop:a?"30px":""},children:(0,c.isNil)(E)||(0,c.isNil)(s)?void 0:(0,A.jsx)(f.Z,{config:E[0],datasource:s})})]})}},48016:function(e,n,t){t.d(n,{Z:function(){return b}});var i,a,r,o,s=t(15671),d=t(43144),l=t(60136),c=t(29388),u=t(30168),p=t(72791),h=t(763),g=t(60309),f=t(44787),m=t(23074),v=t(62895),x=t.n(v),A=t(80184),y=f.ZP.div(i||(i=(0,u.Z)(["\n  color: ",";\n  font-size: 14px;\n  display: inline-block;\n"])),g.w.DOVE_GRAY),T=f.ZP.div(a||(a=(0,u.Z)(["\n  font-size: 14px;\n  font-weight: 500;\n  display: inline-block;\n  margin-left: 5px;\n"]))),C=f.ZP.div(r||(r=(0,u.Z)(["\n  display: inline-block;\n  &:not(:first-child) {\n    margin-left: 10px;\n  }\n"]))),D=f.ZP.div(o||(o=(0,u.Z)(["\n  &:not(:first-child) {\n    margin-top: 9px;\n  }\n"]))),b=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(){var e;(0,s.Z)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).renderKVArray=function(n){try{var t=n[0].configProperty,i=t.split("[*]."),a=(0,h.get)(e.props.datasource,i[0],null);return n.reduce((function(e,n){var t=n.configProperty,i=n.label,r=t.split("[*].")[1];return a.forEach((function(n,t){e[t]||(e[t]=[]),e[t].push({key:r,label:i,value:n[r]})})),e}),[]).map((function(e,n){return(0,A.jsx)(D,{children:e.map((function(e){var i=e.key,a=e.label,r=e.value;return(0,A.jsxs)(C,{children:[(0,A.jsxs)(y,{children:[a,": "]}),(0,A.jsx)(T,{children:r})]},"".concat(t,".").concat(i,".").concat(n))}))},"".concat(t,".").concat(n))}))}catch(r){return}},e}return(0,d.Z)(t,[{key:"renderDatasourceSection",value:function(e){var n=this,t=this.props.datasource;return(0,A.jsx)(p.Fragment,{children:(0,h.map)(e.children,(function(e){if((0,m.xj)(t,e.hidden))return null;if("children"in e)return(0,m.dQ)(e.children)?n.renderKVArray(e.children):n.renderDatasourceSection(e);try{var i=e.configProperty,a=e.controlType,r=e.label,o=t.id+"_"+r;if("FIXED_KEY_INPUT"===a)return(0,A.jsxs)(D,{children:[(0,A.jsxs)(y,{children:[i.key,": "]})," ",(0,A.jsx)(T,{children:i.value})]},o);var s=(0,h.get)(t,i);if("DROP_DOWN"===a&&Array.isArray(e.options)){var d=e.options.find((function(e){return e.value===s}));d&&d.label&&(s=d.label)}if(!s||(0,h.isArray)(s)&&s.length<1)return;return(0,h.isArray)(s)?(0,A.jsxs)(D,{children:[(0,A.jsxs)(y,{children:[r,": "]}),s.map((function(e,n){var t=e.key,i=e.value;return(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{style:{display:"inline-block"},children:[(0,A.jsx)(y,{children:"Key: "}),(0,A.jsx)(T,{children:t})]}),(0,A.jsxs)(C,{children:[(0,A.jsx)(y,{children:"Value: "}),(0,A.jsx)(T,{children:i})]})]},"".concat(o,".").concat(n))}))]}):(0,A.jsxs)(D,{children:[(0,A.jsxs)(y,{children:[r,": "]})," ",(0,A.jsx)(T,{children:s})]},o)}catch(l){x().error(l)}}))},t.id)}},{key:"render",value:function(){return this.renderDatasourceSection(this.props.config)}}]),t}(p.Component)},72462:function(e,n,t){var i,a=t(1413),r=t(29439),o=t(30168),s=t(44787),d=t(72791),l=t(79271),c=t(9317),u=t(23861),p=t(87818),h=t(72014),g=t(40200),f=t(25341),m=t(77085),v=t(80184),x=s.ZP.div(i||(i=(0,o.Z)(["\n  margin-left: 10px;\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 24px;\n  display: flex;\n"])));n.Z=function(e){var n=(0,l.UO)(),t=(0,p.v9)((function(e){return(0,u.qO)(e,n.datasourceId)})),i=(0,p.v9)(u.ft),o=(0,d.useState)(!1),s=(0,r.Z)(o,2),A=s[0],y=s[1],T=(0,p.I0)(),C=(0,p.v9)((function(e){var n=t?t.id:"";return{isSaving:e.ui.datasourceName.isSaving[n],error:e.ui.datasourceName.errors[n]}})),D=d.useCallback((function(e){var n={};return i.filter((function(e){return e.id!==(null===t||void 0===t?void 0:t.id)&&!(e.name===(null===t||void 0===t?void 0:t.name)&&["REST API","Authenticated GraphQL API"].includes(e.pluginName)&&e.pluginId===(null===t||void 0===t?void 0:t.pluginId))})).map((function(e){n[e.name]=e})),!(0,h.Pz)(e,(0,a.Z)({},n))}),[i,t]),b=d.useCallback((function(e){return e&&0!==e.trim().length?!!D(e)&&"".concat(e," is already being used or is a restricted keyword."):"Please enter a valid name"}),[D]),S=(0,d.useCallback)((function(e){var n,i,a=e||"Untitled Datasource ABC";!b(e)&&t&&t.name!==e&&(t.id===m.m?T((0,g.CT)({id:null!==(n=null===t||void 0===t?void 0:t.id)&&void 0!==n?n:"",name:a})):T((0,g.ST)({id:null!==(i=null===t||void 0===t?void 0:t.id)&&void 0!==i?i:"",name:a})))}),[T,b,t]);return(0,d.useEffect)((function(){!1===C.isSaving&&!0===C.error?y(!0):!0===C.isSaving&&y(!1)}),[C.isSaving,C.error]),(0,v.jsxs)(x,{children:[(0,v.jsx)(c.ZP,{className:"t--edit-datasource-name",defaultValue:t?t.name:"",disabled:e.disabled,editInteractionKind:c.lK.SINGLE,forceDefault:A,isEditingDefault:e.focusOnMount,isInvalid:b,maxLength:30,onTextChanged:S,placeholder:"Datasource Name",type:"text",underline:!0,updating:C.isSaving}),C.isSaving&&(0,v.jsx)(f.$j,{size:16})]})}},93512:function(e,n,t){t.d(n,{E:function(){return R},Kk:function(){return V},Yb:function(){return F},cm:function(){return w},h4:function(){return O},nm:function(){return B},oh:function(){return z},vU:function(){return N},yY:function(){return U}});var i,a,r,o,s,d,l,c,u=t(15671),p=t(43144),h=t(60136),g=t(29388),f=t(1413),m=t(30168),v=t(72791),x=t(44787),A=t(763),y=t.n(A),T=t(39270),C=t(91142),D=t(23074),b=t(62895),S=t.n(b),I=t(75640),E=t(43617),Z=t(60309),k=t(18528),j=t(80184),P=x.ZP.div(i||(i=(0,m.Z)(["\n  height: 34px;\n  width: 34px;\n  padding: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ",";\n  border-radius: 100%;\n  margin-right: 8px;\n  flex-shrink: 0;\n  img {\n    height: 100%;\n    width: auto;\n  }\n"])),Z.w.GREY_200),w=function(e){return(0,j.jsx)(P,{children:(0,j.jsx)("img",(0,f.Z)({},e))})},F=x.ZP.div(a||(a=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]))),R=x.ZP.div(r||(r=(0,m.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  flex-grow: 1;\n  overflow-y: auto;\n  padding: 20px;\n"]))),N=x.ZP.div(o||(o=(0,m.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n"]))),O=x.ZP.div(s||(s=(0,m.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid ",";\n  padding-bottom: 24px;\n  //margin-top: 16px;\n"])),Z.w.ALTO),U=x.ZP.div(d||(d=(0,m.Z)(["\n  display: flex;\n"]))),V=(0,x.ZP)(k.zx)(l||(l=(0,m.Z)(["\n  &&& {\n    width: auto;\n    min-width: 74px;\n    margin-right: 9px;\n    min-height: 32px;\n\n    & > span {\n      max-width: 100%;\n    }\n  }\n"]))),z=(0,x.ZP)(k.zx)(c||(c=(0,m.Z)(["\n  padding: 10px 20px;\n  &&&& {\n    height: 36px;\n    max-width: 160px;\n    border: 1px solid ",";\n    width: auto;\n  }\n"])),Z.w.HIT_GRAY),B=function(e){(0,h.Z)(t,e);var n=(0,g.Z)(t);function t(){var e;(0,u.Z)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).requiredFields={},e.configDetails={},e.validate=function(){var n={},t=Object.keys(e.requiredFields),i=e.props.formData;return t.forEach((function(t){var a=e.requiredFields[t];if("KEYVALUE_ARRAY"===a.controlType){var r=a.configProperty.split("[*]."),o=y().get(i,r[0],[]),s=[];o.forEach((function(e,n){var t=Object.keys(e),i={};e[t[0]]||(i[t[0]]="This field is required",s[n]=i),e[t[1]]||(i[t[1]]="This field is required",s[n]=i)})),s.length&&y().set(n,r[0],s)}else{var d=y().get(i,t);y().isNil(d)&&y().set(n,t,"This field is required")}})),!y().isEmpty(n)},e.normalizeValues=function(){for(var n=e.props.formData,t={},i=Object.keys(e.configDetails),a=function(){var i=o[r];if("KEYVALUE_ARRAY"===e.configDetails[i]){var a=i.split("[*].");if(t[a[0]])return"continue";t[a[0]]=1;var s=y().get(n,a[0],[]),d=[];s.forEach((function(e){Object.values(e).every((function(e){return""===e}))||d.push(e)})),n=d.length?y().set(n,a[0],d):y().set(n,a[0],[])}},r=0,o=i;r<o.length;r++)a();return n},e.getTrimmedData=function(n){var t=(0,E.oL)(n),i=function(e){return e===E.Yk.ARRAY||e===E.Yk.OBJECT};return i(t)&&Object.keys(n).map((function(t){var a=(0,E.oL)(n[t]);i(a)?e.getTrimmedData(n[t]):a===E.Yk.STRING&&y().set(n,t,n[t].trim())})),n},e.renderForm=function(e){return(0,j.jsxs)(F,{className:"t--json-to-form-wrapper",children:[(0,j.jsx)(I.Z,{}),(0,j.jsx)(R,{className:"t--json-to-form-body",children:e})]})},e.renderMainSection=function(n,t){var i,a;return(0,D.xj)(e.props.formData,n.hidden,null===(i=e.props)||void 0===i||null===(a=i.featureFlags)||void 0===a?void 0:a.LIMITING_GOOGLE_SHEET_ACCESS)?null:(0,j.jsx)(C.Z,{defaultIsOpen:0===t||(null===n||void 0===n?void 0:n.isDefaultOpen),showSection:0!==t&&!(null!==n&&void 0!==n&&n.isDefaultOpen),showTopBorder:0!==t&&!(null!==n&&void 0!==n&&n.isDefaultOpen),title:n.sectionName,children:e.renderEachConfig(n)},n.sectionName)},e.renderSingleConfig=function(n,t){t=t||[];try{return e.setupConfig(n),(0,j.jsx)("div",{style:{marginTop:"16px"},children:(0,j.jsx)(T.Z,{config:n,formName:e.props.formName,multipleConfig:t})},n.configProperty)}catch(i){S().error(i)}},e.setupConfig=function(n){var t=n.configProperty,i=n.controlType,a=n.isRequired;e.configDetails[t]=i,a&&(e.requiredFields[t]=n)},e.renderKVArray=function(n){try{return n.forEach((function(n){return e.setupConfig(n)})),e.renderSingleConfig(n[n.length-1],n)}catch(t){S().error(t)}},e.renderEachConfig=function(n){return(0,j.jsx)("div",{children:y().map(n.children,(function(t){var i,a;if((0,D.xj)(e.props.formData,n.hidden,null===(i=e.props)||void 0===i||null===(a=i.featureFlags)||void 0===a?void 0:a.LIMITING_GOOGLE_SHEET_ACCESS))return null;if("children"in t){var r=t.children;return(0,D.dQ)(r)?e.renderKVArray(r):e.renderEachConfig(t)}return e.renderSingleConfig(t)}))},n.sectionName)},e}return(0,p.Z)(t,[{key:"componentDidMount",value:function(){this.requiredFields={},this.configDetails={}}},{key:"componentDidUpdate",value:function(e){e.datasourceId!==this.props.datasourceId&&(this.requiredFields={},this.configDetails={})}}]),t}(v.Component)},99983:function(e,n,t){var i,a=t(29439),r=t(30168),o=t(72791),s=t(33562),d=t(44787),l=t(18528),c=t(46898),u=t(9958),p=t(87818),h=t(35581),g=t(98132),f=t(80184),m=(0,d.ZP)(l.zx)(i||(i=(0,r.Z)(["\n  padding: 10px 10px;\n  font-size: 12px;\n  &&&& {\n    height: 36px;\n    width: 136px;\n  }\n  svg {\n    width: 14px;\n    height: 14px;\n  }\n  ."," {\n    svg {\n      width: 16px;\n      height: 16px;\n    }\n  }\n"])),l.PZ.ICON);n.Z=function(e){var n=e.datasource,t=e.disabled,i=e.plugin,r=e.style,d=void 0===r?{}:r,v=null===i||void 0===i?void 0:i.type,x=(0,o.useState)(!1),A=(0,a.Z)(x,2),y=A[0],T=A[1],C=(0,p.I0)(),D=(0,p.v9)((function(e){return e.entities.actions})),b=(0,p.v9)(h.zj),S=(0,o.useCallback)((function(t){null===t||void 0===t||t.stopPropagation(),v!==s.zV.API||n&&n.datasourceConfiguration&&n.datasourceConfiguration.url?b&&(T(!0),n&&C((0,u.xL)(b,e.eventFrom,null===n||void 0===n?void 0:n.id))):l.x7.show({text:(0,c.G$W)(),variant:l.$e.danger})}),[C,D,b,n,v]);return(0,f.jsx)(m,{className:"t--create-query",disabled:!!t,icon:"plus",iconPosition:l.gg.left,isLoading:y||e.isLoading,onClick:t?g.ZT:S,style:d,tag:"button",text:v===s.zV.DB||v===s.zV.SAAS?(0,c.tnH)(c.JsN):(0,c.tnH)(c.ne_)})}},51047:function(e,n,t){t(72791);var i=t(46898),a=t(18528),r=t(77085),o=t(34135),s=t(80184);n.Z=function(e){var n=e.datasourceId,t=e.datasourcePermissions,d=e.isOpen,l=e.onClose,c=e.onDiscard,u=e.onSave,p=e.saveButtonText,h=n===r.m,g=(0,o.iK)(t),f=!h&&!g;return(0,s.jsxs)(a.au,{canOutsideClickClose:!0,isOpen:d,onClose:l,title:(0,i.tnH)(i.Y5Q),width:"596px",children:[(0,s.jsx)("div",{className:"pb-8 space-y-3 ",children:(0,s.jsx)("p",{children:(0,i.tnH)(i.rRm)})}),(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,s.jsx)(a.zx,{category:a.WD.secondary,className:"t--datasource-modal-do-not-save",onClick:c,size:a.$u.medium,text:(0,i.tnH)(i.rvm)}),(0,s.jsx)(a.zx,{category:a.WD.primary,className:"t--datasource-modal-save",disabled:f,onClick:!f&&u,size:a.$u.medium,text:p})]})})]})}},34404:function(e,n,t){t.d(n,{Z:function(){return _e}});var i,a,r,o=t(1413),s=t(97326),d=t(15671),l=t(43144),c=t(60136),u=t(29388),p=t(72791),h=t(87818),g=t(22871),f=t(25697),m=t(38107),v=t(763),x=t.n(v),A=t(23861),y=t(40200),T=t(31591),C=t(88301),D=t(61120),b=t(30168),S=t(44787),I=t(25341),E=t(72462),Z=t(18528),k=t(80184),j=(0,S.ZP)(I.JO)(i||(i=(0,b.Z)(["\n  margin-right: 14.5px;\n  margin-left: 4px;\n  height: 100%;\n  background-color: #ef7541;\n  border: 2px solid rgba(239, 123, 99);\n  border-radius: 50%;\n"]))),P=S.ZP.div(a||(a=(0,b.Z)(["\n  background-color: rgba(239, 123, 99, 0.15);\n  padding: 10px 10px;\n  width: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n\n  margin-top: 18px;\n  margin-bottom: 19px;\n  margin-left: 6px;\n  width: 89%;\n"]))),w=S.ZP.div(r||(r=(0,b.Z)(["\n  width: 2px;\n  background-color: #ef7541;\n  position: absolute;\n  left: 0;\n  height: 100%;\n"])));function F(e){return(0,k.jsxs)(P,{children:[(0,k.jsx)(w,{}),(0,k.jsx)(j,{color:"#FDEBE8",icon:"help"}),(0,k.jsx)("div",{children:e.children})]})}var R,N,O,U=t(27966),V=t(73931),z=t(73073),B=t(73947),H=t(40641),L=t(72014),M=t(33562),_=t(93512),G=t(77239),q=t(34135),K=t(77085),Y=(0,B.x)().cloudHosting,W=(0,S.ZP)(I.JO)(R||(R=(0,b.Z)(["\n  svg {\n    width: 12px;\n    height: 18px;\n  }\n"]))),X=S.ZP.div(N||(N=(0,b.Z)(["\n  width: max-content;\n"]))),Q=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(){var e;(0,d.Z)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).getSanitizedData=function(){return e.getTrimmedData((0,o.Z)((0,o.Z)({},e.normalizeValues()),{},{name:e.props.datasourceName}))},e.openOmnibarReadMore=function(){(0,e.props.openOmnibarReadMore)("connect to databases"),H.Z.logEvent("OPEN_OMNIBAR",{source:"READ_MORE_DATASOURCE"})},e.renderDataSourceConfigForm=function(n){var t=e.props,i=t.canManageDatasource,a=t.datasource,r=t.datasourceButtonConfiguration,o=t.datasourceDeleteTrigger,s=t.datasourceId,d=t.formData,l=t.messages,c=t.pluginType,u=t.viewMode,p=s===K.m;return(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[!e.props.hiddenHeader&&(0,k.jsxs)(_.h4,{children:[(0,k.jsxs)(_.vU,{children:[(0,k.jsx)(_.cm,{alt:"Datasource",src:e.props.pluginImage}),(0,k.jsx)(E.Z,{disabled:!p&&!i,focusOnMount:e.props.isNewDatasource})]}),u&&(0,k.jsx)(_.oh,{category:Z.WD.secondary,className:"t--edit-datasource",onClick:function(){e.props.setDatasourceViewMode(!1)},text:"EDIT"})]}),l&&l.map((function(e,n){return(0,k.jsx)(Z.UW,{addMarginTop:!0,fill:!0,text:e,variant:Z.$e.warning},n)})),!e.props.hiddenHeader&&Y&&c===M.zV.DB&&!u&&(0,k.jsx)(X,{children:(0,k.jsxs)(F,{children:[(0,k.jsx)("span",{children:"Whitelist the IP ".concat((0,L.zO)(z.Sh),"  on your database instance to connect to it. ")}),(0,k.jsxs)("a",{onClick:e.openOmnibarReadMore,children:["Learn more ",(0,k.jsx)(W,{icon:"document-open"})]})]})}),(!u||s===K.m)&&(0,k.jsxs)(k.Fragment,{children:[x().isNil(n)?void 0:x().map(n,e.renderMainSection),""]}),u&&(0,k.jsx)(U.Z,{}),a&&(0,k.jsx)(G.ZP,{datasource:a,datasourceButtonConfiguration:r,datasourceDeleteTrigger:o,formData:d,getSanitizedFormData:x().memoize(e.getSanitizedData),isFormDirty:e.props.isFormDirty,isInvalid:e.validate(),shouldRender:!u,triggerSave:e.props.isDatasourceBeingSavedFromPopup})]})},e}return(0,l.Z)(t,[{key:"componentDidUpdate",value:function(e){e.datasourceId!==this.props.datasourceId&&(0,C.Z)((0,D.Z)(t.prototype),"componentDidUpdate",this).call(this,e)}},{key:"render",value:function(){var e=this.props,n=e.formConfig,t=e.viewMode;if(!this.props.initialized&&!t)return null;var i=this.renderDataSourceConfigForm(n);return this.renderForm(i)}}]),t}(_.nm),J=(0,h.$j)((function(e,n){var t,i,a=e.entities.datasources.list.find((function(e){return e.id===n.datasourceId})),r=a&&a.messages,o=(0,A.Ds)(e,null===n||void 0===n||null===(t=n.formData)||void 0===t?void 0:t.pluginId),s=a.userPermissions||[],d=(0,q.iK)(s);return{messages:r,datasource:a,datasourceButtonConfiguration:o,isReconnectingModalOpen:e.entities.datasources.isReconnectingModalOpen,canManageDatasource:d,datasourceName:null!==(i=null===a||void 0===a?void 0:a.name)&&void 0!==i?i:"",isDatasourceBeingSavedFromPopup:e.entities.datasources.isDatasourceBeingSavedFromPopup}}))((0,V.Z)({form:T._8,enableReinitialize:!0})(Q)),$=t(98132),ee=t(81619),ne=t(39270),te=t(72060),ie=t(39944),ae=t(71520),re=t(49764),oe=function(e){var n,t,i,a=x().get(e,"datasourceConfiguration.authentication.authenticationType",re.Gr.NONE),r=x().get(e,"datasourceConfiguration.connection",{ssl:{authType:re.vx.DEFAULT}}),o=de(a,e),s="Y"===x().get(e,"datasourceConfiguration.properties[0].value","N"),d=s?x().get(e,"datasourceConfiguration.properties[1].value"):"";return{datasourceId:e.id,workspaceId:e.workspaceId,pluginId:e.pluginId,isValid:e.isValid,url:null===(n=e.datasourceConfiguration)||void 0===n?void 0:n.url,headers:ue(null===(t=e.datasourceConfiguration)||void 0===t?void 0:t.headers),queryParameters:ue(null===(i=e.datasourceConfiguration)||void 0===i?void 0:i.queryParameters),isSendSessionEnabled:s,sessionSignatureKey:d,authType:a,authentication:o,connection:r}},se=function(e,n){if(e===re.Gr.NONE||!n)return null;if(le(e,n)||ce(e,n)){var t={authenticationType:re.Gr.OAuth2,accessTokenUrl:n.accessTokenUrl,clientId:n.clientId,headerPrefix:n.headerPrefix,scopeString:n.scopeString,clientSecret:n.clientSecret,isAuthorizationHeader:n.isAuthorizationHeader,isTokenHeader:n.isTokenHeader,audience:n.audience,resource:n.resource,sendScopeWithRefreshToken:n.sendScopeWithRefreshToken,refreshTokenClientCredentialsLocation:n.refreshTokenClientCredentialsLocation,useSelfSignedCert:n.useSelfSignedCert};if(le(e,n))return(0,o.Z)((0,o.Z)({},t),{},{grantType:re.qJ.ClientCredentials,customTokenParameters:ue(n.customTokenParameters)});if(ce(e,n))return(0,o.Z)((0,o.Z)({},t),{},{grantType:re.qJ.AuthorizationCode,authorizationUrl:n.authorizationUrl,isAuthorized:!!n.isAuthorized,customAuthenticationParameters:ue(n.customAuthenticationParameters)})}if(e===re.Gr.basic&&"username"in n)return{authenticationType:re.Gr.basic,username:n.username,password:n.password,secretExists:n.secretExists};if(e===re.Gr.apiKey&&"label"in n)return{authenticationType:re.Gr.apiKey,label:n.label,value:n.value,headerPrefix:n.headerPrefix,addTo:n.addTo};if(e===re.Gr.bearerToken&&"bearerToken"in n)return{authenticationType:re.Gr.bearerToken,bearerToken:n.bearerToken};return null},de=function(e,n){if(n&&n.datasourceConfiguration&&n.datasourceConfiguration.authentication){var t=n.datasourceConfiguration.authentication;if(le(e,t)||ce(e,t)){var i={authenticationType:re.Gr.OAuth2,accessTokenUrl:t.accessTokenUrl||"",clientId:t.clientId||"",headerPrefix:t.headerPrefix||"",scopeString:t.scopeString||"",clientSecret:t.clientSecret,isTokenHeader:!!t.isTokenHeader,isAuthorizationHeader:!!t.isAuthorizationHeader,audience:t.audience||"",resource:t.resource||"",sendScopeWithRefreshToken:t.sendScopeWithRefreshToken||!1,refreshTokenClientCredentialsLocation:t.refreshTokenClientCredentialsLocation||"BODY"};if(le(e,t))return(0,o.Z)((0,o.Z)({},i),{},{grantType:re.qJ.ClientCredentials,customTokenParameters:ue(t.customTokenParameters)});if(ce(e,t))return(0,o.Z)((0,o.Z)({},i),{},{grantType:re.qJ.AuthorizationCode,authorizationUrl:t.authorizationUrl||"",customAuthenticationParameters:ue(t.customAuthenticationParameters),isAuthorized:!!t.isAuthorized,isAuthorizationHeader:"undefined"===typeof t.isAuthorizationHeader||!!t.isAuthorizationHeader})}if(e===re.Gr.basic)return{authenticationType:re.Gr.basic,username:t.username||"",password:t.password||"",secretExists:t.secretExists};if(e===re.Gr.apiKey)return{authenticationType:re.Gr.apiKey,label:t.label||"",value:t.value||"",headerPrefix:t.headerPrefix||"",addTo:t.addTo||""};if(e===re.Gr.bearerToken)return{authenticationType:re.Gr.bearerToken,bearerToken:t.bearerToken||""}}},le=function(e,n){return e===re.Gr.OAuth2&&(!n||x().get(n,"grantType")===re.qJ.ClientCredentials)},ce=function(e,n){return e===re.Gr.OAuth2&&x().get(n,"grantType")===re.qJ.AuthorizationCode},ue=function(e){if(!Array.isArray(e))return[];var n=[];return e.forEach((function(e){Object.values(e).every((function(e){return""===e}))||n.push(e)})),n},pe=t(46898),he=t(91142),ge=t(303),fe=t(29439),me=t(76998),ve=t.n(me),xe=t(18613),Ae=t(29688),ye=S.ZP.div(O||(O=(0,b.Z)(["\n  display: flex;\n\n  div {\n    flex-basis: calc(100% - 90px);\n  }\n  input:disabled {\n    color: #555;\n  }\n  button {\n    flex-basis: 80px;\n    margin-left: 10px;\n  }\n"])));var Te,Ce,De,be=function(e){var n=e.copyText,t=(0,p.createRef)(),i=(0,p.useState)(!1),a=(0,fe.Z)(i,2),r=a[0],o=a[1];return(0,k.jsxs)(ye,{children:[(0,k.jsx)(xe.JK,{defaultValue:n,disabled:!0,fill:!0,onChange:function(){t.current&&t.current.setSelectionRange(0,n.length)}}),(0,k.jsx)(Ae.Y,{onClick:function(){var e;e=n,ve()(e),o(!0),setTimeout((function(){o(!1)}),3e3)},text:r?"Copied":"Copy"})]})},Se=t(75640),Ie=t(61386),Ee=t(28446),Ze=S.ZP.div(Te||(Te=(0,b.Z)(["\n  margin-top: 16px;\n"]))),ke=(0,S.ZP)(Z.zx)(Ce||(Ce=(0,b.Z)(["\n  &&&& {\n    width: 87px;\n    height: 32px;\n  }\n"]))),je=(0,S.ZP)(ke)(De||(De=(0,b.Z)(["\n  &&&& {\n    width: 180px;\n  }\n"]))),Pe=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(e){var i;return(0,d.Z)(this,t),(i=n.call(this,e)).ensureAPIKeyDefaultsAreCorrect=function(){if(i.props.formData){var e=i.props.formData.authentication;e&&x().get(e,"addTo")||i.props.change("authentication.addTo",re.b4.Header),e&&x().get(e,"headerPrefix")||i.props.change("authentication.headerPefix","ApiKeyAuthType.Header")}},i.ensureOAuthDefaultsAreCorrect=function(){if(i.props.formData){var e=i.props.formData.authentication;e&&x().get(e,"grantType")||i.props.change("authentication.grantType",re.qJ.ClientCredentials),void 0===x().get(e,"isTokenHeader")&&i.props.change("authentication.isTokenHeader",!0),i.isDirty("authentication.headerPrefix")||void 0!==x().get(e,"headerPrefix")||i.props.change("authentication.headerPrefix","Bearer"),x().get(e,"grantType")===re.qJ.AuthorizationCode&&void 0===x().get(e,"isAuthorizationHeader")&&i.props.change("authentication.isAuthorizationHeader",!0),x().get(e,"grantType")===re.qJ.ClientCredentials&&void 0===x().get(e,"isAuthorizationHeader")&&i.props.change("authentication.isAuthorizationHeader",!1),x().get(e,"grantType")===re.qJ.AuthorizationCode&&(void 0!==x().get(e,"sendScopeWithRefreshToken")&&""!==x().get(e,"sendScopeWithRefreshToken")||i.props.change("authentication.sendScopeWithRefreshToken",!1)),x().get(e,"grantType")===re.qJ.AuthorizationCode&&(void 0!==x().get(e,"refreshTokenClientCredentialsLocation")&&""!==x().get(e,"refreshTokenClientCredentialsLocation")||i.props.change("authentication.refreshTokenClientCredentialsLocation","BODY"))}},i.validate=function(){var e=i.props,n=e.datasource,t=e.datasourceId,a=e.formData,r=t===K.m,o=(0,q.iK)((null===n||void 0===n?void 0:n.userPermissions)||[]);return!a||(!a.url||!r&&!o)},i.getSanitizedFormData=function(){return function(e,n){var t=se(n.authType,n.authentication);return(0,o.Z)((0,o.Z)({},e),{},{datasourceConfiguration:{url:n.url,headers:ue(n.headers),queryParameters:ue(n.queryParameters),properties:[{key:"isSendSessionEnabled",value:n.isSendSessionEnabled?"Y":"N"},{key:"sessionSignatureKey",value:n.sessionSignatureKey}],authentication:t,connection:n.connection}})}(i.props.datasource,i.props.formData)},i.save=function(e){i.props.toggleSaveActionFlag(!0);var n=i.getSanitizedFormData();if(H.Z.logEvent("SAVE_DATA_SOURCE_CLICK",{pageId:i.props.pageId,appId:i.props.applicationId}),i.props.datasource.id!==K.m)return i.props.updateDatasource(n,e);i.props.createDatasource((0,o.Z)((0,o.Z)({},n),{},{name:i.props.datasourceName}),e)},i.createApiAction=function(){var e,n,t,a,r,s,d=i.props,l=d.actions,c=d.datasource,u=d.pageId;if(c&&c.datasourceConfiguration&&c.datasourceConfiguration.url){var p=(0,$.U$)(l,u||""),h=null!==(e=null===(n=i.props.datasource)||void 0===n||null===(t=n.datasourceConfiguration)||void 0===t?void 0:t.headers)&&void 0!==e?e:[],g=null!==(a=null===(r=i.props.datasource)||void 0===r||null===(s=r.datasourceConfiguration)||void 0===s?void 0:s.queryParameters)&&void 0!==a?a:[],f=(0,o.Z)((0,o.Z)({},ie.q),{},{headers:h.length?h:ie.q.headers,queryParameters:g.length?g:ie.q.queryParameters});i.save((0,ae.B8)({name:p,pageId:u,pluginId:c.pluginId,datasource:{id:c.id},eventData:{actionType:"API",from:"datasource-pane"},actionConfiguration:f}))}else Z.x7.show({text:"Unable to create API. Try adding a url to the datasource",variant:Z.$e.danger})},i.urlValidator=function(e){return e?new RegExp("^(http|https)://").test(e)?{isValid:!0,message:""}:{isValid:!1,message:(0,pe.tnH)(pe.uuD)}:{isValid:!0,message:""}},i.render=function(){var e=i.props,n=e.datasource,t=e.formData,a=e.hiddenHeader,r=e.pageId;return(0,k.jsxs)(_.Yb,{children:[!a&&(0,k.jsx)(Se.Z,{}),(0,k.jsx)(_.E,{children:(0,k.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[i.renderHeader(),i.renderEditor(),(0,k.jsx)(G.ZP,{datasource:n,datasourceButtonConfiguration:[G.O8.DELETE,G.O8.SAVE],datasourceDeleteTrigger:i.props.datasourceDeleteTrigger,formData:t,getSanitizedFormData:i.getSanitizedFormData,isFormDirty:i.props.isFormDirty,isInvalid:i.validate(),pageId:r,shouldRender:!0})]})})]})},i.renderHeader=function(){var e=i.props,n=e.datasource,t=e.datasourceId,a=e.hiddenHeader,r=e.isNewDatasource,o=e.pluginImage,s=t===K.m,d=(0,q.iK)((null===n||void 0===n?void 0:n.userPermissions)||[]);return a?null:(0,k.jsx)(_.h4,{children:(0,k.jsxs)(_.vU,{children:[(0,k.jsx)(_.cm,{alt:"Datasource",src:o}),(0,k.jsx)(E.Z,{disabled:!s&&!d,focusOnMount:r})]})})},i.renderEditor=function(){var e=i.props,n=e.datasource,t=e.datasourceId,a=e.formData,r=e.isSaving,o=e.messages,s=e.pageId,d=x().get(n,"datasourceConfiguration.authentication.isAuthorized",!1);if(a){var l=a.authentication;return(0,k.jsxs)(k.Fragment,{children:[o&&o.map((function(e,n){return(0,k.jsx)(Z.UW,{fill:!0,text:e,variant:Z.$e.warning},n)})),i.renderGeneralSettings(),i.renderAuthFields(),i.renderOauth2AdvancedSettings(),i.renderSelfSignedCertificateFields(),a.authType&&a.authType===re.Gr.OAuth2&&x().get(l,"grantType")===re.qJ.AuthorizationCode&&(0,k.jsx)(Ze,{children:(0,k.jsx)(je,{category:Z.WD.primary,className:"t--save-and-authorize-datasource",disabled:i.validate(),isLoading:r,onClick:function(){return i.save((0,y.l8)(s,t,M.zV.API))},tag:"button",text:d?"Save and Re-Authorize":"Save and Authorize",variant:Z.$e.success})})]})}},i.renderGeneralSettings=function(){var e=i.props.formData;return(0,k.jsxs)("section",{"data-cy":"section-General","data-replay-id":"section-General",children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("url"),children:i.renderInputTextControlViaFormControl({configProperty:"url",label:"URL",placeholderText:"https://example.com",dataType:"TEXT",encrypted:!1,isRequired:!0,fieldValidator:i.urlValidator})}),(0,k.jsx)(Ze,{className:"t--headers-array","data-replay-id":btoa("headers"),children:i.renderKeyValueControlViaFormControl("headers","Headers","",!1)}),(0,k.jsx)(Ze,{"data-replay-id":btoa("queryParameters"),children:i.renderKeyValueControlViaFormControl("queryParameters","Query Parameters","",!1)}),(0,k.jsx)(Ze,{"data-replay-id":btoa("isSendSessionEnabled"),children:i.renderDropdownControlViaFormControl("isSendSessionEnabled",[{label:"Yes",value:!0},{label:"No",value:!1}],"Send Appsmith signature header","",!0,"Header key: X-APPSMITH-SIGNATURE")}),e.isSendSessionEnabled&&(0,k.jsx)(Ze,{"data-replay-id":btoa("sessionSignatureKey"),children:i.renderInputTextControlViaFormControl({configProperty:"sessionSignatureKey",label:"Session Details Signature Key",placeholderText:"",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authType"),children:i.renderDropdownControlViaFormControl("authType",[{label:"None",value:re.Gr.NONE},{label:"Basic",value:re.Gr.basic},{label:"OAuth 2.0",value:re.Gr.OAuth2},{label:"API Key",value:re.Gr.apiKey},{label:"Bearer Token",value:re.Gr.bearerToken}],"Authentication Type","",!1,"")})]})},i.renderSelfSignedCertificateFields=function(){var e=i.props.formData.connection;if((null===e||void 0===e?void 0:e.ssl.authType)===re.vx.SELF_SIGNED_CERTIFICATE)return(0,k.jsx)(he.Z,{defaultIsOpen:!0,title:"Certificate Details",children:i.renderFilePickerControlViaFormControl("connection.ssl.certificateFile","Upload Certificate","",!1,!0)})},i.renderAuthFields=function(){var e,n=i.props.formData.authType;if(n===re.Gr.OAuth2?e=i.renderOauth2():n===re.Gr.basic?e=i.renderBasic():n===re.Gr.apiKey?e=i.renderApiKey():n===re.Gr.bearerToken&&(e=i.renderBearerToken()),e)return(0,k.jsx)(he.Z,{defaultIsOpen:!0,title:"Authentication",children:e})},i.renderApiKey=function(){var e=i.props.formData.authentication;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.label"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.label",label:"Key",placeholderText:"api_key",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{children:i.renderInputTextControlViaFormControl({configProperty:"authentication.value",label:"Value",placeholderText:"value",dataType:"TEXT",encrypted:!0,isRequired:!1})}),(0,k.jsx)(Ze,{children:i.renderDropdownControlViaFormControl("authentication.addTo",[{label:"Query Params",value:re.b4.QueryParams},{label:"Header",value:re.b4.Header}],"Add To","",!1,"")}),"header"==x().get(e,"addTo")&&(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.headerPrefix"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.headerPrefix",label:"Header Prefix",placeholderText:"eg: Bearer ",dataType:"TEXT",encrypted:!1,isRequired:!1})})]})},i.renderBearerToken=function(){return(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.bearerToken"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.bearerToken",label:"Bearer Token",placeholderText:"Bearer Token",dataType:"TEXT",encrypted:!0,isRequired:!1})})},i.renderBasic=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.username"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.username",label:"Username",placeholderText:"Username",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.password"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.password",label:"Password",placeholderText:"Password",dataType:"PASSWORD",encrypted:!0,isRequired:!1,isSecretExistsPath:"authentication.secretExists.password"})})]})},i.renderOauth2=function(){var e=i.props.formData.authentication;if(e){var n;switch(x().get(e,"grantType")){case re.qJ.AuthorizationCode:n=i.renderOauth2AuthorizationCode();break;case re.qJ.ClientCredentials:n=i.renderOauth2ClientCredentials()}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.grantType"),children:i.renderDropdownControlViaFormControl("authentication.grantType",[{label:"Client Credentials",value:re.qJ.ClientCredentials},{label:"Authorization Code",value:re.qJ.AuthorizationCode}],"Grant Type","",!1,"")}),n]})}},i.renderOauth2Common=function(){var e=i.props.formData;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.isTokenHeader"),children:i.renderDropdownControlViaFormControl("authentication.isTokenHeader",[{label:"Request Header",value:!0},{label:"Request URL",value:!1}],"Add Access Token To","",!1,"")}),x().get(e.authentication,"isTokenHeader")&&(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.headerPrefix"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.headerPrefix",label:"Header Prefix",placeholderText:"eg: Bearer ",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.accessTokenUrl"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.accessTokenUrl",label:"Access Token URL",placeholderText:"https://example.com/login/oauth/access_token",dataType:"TEXT",encrypted:!1,isRequired:!1,fieldValidator:i.urlValidator})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.clientId"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.clientId",label:"Client ID",placeholderText:"Client ID",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.clientSecret"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.clientSecret",label:"Client Secret",placeholderText:"Client Secret",dataType:"PASSWORD",encrypted:!0,isRequired:!1,isSecretExistsPath:"authentication.secretExists.clientSecret"})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.scopeString"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.scopeString",label:"Scope(s)",placeholderText:"e.g. read, write",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.isAuthorizationHeader"),children:i.renderDropdownControlViaFormControl("authentication.isAuthorizationHeader",[{label:"Send as Basic Auth header",value:!0},{label:"Send client credentials in body",value:!1}],"Client Authentication","",!1,"")})]})},i.renderOauth2AdvancedSettings=function(){var e=i.props.formData,n=e.authentication,t=e.authType,a=e.connection,r=x().get(n,"grantType")===re.qJ.AuthorizationCode,o=t===re.Gr.OAuth2,s=x().get(a,"ssl.authType")===re.vx.SELF_SIGNED_CERTIFICATE;return(0,k.jsxs)(he.Z,{title:"Advanced Settings",children:[o&&r&&(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.sendScopeWithRefreshToken"),children:i.renderDropdownControlViaFormControl("authentication.sendScopeWithRefreshToken",[{label:"Yes",value:!0},{label:"No",value:!1}],"Send scope with refresh token","",!1,"")}),o&&r&&(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.refreshTokenClientCredentialsLocation"),children:i.renderDropdownControlViaFormControl("authentication.refreshTokenClientCredentialsLocation",[{label:"Body",value:"BODY"},{label:"Header",value:"HEADER"}],"Send client credentials with (on refresh token):","",!1,"")}),(0,k.jsx)(Ze,{"data-replay-id":btoa("ssl"),children:i.renderDropdownControlViaFormControl("connection.ssl.authType",[{label:"No",value:"DEFAULT"},{label:"Yes",value:"SELF_SIGNED_CERTIFICATE"}],"Use Self-signed certificate","",!0,"","DEFAULT")}),o&&s&&(0,k.jsx)(Ze,{"data-replay-id":btoa("selfsignedcert"),children:i.renderCheckboxViaFormControl("authentication.useSelfSignedCert","Use Self-Signed Certificate for Authorization requests","",!1)})]})},i.renderOauth2CommonAdvanced=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.audience"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.audience",label:"Audience",placeholderText:"https://example.com/oauth/audience",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.resource"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.resource",label:"Resource",placeholderText:"https://example.com/oauth/resource",dataType:"TEXT",encrypted:!1,isRequired:!1})})]})},i.renderOauth2ClientCredentials=function(){return(0,k.jsxs)(k.Fragment,{children:[i.renderOauth2Common(),i.renderOauth2CommonAdvanced()]})},i.renderOauth2AuthorizationCode=function(){var e=i.props.formData,n=window.location.origin+"/api/v1/datasources/authorize";return(0,k.jsxs)(k.Fragment,{children:[i.renderOauth2Common(),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.authorizationUrl"),children:i.renderInputTextControlViaFormControl({configProperty:"authentication.authorizationUrl",label:"Authorization URL",placeholderText:"https://example.com/login/oauth/authorize",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,k.jsx)(Ze,{children:(0,k.jsxs)("div",{style:{width:"20vw"},children:[(0,k.jsxs)(ge.Z,{children:["Redirect URL",(0,k.jsx)("br",{}),(0,k.jsx)(te.j,{children:"Url that the oauth server should redirect to"})]}),(0,k.jsx)(be,{copyText:n})]})}),(0,k.jsx)(Ze,{"data-replay-id":btoa("authentication.customAuthenticationParameters"),children:i.renderKeyValueControlViaFormControl("authentication.customAuthenticationParameters","Custom Authentication Parameters","",!1)}),!x().get(e.authentication,"isAuthorizationHeader",!0)&&i.renderOauth2CommonAdvanced()]})},i.state={confirmDelete:!1},i}return(0,l.Z)(t,[{key:"componentDidMount",value:function(){this.props.initializeReplayEntity(this.props.datasource.id,this.props.initialValues)}},{key:"componentDidUpdate",value:function(e){var n=this;if(this.props.formData){if(this.state.confirmDelete)x().debounce((function(){n.props.isDeleting||n.setState({confirmDelete:!1})}),2200)();var t=this.props.formData.authType;t===re.Gr.OAuth2?this.ensureOAuthDefaultsAreCorrect():t===re.Gr.apiKey&&this.ensureAPIKeyDefaultsAreCorrect(),e.triggerSave!==this.props.triggerSave&&this.props.triggerSave&&this.save()}}},{key:"isDirty",value:function(e){var n=this.props.formMeta;return x().get(n,e+".visited",!1)}},{key:"renderInputTextControlViaFormControl",value:function(e){var n=e.configProperty,t=e.dataType,i=e.encrypted,a=e.fieldValidator,r=e.isRequired,o=e.isSecretExistsPath,s=e.label,d=e.placeholderText;return(0,k.jsx)(ne.Z,{config:{id:"",isValid:!1,isRequired:r,controlType:"INPUT_TEXT",dataType:t,configProperty:n,encrypted:i,label:s,conditionals:{},placeholderText:d,formName:T.b6,validator:a,isSecretExistsPath:o},formName:T.b6,multipleConfig:[]})}},{key:"renderDropdownControlViaFormControl",value:function(e,n,t,i,a,r,o){var s={id:"",isValid:!1,isRequired:a,controlType:"DROP_DOWN",configProperty:e,options:n,subtitle:r,label:t,conditionals:{},placeholderText:i,formName:T.b6,initialValue:o};return(0,k.jsx)(ne.Z,{config:s,formName:T.b6,multipleConfig:[]})}},{key:"renderKeyValueControlViaFormControl",value:function(e,n,t,i){var a={id:"",configProperty:e,isValid:!1,controlType:"KEYVALUE_ARRAY",placeholderText:t,label:n,conditionals:{},formName:T.b6,isRequired:i};return(0,k.jsx)(ne.Z,{config:a,formName:T.b6,multipleConfig:[]})}},{key:"renderFilePickerControlViaFormControl",value:function(e,n,t,i,a){var r={id:"",configProperty:e,isValid:!1,controlType:"FILE_PICKER",placeholderText:t,encrypted:a,label:n,conditionals:{},formName:T.b6,isRequired:i};return(0,k.jsx)(ne.Z,{config:r,formName:T.b6,multipleConfig:[]})}},{key:"renderCheckboxViaFormControl",value:function(e,n,t,i){return(0,k.jsx)(ne.Z,{config:{id:"",isValid:!1,isRequired:i,controlType:"CHECKBOX",configProperty:e,label:n,conditionals:{},placeholderText:t,formName:T.b6},formName:T.b6})}}]),t}(p.Component),we=(0,h.$j)((function(e,n){var t,i=e.entities.datasources.list.find((function(e){return e.id===n.datasourceId})),a=i&&i.messages;return{initialValues:oe(i),datasource:i,actions:e.entities.actions,formData:(0,g.Z)(T.b6)(e),formMeta:(0,ee.Z)(T.b6)(e),messages:a,datasourceName:null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:""}}),(function(e){return{initializeReplayEntity:function(n,t){return e((0,Ie.n6)(n,t,Ee.lU.DATASOURCE))},updateDatasource:function(n,t){return e((0,y.Y_)(n,t))},deleteDatasource:function(n){e((0,y.Vl)({id:n}))},createDatasource:function(n,t){return e((0,y.nS)(n,t))},toggleSaveActionFlag:function(n){return e((0,y.Tv)(n))}}}))((0,V.Z)({form:T.b6,enableReinitialize:!0})(Pe)),Fe=t(75691),Re=t(77324),Ne=t(95708),Oe=t(24843),Ue=t(35581),Ve=t(7526),ze=t(33620),Be=t(17823),He=t(51047),Le=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(){return(0,d.Z)(this,t),n.apply(this,arguments)}return(0,l.Z)(t,[{key:"componentDidUpdate",value:function(e){"RestAPIDatasourceForm"!==this.props.pluginDatasourceForm&&this.props.datasourceId&&this.props.datasourceId!==e.datasourceId&&this.props.switchDatasource(this.props.datasourceId)}},{key:"componentDidMount",value:function(){if(this.props.datasourceId&&"RestAPIDatasourceForm"!==this.props.pluginDatasourceForm&&this.props.switchDatasource(this.props.datasourceId),"RestAPIDatasourceForm"===this.props.pluginDatasourceForm&&this.props.location){var e=new URLSearchParams(this.props.location.search),n=e.get("response_status"),t=e.get("display_message");if(n){var i=pe.GkW,a=Z.$e.danger;"success"===n?(i=pe.B5v,a=Z.$e.success):"appsmith_error"===n&&(i=pe.uuC),Z.x7.show({text:t||(0,pe.tnH)(i),variant:a})}}}},{key:"render",value:function(){var e=this.props,n=e.datasourceDeleteTrigger,t=e.datasourceId,i=e.formConfig,a=e.formData,r=e.fromImporting,o=e.isDeleting,s=e.isFormDirty,d=e.isNewDatasource,l=e.isSaving,c=e.isTesting,u=e.openOmnibarReadMore,p=e.pageId,h=e.pluginId,g=e.pluginImages,f=e.pluginType,m=e.setDatasourceViewMode,v=e.viewMode;return(0,k.jsx)(J,{applicationId:this.props.applicationId,datasourceDeleteTrigger:n,datasourceId:t,formConfig:i,formData:a,formName:T._8,hiddenHeader:r,isDeleting:o,isFormDirty:s,isNewDatasource:d,isSaving:l,isTesting:c,openOmnibarReadMore:u,pageId:p,pluginImage:g[h],pluginType:f,setDatasourceViewMode:m,viewMode:v&&!r})}}]),t}(p.Component),Me=function(e){(0,c.Z)(t,e);var n=(0,u.Z)(t);function t(e){var i;return(0,d.Z)(this,t),(i=n.call(this,e)).state={showDialog:!1,routesBlocked:!1,readUrlParams:!1,unblock:function(){},navigation:function(){}},i.closeDialog=i.closeDialog.bind((0,s.Z)(i)),i.onSave=i.onSave.bind((0,s.Z)(i)),i.onDiscard=i.onDiscard.bind((0,s.Z)(i)),i.datasourceDeleteTrigger=i.datasourceDeleteTrigger.bind((0,s.Z)(i)),i}return(0,l.Z)(t,[{key:"componentDidUpdate",value:function(e){e.viewMode===this.props.viewMode||this.props.viewMode||this.blockRoutes(),this.props.isDatasourceBeingSaved&&this.closeDialogAndUnblockRoutes(),this.setViewModeFromQueryParams(),(0,v.isEqual)(this.props.defaultKeyValueArrayConfig,e.defaultKeyValueArrayConfig)||this.props.initializeFormWithDefaults(this.props.pluginType)}},{key:"componentDidMount",value:function(){if(!this.props.datasource&&this.props.match.params.datasourceId===K.m){var e=new URL(window.location.href),n=null===e||void 0===e?void 0:e.searchParams.get("pluginId");this.props.createTempDatasource({pluginId:n})}this.props.viewMode||this.blockRoutes(),this.props.pluginDatasourceForm===Ne.oY.RestAPIDatasourceForm&&this.setViewModeFromQueryParams()}},{key:"setViewModeFromQueryParams",value:function(){var e=this,n=(0,Be.vl)();this.props.viewMode&&("false"===n.viewMode&&!this.state.readUrlParams||this.props.isNewDatasource)&&this.setState({readUrlParams:!0},(function(){e.props.setDatasourceViewMode(!1)}))}},{key:"componentWillUnmount",value:function(){this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.state.unblock&&this.state.unblock(),this.props.resetDefaultKeyValPairFlag()}},{key:"routesBlockFormChangeCallback",value:function(){this.props.isFormDirty?this.state.routesBlocked||this.blockRoutes():this.state.routesBlocked&&this.closeDialogAndUnblockRoutes(!0)}},{key:"blockRoutes",value:function(){var e,n,t=this;this.setState({unblock:null===(e=this.props)||void 0===e||null===(n=e.history)||void 0===n?void 0:n.block((function(e){if(e.pathname+e.search!==t.props.history.location.pathname+t.props.history.location.search&&t.props.isFormDirty)return t.setState({navigation:function(){return t.props.history.push(e.pathname+e.search,e.state)},showDialog:!0,routesBlocked:!0},t.routesBlockFormChangeCallback.bind(t)),!1}))})}},{key:"closeDialog",value:function(){this.setState({showDialog:!1})}},{key:"onSave",value:function(){this.props.toggleSaveActionFromPopupFlag(!0)}},{key:"onDiscard",value:function(){this.closeDialogAndUnblockRoutes(),this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.state.navigation()}},{key:"closeDialogAndUnblockRoutes",value:function(e){this.closeDialog(),this.state.unblock&&this.state.unblock(),this.props.toggleSaveActionFlag(!1),this.props.toggleSaveActionFromPopupFlag(!1),this.setState({routesBlocked:!1}),e&&this.state.navigation()}},{key:"datasourceDeleteTrigger",value:function(){this.state.unblock&&this.state.unblock()}},{key:"resetDefaultKeyValPairFlag",value:function(){this.props.defaultKeyValueArrayConfig.length>0&&this.props.initialValue&&this.props.resetDefaultKeyValPairFlag()}},{key:"renderSaveDisacardModal",value:function(){var e;return(0,k.jsx)(He.Z,{datasourceId:this.props.datasourceId,datasourcePermissions:(null===(e=this.props.datasource)||void 0===e?void 0:e.userPermissions)||[],isOpen:this.state.showDialog,onClose:this.closeDialog,onDiscard:this.onDiscard,onSave:this.onSave,saveButtonText:(0,pe.tnH)(pe.IP_)})}},{key:"render",value:function(){var e=this.props,n=e.datasourceId,t=e.fromImporting,i=e.history,a=e.isDeleting,r=e.isFormDirty,s=e.isNewDatasource,d=e.isSaving,l=e.location,c=e.pageId,u=e.pluginDatasourceForm,p=e.pluginId,h=e.pluginImages,g=e.pluginPackageName,f=e.pluginType,m=e.viewMode;return!p&&n?(0,k.jsx)(Fe.Z,{}):"RestAPIDatasourceForm"!==u||m&&!t?"SAAS"===f?t?(0,k.jsx)(Oe.Z,{datasourceId:n,hiddenHeader:!0,pageId:c,pluginPackageName:g}):(i.push((0,Ve.AP)({pageId:c,pluginPackageName:g,datasourceId:n})),null):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Le,(0,o.Z)((0,o.Z)({},this.props),{},{datasourceDeleteTrigger:this.datasourceDeleteTrigger,datasourceId:n,pageId:c})),this.renderSaveDisacardModal()]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(we,{applicationId:this.props.applicationId,datasourceDeleteTrigger:this.datasourceDeleteTrigger,datasourceId:n,hiddenHeader:t,isDeleting:a,isFormDirty:r,isNewDatasource:s,isSaving:d,location:l,pageId:c,pluginImage:h[p],triggerSave:this.props.triggerSave}),this.renderSaveDisacardModal()]})}}]),t}(p.Component),_e=(0,h.$j)((function(e,n){var t,i,a,r,o,s,d,l,c,u,p,h=null!==(t=n.datasourceId)&&void 0!==t?t:null===(i=n.match)||void 0===i||null===(a=i.params)||void 0===a?void 0:a.datasourceId,x=e.ui.datasourcePane,y=e.entities,C=y.datasources,D=y.plugins,b=(0,ze.dZ)(e),S=(0,A.qO)(e,h),I=D.formConfigs,E=(0,g.Z)(T._8)(e),Z=(0,v.get)(S,"pluginId",""),k=(0,A.s3)(e,Z),j=(0,Ue.AJ)(e),P=j.applicationSlug,w=j.pageSlug,F="API"===(null===k||void 0===k?void 0:k.type)?T.b6:T._8,R=h===K.m||(0,f.Z)(F)(e),N=(0,m.Z)(F)(e),O=null===x||void 0===x?void 0:x.defaultKeyValueArrayConfig;return{datasourceId:h,pluginImages:(0,A.x8)(e),formData:E,fromImporting:null!==(r=n.fromImporting)&&void 0!==r&&r,pluginId:Z,isSaving:C.loading,isDeleting:!(null===S||void 0===S||!S.isDeleting),isTesting:C.isTesting,formConfig:I[Z]||[],isNewDatasource:x.newDatasource===K.m,pageId:null!==(o=n.pageId)&&void 0!==o?o:null===(s=n.match)||void 0===s||null===(d=s.params)||void 0===d?void 0:d.pageId,viewMode:null!==b&&void 0!==b?b:!n.fromImporting,pluginType:null!==(l=null===k||void 0===k?void 0:k.type)&&void 0!==l?l:"",pluginDatasourceForm:null!==(c=null===k||void 0===k?void 0:k.datasourceComponent)&&void 0!==c?c:Ne.oY.AutoForm,pluginPackageName:null!==(u=null===k||void 0===k?void 0:k.packageName)&&void 0!==u?u:"",applicationId:null!==(p=n.applicationId)&&void 0!==p?p:(0,Ue.aS)(e),applicationSlug:P,pageSlug:w,isDatasourceBeingSaved:C.isDatasourceBeingSaved,triggerSave:C.isDatasourceBeingSavedFromPopup,isFormDirty:R,datasource:S,defaultKeyValueArrayConfig:O,initialValue:N}}),(function(e,n){return{switchDatasource:function(t){e((0,y.XQ)(t,n.fromImporting))},setDatasourceViewMode:function(n){return e((0,y.Ui)(n))},openOmnibarReadMore:function(n){e((0,Re.nt)(n)),e((0,Re.Lm)())},discardTempDatasource:function(){return e((0,y.iM)())},deleteTempDSFromDraft:function(){return e((0,y.c2)())},toggleSaveActionFlag:function(n){return e((0,y.Tv)(n))},toggleSaveActionFromPopupFlag:function(n){return e((0,y.V)(n))},createTempDatasource:function(n){return e((0,y.Pd)(n))},resetDefaultKeyValPairFlag:function(){return e((0,y.PH)())},initializeFormWithDefaults:function(n){return e((0,y.iR)(n))}}}))(Me)},75691:function(e,n,t){t.d(n,{Z:function(){return u}});var i,a=t(30168),r=(t(72791),t(44787)),o=t(18528),s=t(46898),d=t(79271),l=t(80184),c=r.ZP.div(i||(i=(0,a.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  align-items: center;\n  justify-content: flex-start;\n  padding-top: 15%;\n  background: #fcfcfc;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  .page-details {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 450px;\n  }\n\n  .bold-text {\n    font-weight: ",";\n    font-size: 24px;\n    margin-top: 20px;\n  }\n\n  .page-message {\n    margin-top: 14px;\n    color: #716e6e;\n    font-size: 14px;\n    line-height: 17px;\n    letter-spacing: 0.733333px;\n  }\n\n  .page-unavailable-img {\n    width: 72px;\n  }\n\n  .button-position {\n    margin-top: 14px;\n  }\n"])),(function(e){return e.theme.fontWeights[3]}));var u=function(e){var n=(0,d.k6)();return(0,l.jsxs)(c,{children:[(0,l.jsx)("img",{alt:"Page Unavailable",className:"page-unavailable-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABWCAMAAAAHZWO6AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB+FBMVEUAAAD////qYyfnYCj////naCjnYifnYSjkXicAAADTXyQAAAAAAADlYibgXyfpYie/WSYAAADnYifiXyfoYifIWiKAgIDIUyLkYibkYCfZWiUAAADmYibnYifbXiTeXia2VSTPWinlYiZVVVXmYSjdXybmYCZAQEDZXiUzMzPiXyWyTBnlYCbNXCPkYifUWybiXyjNVSPdXiXeXiTiYSfkYCbdXyXkYCfgXiaqVRjJVyjgXyTDVyLiXyaqSRjQViTYWyXPVyTFUyDAUR+8UCC6Tx66TyC5TiC7TyC+UCHBUiDJVSPTWSPZXCQAAAAAAAAAAAAHBwcAAAAAAAAAAAAAAAAAAAAEBAQEBAQAAAAEBAQAAAAAAAAGBgYICAgAAAAcHBwkJCQQEBAAAAAAAAAAAAAAAAAFBQUEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAKCgoICAgGBgYGBgYFBQUAAAAGBgYAAAAFBQUAAAAAAAAAAAAAAAAAAAAAAAAHBwcAAAAAAAAAAAAAAAAAAAAUFBQAAAANDQ0MDAwNDQ0AAAAAAAAqKioAAAAZGRnoYifwnXjqbDTrdkL87OT2xK7////uiV352Mn86+TzsJP+9fH1u6Dtf1DtiV3yp4XzsZP518n+9fL4zrz4zrvsf0/74tfvk2rypoUYorMSAAAAj3RSTlMAAG8gASDAoEEBIwME0WPvFAXgg/AlAiWiokQCwbFUZBUlkgOhQ8EERAWDFJIkojVzJERkg6JTgmQVJmMmcxVHiY+Wmp2fn6CenJmTjIgGDRckLjc8PT4+Pz89OTMqHhMJBxAaJTQ4ODkyKyAVCwcPGSEpLS8vLjAwLCYeFCEiIhwYEAoIDRIUFRMRDgYJCk/XU6oAAAABYktHRAH/Ai3eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QILDQIAHXIFIQAABThJREFUaN7NWIt/00QcB43oeWVbN1bAgw2M0nUwZL7f77Y+QYuwaVWq6DZlTqftfNAH0ml9tVfK4h6IIor+m/5+l7RNmqRJ0+Tz8bskd7m73He/y/fuvs22bf8z3HRzoN1Lt/AdwRLcyvltEgmsf3I753wHDYyAhHYCAR+g2wPqnw5g/3xwKKAQpPAw5/VLnI8EM0iEjnDeuLzG+a7RSCAEuyGANUX5lfM9IRJEAHshAEVR1uE13OF/CISNchGACGGf/yFIof3whrF/ZQPe8xjzWaokMg4BXBYEyibnw35LlQiJqv0rWwFIlY2jRDUC5QpI9QDzs//IQQjgitLCb5zfKRM/JXqXKtEmUKp3+xgCbUm0CZDqoahvIUSiMMeu6vtXNoBxgvk2QGNtiTbxO0g15lMI20M6iSo6qU7K/sxhGSR6qSMAMdsGD/sySGwUAvhDMaHB+RE/liQiTxolqpfqFPNzFe2EP6sqkY9aB6CGMNHve5bYPTqJXmsg6jqp7ux3thlWUeWacBVX9VI9xvpjoOP6OdZB4INUWcwg0U6CLZDqSD+DRChK9E9bAuU6bAzTfQwS2W2UqIlAlarkm0TNBCjVez2/BYYBrHclUOoQQtjjGAkzbVhFLQjQw9xHvRHIA53bgAWBkOqQp7fAwqZV1IrAs4eR6P16p2JLoKDdnvLgVYVT6VhFLQlQqg/0vqq2zLQzgVhVI562gb9cEYjZFuuRgUT3mzd6OwKU6oO92W2DmXYkEHb7MOltjlk4FXuCnqVK2DGTRLsRoN0ePNADAZsymmlHArTbR9yHQKjNRm9PIKTqemNgB22cij1BTx6GmM20M0EvdpuNWUnUgaAHux2xlqgTAUr1IVc2jD5sKVEnAvHLcMjFIEVszLQjgbDbLqQamrTzok4EKNXpiOTkRW3NtCOBK6lKOMf+VrwR3HAhVTZhJ1GhlHXEDbtqYbdjXceIxGwl6gaOdlti490CcMamwydD9oi9RN2F0Oi6MUgho5n2gOtdPUxXiWpr2sZG938AP2JQyS6AvfZzrL1mdtfAehepskc7zLQXArTbh6ztttlMeyJAD/OY5XumLiS6Va/X11xI1crDRMJ9StQgVdnim8qI7TbQI9BuT5uEJI0OO0nUNazsNgkddZKoe4iv2x1SZY9bmGnP+AekagyBhPb1s4paSXWAGraZgf5WUUu7LXVItLHpH/7lhlWVsCe4/9j1pNT2osMBEPA9oZYXferpZ5597vl4Ip5IxpOJZCIeTyQgSSSTyTgAS8QJV6xOJOJQnlTbiOZx9QnxNJ4vvPjSy6+82vxAz46feO311Mk3Tp0GzGgnXGfwAMzOYjrzJlZoVadbEA/NaqXN8lNvpd9+590zGU2q7L33z36Q+nAOMD83Pz/XRDotLs2C9AKWpKFFWrSaF39zC1gF50J6QXSgXk5+9PG5xU+0ZZsuffrZ8udfZLO5HJypHB653Ape1XsBLc1+CYUrmGmfmKSyKcxkAbmVr3Kpr785n9cICF06kT97vlAsFktwFpcxKRVLpeKyuMd8sQ2tTbFQKhS0EtGgVBCP4R0khXMXvr1Ybg5RePW7i9/n85U8oiKSRXFXWYRMXtT8AMmPi2odVlbU8kqzpA31mTM//Vw+rm3OhEZ/WV2tlsvlTKZaFke1Vq1hrlyt4oGoiUy1llGLMlACWWxWy2TwDorgDmuq0E91dSncmmmEMAqQZXGlDE44IrK4Q0ShSs1Blhqg3oZoNKpl8cqgOZMZaf/4J0DSzOkTXQNzmVWJGf8B1ppgNtHidtMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjEtMDItMTFUMTI6NTQ6MjcrMDA6MDBEoz/nAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIxLTAyLTExVDEyOjU0OjI3KzAwOjAwNf6HWwAAAABJRU5ErkJggg=="}),(0,l.jsxs)("div",{className:"page-details",children:[(0,l.jsx)("p",{className:"bold-text",children:(0,s.tnH)(s.o7H)}),(0,l.jsx)("p",{className:"page-message",children:(0,s.tnH)(s.Z8S)}),(0,l.jsxs)("p",{children:["Pathname: ",n.location.pathname]}),(0,l.jsxs)("p",{children:["Search: ",n.location.search]}),(0,l.jsxs)("p",{children:["Hash: ",n.location.hash]}),(0,l.jsxs)("p",{children:["Action: ",n.action]}),(0,l.jsx)(o.zx,{category:o.WD.secondary,className:"button-position",cypressSelector:"t--invalid-page-go-back",onClick:e.goBackFn?e.goBackFn:n.goBack,size:o.$u.large,tag:"button",text:"Go Back"})]})]})}},24843:function(e,n,t){t.d(n,{Z:function(){return _}});var i,a=t(93433),r=t(1413),o=t(15671),s=t(43144),d=t(97326),l=t(60136),c=t(29388),u=(t(72791),t(763)),p=t.n(u),h=t(31591),g=t(72462),f=t(18528),m=t(22871),v=t(25697),x=t(73931),A=t(87818),y=t(23861),T=t(93512),C=t(23074),D=t(27966),b=t(35581),S=t(77239),I=t(75691),E=t(7526),Z=t(99983),k=t(15378),j=t(33562),P=t(30168),w=t(40200),F=t(44787),R=t(80184),N=F.ZP.div(i||(i=(0,P.Z)(["\n  max-width: 560px;\n  margin-bottom: 16px;\n  & > div {\n    margin: 0;\n  }\n"])));function O(e){var n=e.actionType,t=e.datasource,i=e.description,a=e.pageId,o=e.style,s=void 0===o?{}:o,d=(0,A.I0)(),l=(0,A.v9)((function(e){return(0,y.gn)(e,t.id)})),c={};return"authorize"===n&&(c.actionLabel="Authorize Datasource",c.onClick=function(){l&&a&&d((0,w.l8)(a,t.id,l))}),(0,R.jsx)(N,{style:s,children:(0,R.jsx)(f.VG,(0,r.Z)({desc:i,type:"Warning"},c))})}var U=t(33620),V=t(34135),z=t(77085),B=t(51047),H=t(42583),L=t(23234),M=function(e){(0,l.Z)(t,e);var n=(0,c.Z)(t);function t(e){var i;return(0,o.Z)(this,t),(i=n.call(this,e)).getSanitizedData=function(){return(0,r.Z)((0,r.Z)({},i.normalizeValues()),{},{name:i.props.datasourceName})},i.renderDataSourceConfigForm=function(e){var n=i.props,t=n.canCreateDatasourceActions,a=n.canManageDatasource,r=n.datasource,o=n.datasourceButtonConfiguration,s=n.datasourceId,d=n.formData,l=n.hiddenHeader,c=n.pageId,u=n.plugin,h=n.pluginPackageName,m=location.search,v=!l&&new URLSearchParams(m).get("viewMode"),x=(null===u||void 0===u?void 0:u.packageName)===j.Fo.GOOGLE_SHEETS,A=u&&(0,k.q)(d,u),y=s===z.m;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[!l&&(0,R.jsxs)(T.h4,{children:[(0,R.jsxs)(T.vU,{children:[(0,R.jsx)(T.cm,{alt:"Datasource",src:i.props.pluginImage}),(0,R.jsx)(g.Z,{disabled:!y&&!a,focusOnMount:i.props.isNewDatasource})]}),v&&(0,R.jsxs)(T.yY,{children:[(0,R.jsx)(T.oh,{category:f.WD.secondary,className:"t--edit-datasource",onClick:function(){i.props.setDatasourceViewMode(!1),i.props.history.replace((0,E.AP)({pageId:c||"",pluginPackageName:h,datasourceId:s,params:{viewMode:!1}}))},text:"EDIT"}),x&&(0,R.jsx)(Z.Z,{datasource:r,disabled:!t||!A,eventFrom:"datasource-pane",plugin:u,style:{marginLeft:"16px"}})]})]}),(!v||s===z.m)&&(0,R.jsxs)(R.Fragment,{children:[r&&x&&!A?(0,R.jsx)(O,{datasource:r,description:H.k1S,pageId:c,style:{paddingTop:"24px"}}):null,p().isNil(e)?null:p().map(e,i.renderMainSection),""]}),v&&(0,R.jsx)(D.Z,{errorComponent:r&&x&&!A?(0,R.jsx)(O,{actionType:"authorize",datasource:r,description:H.k1S,pageId:c}):null,showDatasourceSavedText:!x}),r&&(0,R.jsx)(S.ZP,{datasource:r,datasourceButtonConfiguration:o,datasourceDeleteTrigger:i.datasourceDeleteTrigger,formData:d,getSanitizedFormData:p().memoize(i.getSanitizedData),isInvalid:i.validate(),pageId:c,shouldDisplayAuthMessage:!x,shouldRender:!v,triggerSave:i.props.isDatasourceBeingSavedFromPopup})]}),(0,R.jsx)(B.Z,{datasourceId:s,datasourcePermissions:(null===r||void 0===r?void 0:r.userPermissions)||[],isOpen:i.state.showDialog,onClose:i.closeDialog,onDiscard:i.onDiscard,onSave:i.onSave,saveButtonText:(0,H.tnH)(H.Nsj)})]})},i.state={showDialog:!1,routesBlocked:!1,unblock:function(){},navigation:function(){}},i.closeDialog=i.closeDialog.bind((0,d.Z)(i)),i.onSave=i.onSave.bind((0,d.Z)(i)),i.onDiscard=i.onDiscard.bind((0,d.Z)(i)),i.datasourceDeleteTrigger=i.datasourceDeleteTrigger.bind((0,d.Z)(i)),i}return(0,s.Z)(t,[{key:"componentDidUpdate",value:function(e){e.viewMode===this.props.viewMode||this.props.viewMode||this.blockRoutes(),this.props.isDatasourceBeingSaved&&this.closeDialogAndUnblockRoutes()}},{key:"routesBlockFormChangeCallback",value:function(){this.props.isFormDirty?this.state.routesBlocked||this.blockRoutes():this.state.routesBlocked&&this.closeDialogAndUnblockRoutes(!0)}},{key:"componentDidMount",value:function(){if(!this.props.datasource&&this.props.match.params.datasourceId===z.m){var e=new URL(window.location.href),n=null===e||void 0===e?void 0:e.searchParams.get("pluginId");this.props.createTempDatasource({pluginId:n})}this.props.viewMode||this.blockRoutes()}},{key:"componentWillUnmount",value:function(){this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.state.unblock&&this.state.unblock()}},{key:"closeDialog",value:function(){this.setState({showDialog:!1})}},{key:"onSave",value:function(){this.props.toggleSaveActionFromPopupFlag(!0)}},{key:"blockRoutes",value:function(){var e,n,t=this;this.setState({unblock:null===(e=this.props)||void 0===e||null===(n=e.history)||void 0===n?void 0:n.block((function(e){return t.setState({navigation:function(){return t.props.history.push(e.pathname+e.search,e.state)},showDialog:!0,routesBlocked:!0},t.routesBlockFormChangeCallback.bind(t)),!1}))})}},{key:"onDiscard",value:function(){this.closeDialogAndUnblockRoutes(),this.state.navigation()}},{key:"closeDialogAndUnblockRoutes",value:function(e){this.closeDialog(),this.state.unblock&&this.state.unblock(),this.props.toggleSaveActionFlag(!1),this.props.toggleSaveActionFromPopupFlag(!1),this.setState({routesBlocked:!1}),e&&this.state.navigation()}},{key:"datasourceDeleteTrigger",value:function(){this.state.unblock&&this.state.unblock()}},{key:"render",value:function(){var e=this.props,n=e.formConfig;if(!e.pluginId)return(0,R.jsx)(I.Z,{});var t=this.renderDataSourceConfigForm(n);return this.renderForm(t)}}]),t}(T.nm),_=(0,A.$j)((function(e,n){var t,i,r,o,s,d,l,c=n.datasourceId||(null===(t=n.match)||void 0===t||null===(i=t.params)||void 0===i?void 0:i.datasourceId),g=e.ui.datasourcePane,f=e.entities,x=f.datasources,A=f.plugins,T=(0,U.dZ)(e),D=(0,y.qO)(e,c),S=A.formConfigs,I=(0,m.Z)(h.Y4)(e),E=p().get(D,"pluginId",""),Z=(0,y.s3)(e,E),k=S[E],j={};k&&(0,u.merge)(j,(0,C.AI)(k)),(0,u.merge)(j,D);var P=(0,y.Ds)(e,null===I||void 0===I?void 0:I.pluginId),w=c===z.m||(0,v.Z)(h.Y4)(e),F=(null===D||void 0===D?void 0:D.userPermissions)||[],R=(0,V.iK)(F),N=(0,b.SE)(e),O=(0,V.Q0)([].concat((0,a.Z)(F),(0,a.Z)(N)));return{datasource:D,datasourceButtonConfiguration:P,datasourceId:c,isSaving:x.loading,isDeleting:!(null===D||void 0===D||!D.isDeleting),formData:I,formConfig:k,viewMode:null!==T&&void 0!==T?T:!n.fromImporting,isNewDatasource:g.newDatasource===z.m,pageId:n.pageId||(null===(r=n.match)||void 0===r||null===(o=r.params)||void 0===o?void 0:o.pageId),plugin:Z,pluginImage:(0,y.x8)(e)[E],pluginPackageName:n.pluginPackageName||(null===(s=n.match)||void 0===s||null===(d=s.params)||void 0===d?void 0:d.pluginPackageName),initialValues:j,pluginId:E,actions:e.entities.actions,formName:h.Y4,applicationId:(0,b.aS)(e),canManageDatasource:R,datasourceName:null!==(l=null===D||void 0===D?void 0:D.name)&&void 0!==l?l:"",isDatasourceBeingSaved:x.isDatasourceBeingSaved,isDatasourceBeingSavedFromPopup:e.entities.datasources.isDatasourceBeingSavedFromPopup,isFormDirty:w,canCreateDatasourceActions:O,featureFlags:(0,L.QX)(e)}}),(function(e){return{discardTempDatasource:function(){return e((0,w.iM)())},deleteTempDSFromDraft:function(){return e((0,w.c2)())},toggleSaveActionFlag:function(n){return e((0,w.Tv)(n))},toggleSaveActionFromPopupFlag:function(n){return e((0,w.V)(n))},setDatasourceViewMode:function(n){return e((0,w.Ui)(n))},createTempDatasource:function(n){return e((0,w.Pd)(n))}}}))((0,x.Z)({form:h.Y4,enableReinitialize:!0})(M))},51165:function(e,n,t){t.d(n,{Z:function(){return h}});var i,a,r=t(30168),o=(t(72791),t(18528)),s=t(44787),d=t(60309),l=t(80184),c=s.ZP.div(i||(i=(0,r.Z)(["\n  display: flex;\n  ",";\n  ",";\n\n  &:hover,\n  &:focus {\n    color: ",";\n  }\n\n  padding: ",";\n\n  width: 100%;\n\n  align-items: center;\n"])),(0,o.z8)("p0"),(function(e){return function(e){return e.selected?"color: ".concat(e.theme.colors.tabItemBackgroundFill.highlightTextColor,";\n      font-weight: 500;\n      border-bottom: 2px solid var(--ads-color-brand);\n\n     "):"color: ".concat(d.w.GREY_7,"\n      ")}(e)}),(function(e){return e.theme.colors.tabItemBackgroundFill.highlightTextColor}),(function(e){return"".concat(e.theme.spaces[5],"px 0px")}));function u(e){var n=e.selected,t=e.tab,i=e.vertical;return(0,l.jsx)(c,{selected:n,vertical:i,children:t.title},t.title)}var p=s.ZP.div(a||(a=(0,r.Z)(["\n  .react-tabs {\n    border-bottom: 1px solid ",";\n  }\n  .react-tabs__tab {\n    margin-right: 0px;\n    padding-right: ","px;\n  }\n"])),d.w.ALTO2,(function(e){return e.theme.spaces[8]}));function h(e){return(0,l.jsx)(p,{children:(0,l.jsx)(o.id,{onSelect:e.onSelect,selectedIndex:e.activeTabIndex||0,tabItemComponent:u,tabs:e.options})})}},80669:function(e,n,t){t.d(n,{Z:function(){return se}});var i,a,r,o=t(37762),s=t(29439),d=t(30168),l=t(72791),c=t(18879),u=t(87818),p=t(51165),h=t(75109),g=t(18528),f=t(60309),m=t(44787),v=t(763),x=t(42750),A=t(46898),y=t(23861),T=t(28663),C=t(68855),D=t(34404),b=t(40641),S=t(75623),I=t(93512),E=t(80184),Z=m.ZP.div(i||(i=(0,d.Z)(["\n  display: flex;\n  height: 64px;\n  width: 100%;\n  padding: 10px 18px;\n  margin-bottom: 10px;\n  cursor: pointer;\n  opacity: ",";\n  &.active,\n  &:hover {\n    background-color: ",";\n  }\n  img {\n    width: 24pxx;\n    height: 22.5px;\n  }\n"])),(function(e){return e.disabled?.4:1}),f.w.GEYSER_LIGHT),k=m.ZP.div(a||(a=(0,d.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),j=m.ZP.div(r||(r=(0,d.Z)(["\n  width: 100%;\n  display: flex;\n  margin-bottom: ","px;\n  .t--ds-list-title {\n    max-width: 120px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.spaces[2]}));var P,w,F,R,N,O,U,V,z,B,H,L,M=function(e){var n=e.ds,t=e.onClick,i=e.plugin,a=e.selected;return(0,E.jsxs)(Z,{className:"t--ds-list ".concat(a?"active":""),onClick:function(){return t(n)},children:[(0,E.jsx)(I.cm,{alt:"Datasource",src:i.image}),(0,E.jsxs)(k,{children:[(0,E.jsxs)(j,{children:[(0,E.jsx)(g.xv,{className:"t--ds-list-title",color:f.w.GRAY_800,type:g.yG.H4,children:n.name}),(0,E.jsx)(g.JO,{fillColor:n.isConfigured?f.w.GREEN:f.w.ERROR_RED,name:n.isConfigured?"oval-check":"info",size:g.Jh.MEDIUM})]}),(0,E.jsx)(g.xv,{color:f.w.GRAY_700,type:g.yG.H5,children:i.name})]})]})},_=t(44763),G=t(68219),q=t(40200),K=t(7526),Y=t(93815),W=m.ZP.div(P||(P=(0,d.Z)(["\n  height: 765px;\n  max-height: 82vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow-y: hidden;\n  padding: 0px 10px 0px 0px;\n"]))),X=m.ZP.div(w||(w=(0,d.Z)(["\n  margin-bottom: ","px;\n  width: calc(100% - 206px);\n"])),(function(e){return e.theme.spaces[11]})),Q=m.ZP.div(F||(F=(0,d.Z)(["\n  flex: 3;\n  height: calc(100% - ","px);\n  padding-left: ","px;\n"])),h.d0,(function(e){return e.theme.spaces[8]})),J=m.ZP.div(R||(R=(0,d.Z)(["\n  height: ","px;\n  padding-left: ","px;\n\n  .react-tabs {\n    width: 1029px;\n  }\n"])),h.d0,(function(e){return e.theme.spaces[8]})),$=m.ZP.div(N||(N=(0,d.Z)(["\n  height: calc(100% - 96px);\n  display: flex;\n  margin-left: -",'px;\n\n  .t--json-to-form-wrapper {\n    width: 100%;\n\n    .t--json-to-form-body {\n      padding: 0 20px;\n      .t--collapse-section-container {\n        margin-top: 20px;\n      }\n    }\n\n    .t--close-editor {\n      display: none;\n    }\n\n    div[class^="JSONtoForm__DBForm-"] {\n      padding-top: 0px;\n\n      div[class^="JSONtoForm__SaveButtonContainer-"] {\n        button:first-child {\n          display: none;\n        }\n      }\n    }\n\n    .t--collapse-top-border {\n      height: 1px;\n      margin-top: ',"px;\n      margin-bottom: ","px;\n\n      &:first-child {\n        display: none;\n      }\n    }\n\n    .t--collapse-section-container {\n      width: 816px;\n\n      & > div {\n        color: ",';\n      }\n    }\n\n    .label-icon-wrapper div[class^="IconConstants__IconWrapper-"] {\n      width: 12px;\n      height: 14px;\n      margin-left: 6px;\n      margin-right: 6px;\n\n      svg {\n        width: 12px;\n        height: 14px;\n\n        path {\n          fill: ',';\n        }\n      }\n    }\n\n    div > label[class^="StyledFormComponents__StyledFormLabel-"] {\n      &:last-child {\n        width: 140px !important;\n      }\n    }\n  }\n\n  .t--message-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n'])),(function(e){return e.theme.spaces[8]}),(function(e){return e.theme.spaces[10]}),(function(e){return e.theme.spaces[10]}),f.w.BLACK,f.w.GREEN),ee=m.ZP.div(O||(O=(0,d.Z)(["\n  height: 100%;\n  overflow: auto;\n  width: 206px;\n\n  .t--collapse-top-border {\n    display: none;\n  }\n\n  .t--collapse-section-container {\n    width: 90%;\n    margin-left: 5%;\n    margin-bottom: ","px;\n\n    & > div {\n      font-style: normal;\n      font-weight: normal;\n      font-size: 12px;\n      line-height: 16px;\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.spaces[11]+2}),f.w.BLACK),ne=m.ZP.div(U||(U=(0,d.Z)(["\n  font-size: ","px;\n  line-height: ","px;\n  letter-spacing: ","px;\n  color: ",";\n  text-align: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.typography.p0.fontSize}),(function(e){return e.theme.typography.p0.lineHeight}),(function(e){return e.theme.typography.p0.letterSpacing}),f.w.GREY_9,(function(e){return e.theme.spaces[7]})),te=m.ZP.div(V||(V=(0,d.Z)(["\n  position: absolute;\n  right: ","px;\n  top: ","px;\n\n  padding: ","px;\n  border-radius: ","px;\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return-e.theme.spaces[4]}),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.radii[1]})),ie=m.ZP.div(z||(z=(0,d.Z)(["\n  position: absolute;\n  right: 0px;\n  top: ","px;\n\n  padding: ",";\n"])),(function(e){return e.theme.spaces[11]}),(function(e){return"".concat(e.theme.spaces[3],"px ").concat(e.theme.spaces[7]-1,"px")})),ae=m.ZP.div(B||(B=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n"]))),re=m.ZP.div(H||(H=(0,d.Z)(['\n  width: calc(100% - 206px);\n  overflow: auto;\n\n  div[class^="RestAPIDatasourceForm__RestApiForm-"] {\n    padding-top: 0px;\n    height: 100%;\n  }\n\n  .t--delete-datasource {\n    display: none;\n  }\n'])));function oe(){return(0,E.jsxs)(ae,{children:[(0,E.jsx)(g.xv,{color:f.w.WHITE,style:{marginBottom:"4px"},type:g.yG.P3,children:(0,A.tnH)(A.WaY)}),(0,E.jsx)(g.xv,{color:f.w.WHITE,type:g.yG.P3,children:(0,A.tnH)(A.sZF)})]})}!function(e){e.SUCCESS="success",e.APPSMITH_ERROR="appsmith_error"}(L||(L={}));var se=function(){var e=(0,m.Fg)(),n=(0,u.I0)(),t=(0,u.v9)(y.YZ),i=(0,u.v9)(c.xz),a=(0,u.v9)(c.su),r=(0,u.v9)(y._K),d=(0,u.v9)(y.x8),I=(0,u.v9)(y.AR),Z=(0,u.v9)(y.$A),k=(0,u.v9)(y.S5),j=(0,u.v9)(y.xO),P=JSON.parse(Y.ZP.getItem("importedAppPendingInfo")||"null"),w=(0,u.v9)(c.Me),F=(0,S.aM)(),R=F.get("appId")||(P?P.appId:null),N=F.get("pageId")||(P?P.pageId:null),O=F.get("datasourceId")||(P?P.datasourceId:null),U="true"===F.get("importForGit")||!!P,V=(0,l.useState)(O),z=(0,s.Z)(V,2),B=z[0],H=z[1],ae=(0,l.useState)(N),se=(0,s.Z)(ae,2),de=se[0],le=se[1],ce=(0,l.useState)(R),ue=(0,s.Z)(ce,2),pe=ue[0],he=ue[1],ge=(0,l.useState)(""),fe=(0,s.Z)(ge,2),me=fe[0],ve=fe[1],xe=(0,l.useState)(null),Ae=(0,s.Z)(xe,2),ye=Ae[0],Te=Ae[1],Ce=(0,l.useState)(U),De=(0,s.Z)(Ce,2),be=De[0],Se=De[1],Ie=(0,l.useState)(!1),Ee=(0,s.Z)(Ie,2),Ze=Ee[0],ke=Ee[1],je=r.find((function(e){return e.id===O})),Pe=null===je||void 0===je?void 0:je.name,we=null===je||void 0===je?void 0:je.workspaceId,Fe="";if(null!==je&&void 0!==je&&je.pluginId&&(Fe=I[je.pluginId]),be){Se(!1);var Re=F.get("response_status"),Ne=F.get("display_message"),Oe=g.$e.danger;if(Re!==L.SUCCESS){var Ue=Re===L.APPSMITH_ERROR?A.sSc:A.rqT;g.x7.show({text:Ne||Ue,variant:Oe});var Ve=Re;b.Z.logEvent("UPDATE_DATASOURCE",{dsName:Pe,oAuthStatus:Ve,orgId:we,pluginName:Fe})}else O&&n((0,q.$z)(O));b.Z.logEvent("DATASOURCE_AUTH_COMPLETE",{queryAppId:R,queryDatasourceId:O,queryPageId:N})}(0,l.useEffect)((function(){if(w&&U&&O&&R){var e,t=(0,o.Z)(w);try{for(t.s();!(e=t.n()).done;){var i=e.value,s=i.applications,d=i.workspace,l=s.find((function(e){return e.id===R}));if(l){n((0,T.F5)(d.id)),n((0,T.di)({isOpen:!0}));var c=(0,_.Sf)(l.pages);a?le(a):c&&le(c),r.length||n({type:G.Ep.FETCH_UNCONFIGURED_DATASOURCE_LIST,payload:{applicationId:pe,workspaceId:d.id}});break}}}catch(u){t.e(u)}finally{t.f()}}}),[w,U]);var ze=(0,u.v9)(c.Xj);(0,l.useEffect)((function(){t&&i&&n((0,T.ED)(i))}),[i,t]),(0,l.useEffect)((function(){t&&(j&&ke(!1),k&&ke(!0))}),[t,k,j]);var Be=(0,l.useCallback)((function(){Y.ZP.setItem("importedAppPendingInfo","null"),n((0,T.di)({isOpen:!1})),n((0,T.F5)("")),n((0,T.fA)("")),n((0,T.Rt)()),H("")}),[n,T.di,t]),He=(0,l.useCallback)((function(e){ke(!1),H(e.id),Te(e),b.Z.logEvent("RECONNECTING_DATASOURCE_ITEM_CLICK",{id:e.id,name:e.name,pluginName:I[e.id],isConfigured:e.isConfigured})}),[]);(0,l.useEffect)((function(){var e;ze&&r&&!B&&!U&&(Te(r[0]),H(null!==(e=r[0].id)&&void 0!==e?e:""))}),[ze,B,U]);var Le=(0,u.v9)(c.Mn);(0,l.useEffect)((function(){if(!U){var e,n=null===Le||void 0===Le||null===(e=Le.pages)||void 0===e?void 0:e.find((function(e){return e.isDefault}));n&&(le(n.id),he(null===Le||void 0===Le?void 0:Le.id))}}),[Le,U]),(0,l.useEffect)((function(){de&&pe&&r.length&&ve((0,K.K3)({pageId:de}))}),[de,pe,r]),(0,l.useEffect)((function(){if(t&&!Ze){if("true"!==F.get("importForGit")&&r.length){var e,n,i=r.find((function(e){return e.id===B}));if(i)if((null===(e=i.datasourceConfiguration)||void 0===e||null===(n=e.authentication)||void 0===n?void 0:n.authenticationType)===C.Gr.OAUTH2)return}var a=B,o=r.filter((function(e){return!e.isConfigured}));if(o.length>0){var s=void 0;if(a){var d=r.findIndex((function(e){return e.id===a}));if(d>-1&&!r[d].isConfigured)return;s=r.slice(d+1).find((function(e){return!e.isConfigured}))}s=s||o[0],H(s.id),Te(s);var l={appId:pe,pageId:de,datasourceId:s.id};Y.ZP.setItem("importedAppPendingInfo",JSON.stringify(l))}else me&&(Y.ZP.setItem("importApplicationSuccess","true"),Y.ZP.setItem("importedAppPendingInfo","null"),window.open(me,"_self"))}}),[r,me,t,Ze,U]);var Me=r.map((function(e){return(0,E.jsx)(M,{ds:e,onClick:function(){He(e)},plugin:{name:I[e.pluginId],image:d[e.pluginId]},selected:e.id===B},e.id)})),_e=ze&&!Z&&!(null!==ye&&void 0!==ye&&ye.isConfigured);return(0,E.jsx)(g.au,{canEscapeKeyClose:!0,canOutsideClickClose:!0,className:h.PZ.RECONNECT_DATASOURCE_MODAL,isOpen:t,maxWidth:"1300px",onClose:Be,width:"1293px",children:(0,E.jsxs)(W,{children:[(0,E.jsx)(J,{children:(0,E.jsx)(p.Z,{activeTabIndex:0,onSelect:function(){},options:[{key:"RECONNECT_DATASOURCES",title:"Reconnect Datasources"}]})}),(0,E.jsxs)(Q,{children:[(0,E.jsx)(x.Dx,{children:(0,A.tnH)(A.SwX)}),(0,E.jsx)(X,{children:(0,E.jsx)(g.xv,{color:f.w.BLACK,type:g.yG.P1,children:(0,A.tnH)(A.p7N)})}),(0,E.jsxs)($,{children:[(0,E.jsx)(ee,{children:Me}),_e&&(0,E.jsx)(re,{children:(0,E.jsx)(D.Z,{applicationId:pe,datasourceId:B,fromImporting:!0,pageId:de})}),(null===ye||void 0===ye?void 0:ye.isConfigured)&&(0,E.jsxs)(X,{className:"t--message-container",children:[(0,E.jsx)(ne,{children:(0,A.tnH)(A.sHT)}),(0,E.jsx)(ne,{children:(0,A.tnH)(A.nrS)})]})]})]}),(0,E.jsx)(ie,{children:(0,E.jsx)(g.KZ,{boundary:"viewport",content:(0,E.jsx)(oe,{}),maxWidth:"320px",position:"bottom-right",children:(0,E.jsx)(g.zx,{category:g.WD.secondary,className:"t--skip-to-application-btn",href:me,onClick:function(){b.Z.logEvent("RECONNECTING_SKIP_TO_APPLICATION_BUTTON_CLICK"),Y.ZP.setItem("importedAppPendingInfo","null")},size:g.$u.medium,text:(0,A.tnH)(A.WaY)})})}),(0,E.jsx)(te,{className:"t--reconnect-close-btn",onClick:Be,children:(0,E.jsx)(g.JO,{fillColor:(0,v.get)(e,"colors.gitSyncModal.closeIcon"),name:"close-modal",size:g.Jh.XXXXL})})]})})}},42750:function(e,n,t){t.d(n,{Dx:function(){return u},QE:function(){return p},T:function(){return g},YS:function(){return h}});var i,a,r,o,s=t(30168),d=t(44787),l=t(18528),c=t(60309),u=d.ZP.p(i||(i=(0,s.Z)(["\n  ",";\n  margin: ",";\n  color: ",";\n"])),(0,l.z8)("h1"),(function(e){return"".concat(e.theme.spaces[7],"px 0px ").concat(e.theme.spaces[3],"px 0px")}),c.w.GREY_900),p=d.ZP.div(a||(a=(0,s.Z)(["\n  margin-top: 8px;\n  ",";\n  color: ",";\n"])),(0,l.z8)("p1"),c.w.GREY_900),h=d.ZP.span(r||(r=(0,s.Z)(["\n  ",";\n"])),(0,l.z8)("p1")),g=d.ZP.div(o||(o=(0,s.Z)(["\n  margin: ",";\n"])),(function(e){return e.horizontal?"0px ".concat(e.theme.spaces[e.size],"px "):"".concat(e.theme.spaces[e.size],"px 0px")}))},77239:function(e,n,t){t.d(n,{O8:function(){return E}});var i,a,r,o,s,d=t(4942),l=t(29439),c=t(30168),u=t(72791),p=t(44787),h=t(93512),g=t(87818),f=t(23861),m=t(40200),v=t(40641),x=t(35581),A=t(79271),y=t(68855),T=t(46898),C=t(18528),D=t(763),b=t(77085),S=t(34135),I=t(80184);!function(e){e.SUCCESS="success",e.APPSMITH_ERROR="appsmith_error"}(o||(o={})),function(e){e.DELETE="DELETE",e.SAVE="SAVE",e.TEST="TEST",e.SAVE_AND_AUTHORIZE="SAVE_AND_AUTHORIZE"}(s||(s={}));var E={DELETE:"DELETE",SAVE:"SAVE",TEST:"TEST",SAVE_AND_AUTHORIZE:"SAVE_AND_AUTHORIZE"},Z=(0,p.ZP)(h.Kk)(i||(i=(0,c.Z)(["\n  &&&& {\n    height: 32px;\n    width: ",";\n  }\n"])),(function(e){return e.fluidWidth?"":"87px"})),k=p.ZP.div(a||(a=(0,c.Z)(["\n  margin-top: 24px;\n  display: flex;\n  justify-content: flex-end;\n"]))),j=p.ZP.div(r||(r=(0,c.Z)(["\n  color: ",';\n  margin-top: 15px;\n  &:after {\n    content: " *";\n    color: inherit;\n  }\n'])),(function(e){return e.theme.colors.error}));n.ZP=function(e){var n,t,i,a,r=e.datasource,s=e.datasourceButtonConfiguration,c=void 0===s?["DELETE","SAVE"]:s,p=e.datasourceDeleteTrigger,P=e.formData,w=e.getSanitizedFormData,F=e.isInvalid,R=e.pageId,N=e.shouldRender,O=e.shouldDisplayAuthMessage,U=void 0===O||O,V=e.triggerSave,z=e.isFormDirty,B=P&&"authType"in P?null===P||void 0===P?void 0:P.authType:null===P||void 0===P||null===(n=P.datasourceConfiguration)||void 0===n||null===(t=n.authentication)||void 0===t?void 0:t.authenticationType,H=r.id,L=r.isDeleting,M=r.pluginId,_=(0,g.v9)(x.aS),G=(0,g.v9)((function(e){return(0,f.XC)(e,M)})),q=r.userPermissions||[],K=(0,S.iK)(q),Y=(0,S.vQ)(q),W=(0,g.I0)(),X=(0,A.TH)(),Q=(0,A.UO)().pageId||R,J=(0,u.useState)(!1),$=(0,l.Z)(J,2),ee=$[0],ne=$[1],te=null===r||void 0===r?void 0:r.name,ie=null===r||void 0===r?void 0:r.workspaceId;(0,u.useEffect)((function(){ee&&se()}),[ee]),(0,u.useEffect)((function(){if(B===y.Gr.OAUTH2){var e=new URLSearchParams(X.search),n=e.get("response_status"),t=e.get("importForGit"),i=e.get("datasourceId");if(n&&(!t||t&&i===H)){var a=e.get("display_message"),r=C.$e.danger;if(n!==o.SUCCESS){var s=n===o.APPSMITH_ERROR?T.sSc:T.rqT;C.x7.show({text:a||s,variant:r});var d=n;v.Z.logEvent("UPDATE_DATASOURCE",{dsName:te,oAuthStatus:d,orgId:ie,pluginName:G})}else W((0,m.$z)(H));v.Z.logEvent("DATASOURCE_AUTH_COMPLETE",{applicationId:_,datasourceId:H,pageId:Q})}}}),[B]);var ae=(0,g.v9)(f.uc).datasources,re=ae.isTesting,oe=ae.loading,se=(0,D.debounce)((function(){return ne(!1)}),2200),de=(0,g.v9)((function(e){return(0,f.gn)(e,H)}));(0,u.useEffect)((function(){V&&("SAAS"===de?pe():ue())}),[V]);var le=(null===r||void 0===r||null===(i=r.datasourceConfiguration)||void 0===i||null===(a=i.authentication)||void 0===a?void 0:a.authenticationStatus)===y.y_.SUCCESS,ce=function(){v.Z.logEvent("TEST_DATA_SOURCE_CLICK",{pageId:Q,appId:_}),W((0,m.YB)(w()))},ue=function(){W((0,m.Tv)(!0)),v.Z.logEvent("SAVE_DATA_SOURCE_CLICK",{pageId:Q,appId:_}),r.id===b.m?W((0,m.nS)(w())):(W((0,m.Ui)(!0)),W((0,m.Y_)(w())))},pe=function(){W((0,m.Tv)(!0)),r.id===b.m?W((0,m.nS)(w(),de?(0,m.l8)(Q,H,de):void 0)):(W((0,m.Ui)(!0)),W((0,m.Y_)(w(),de?(0,m.l8)(Q,H,de):void 0)))},he=H===b.m,ge=function(e){var n;return(n={},(0,d.Z)(n,E.DELETE,(0,I.jsx)(h.Kk,{category:C.WD.primary,className:"t--delete-datasource",disabled:he||!Y,isLoading:L,onClick:function(){L||(ee?(W((0,m.Vl)({id:H})),p()):ne(!0))},size:"medium",tag:"button",text:L?(0,T.tnH)(T.VkA):ee?(0,T.tnH)(T.fUd):(0,T.tnH)(T.mcU),variant:C.$e.danger},e)),(0,d.Z)(n,E.TEST,(0,I.jsx)(h.Kk,{category:C.WD.secondary,className:"t--test-datasource",isLoading:re,onClick:ce,size:"medium",tag:"button",text:"Test",variant:C.$e.success},e)),(0,d.Z)(n,E.SAVE,(0,I.jsx)(h.Kk,{category:C.WD.primary,className:"t--save-datasource",disabled:F||!z||!he&&!K,filled:!0,isLoading:oe,onClick:ue,size:"medium",tag:"button",text:"Save",variant:C.$e.success},e)),(0,d.Z)(n,E.SAVE_AND_AUTHORIZE,(0,I.jsx)(Z,{category:C.WD.primary,className:"t--save-datasource",disabled:F||!he&&!K,filled:!0,fluidWidth:!0,isLoading:oe,onClick:pe,size:"medium",tag:"button",text:"Save and Authorize",variant:C.$e.success},e)),n)[e]};return(0,I.jsxs)(I.Fragment,{children:[B===y.Gr.OAUTH2&&!le&&U&&(0,I.jsx)(j,{children:"Datasource not authorized"}),N&&(0,I.jsx)(k,{children:null===c||void 0===c?void 0:c.map((function(e){return ge(e)}))})]})}}}]);
//# sourceMappingURL=447.a1205d55.chunk.js.map